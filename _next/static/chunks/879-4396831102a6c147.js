"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{30929:function(e,t,n){n.d(t,{j:function(){return i}});var o=n(11163),a=n(67294);const i={error:"ERROR",info:"INFO",warning:"WARNING",warn:"WARNING"};t.Z=()=>{const{pathname:e}=(0,o.useRouter)(),t=()=>{if(window.localStorage)try{const e=JSON.parse(localStorage.getItem("APP_LOGS")||"[]");if("undefined"!==typeof Blob){const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="APP_LOGS_FILE.json",o.click(),URL.revokeObjectURL(n)}else{const t="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2)),n=document.createElement("a");n.href=t,n.download="APP_LOGS_FILE.json",n.click()}}catch(e){console.error("Failed to download logs",e)}};return(0,a.useEffect)((()=>{console.log("path",e),"/status/download-debug"===e&&t()}),[e]),{logger:(e,t)=>{if(window.localStorage){let o=[];try{o=JSON.parse(localStorage.getItem("APP_LOGS")||"[]")}catch(n){console.error("Failed to parse logs from localStorage",n)}o.push("".concat((new Date).toISOString()," => [").concat(t,"] ").concat(e));let a=JSON.stringify(o);for(;new Blob([a]).size>5120;)o.shift(),a=JSON.stringify(o);try{localStorage.setItem("APP_LOGS",a)}catch(n){console.error("Failed to save logs to localStorage",n)}}},downloadLogs:t}}},94345:function(e,t,n){var o=n(85893),a=n(35541),i=n(19778),r=n(14581),s=n(64859),l=n(71293),c=n(34292),d=n(57747),h=n(54346),g=n(14253),f=n(55154),u=n(96918);t.Z=e=>{let{bg:t,color:n,children:m,placement:p,onClose:w,isOpen:x,isClosable:y,title:v,footer:j,hideModeSwitch:S,noHeader:b,w:O,width:I,maxW:C,maxWidth:F,h:R,height:z,maxH:E,maxHeight:L,dontCloseOnOverlayClick:k,...U}=e;return(0,o.jsxs)(a.u_,{closeOnOverlayClick:!k,onClose:w||(()=>{}),isOpen:x,isCentered:!0,children:[(0,o.jsx)(i.Z,{}),(0,o.jsxs)(r.h,{bg:t||(0,u.Z)("cardBg.light","cardBg.dark"),color:n,minH:R||z||"50vh",maxH:E||L||"70vh",w:O||I||{base:"95%",md:"650px"},maxW:C||F,borderRadius:"16px !important",children:[b?null:(0,o.jsxs)(s.x,{borderBottomWidth:"1px",w:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,o.jsx)(l.x,{as:"div",fontSize:{base:"1.1rem",md:"1.3rem"},textTransform:"capitalize",children:v}),(0,o.jsx)(c.U,{children:w&&(y||void 0===y)?(0,o.jsx)(d.xu,{onClick:w,cursor:"pointer",display:"block",children:(0,o.jsx)(f.aHS,{size:"24px"})}):null})]}),(0,o.jsx)(h.f,{...U,children:m}),j?(0,o.jsx)(g.m,{children:j}):null]})]})}},35052:function(e,t,n){var o=n(85893),a=n(67294),i=n(94345),r=n(85461),s=n(55154),l=n(48783),c=n(71293),d=n(34292),h=n(6089),g=n(77181),f=n(57369),u=n(13653),m=n(30929);t.Z=e=>{let{galleryKey:t,onClose:n,onImage:p,maxFileSize:w,isOtherFiles:x,onThumb:y,title:v,message:j,hoverMessage:S,ruleMessage:b,useImageText:O,accept:I}=e;const{logger:C}=(0,m.Z)(),[F,R]=(0,a.useState)(!1),[z,E]=(0,a.useState)(!1),[L,k]=(0,a.useState)(null),[U,D]=(0,a.useState)();(0,a.useEffect)((()=>{if(t){const e=(0,f.fe)(t);if(e){k(e);const t=(0,u.g8)(e);e&&D(t)}}}),[t]);const[P,A]=(0,a.useState)();return(0,a.useEffect)((()=>{U&&L&&y?y(U,L).then((e=>{A(e)})).catch((e=>{console.error("handleUseImage: ",e.message),A(void 0)})):A(L)}),[L]),(0,o.jsx)(i.Z,{title:v,isOpen:!0,onClose:()=>n(),children:(0,o.jsxs)(l.g,{p:"0.5rem",id:"upload-area",justifyContent:"center",alignItems:"center",mb:4,width:"100%",height:"300px",cursor:"pointer",border:"4px dashed ".concat(F?"#dd6b20":"#ccc"),onDragEnter:e=>{e.preventDefault(),R(!0)},onDragOver:e=>{e.preventDefault()},onDragLeave:e=>{e.preventDefault(),R(!1)},onDrop:async e=>{if(z)return;e.preventDefault(),R(!1);const t=e.dataTransfer.files;if(t.length>0){const e=new FileReader,n=t[0];e.onload=async e=>{if(w&&w>0&&!x&&n.size>w){E(!0);const e=await(0,g.t)(n,w);k(e.base64),D(e.file),E(!1)}else{var t;const o=null===(t=e.target)||void 0===t?void 0:t.result;k(o),D(n)}},e.readAsDataURL(n)}},children:[(0,o.jsx)(s.DUB,{size:"2rem"}),(0,o.jsxs)(l.g,{alignItems:"center",children:[(0,o.jsx)(c.x,{as:"div",fontSize:"12px",children:F?S:j}),(0,o.jsx)(c.x,{as:"div",fontSize:"14px",children:"OR"}),(0,o.jsx)(r.Z,{status:"info",mb:"1rem",onClick:()=>{if(C("handleClickUpload.called:",m.j.info),z)return void C("handleClickUpload.aborted: processing in progress",m.j.warning);const e=document.createElement("input");e.type="file",e.accept=I||"image/*",e.style.display="none",document.body.appendChild(e),e.addEventListener("change",(async t=>{const n=t.target.files;if(document.body.removeChild(e),n&&n.length>0){const e=n[0];C("File selected: ".concat(JSON.stringify({name:e.name,size:e.size,type:e.type})),m.j.info);const t=new FileReader;t.onload=async t=>{var n;C("FileReader.onload fired:",m.j.info);const o=null===(n=t.target)||void 0===n?void 0:n.result;if(o)if(w&&w>0&&!x&&e.size>w){C("File size exceeds maxFileSize, resizing...",m.j.info),E(!0);const t=await(0,g.t)(e,w);C("Image resized.size: ".concat(t.base64.length),m.j.info),k(t.base64),D(t.file),E(!1)}else C("File within size limit, setting base64 image",m.j.warn),k(o),D(e);else C("FileReader result is empty or undefined",m.j.error)},t.onerror=e=>{C("FileReader.onerror fired: ".concat((null===e||void 0===e?void 0:e.message)||e),m.j.error)},t.readAsDataURL(e)}else C("No file selected or file input is empty",m.j.warn)})),e.click()},display:z?"none":"block",children:"Click to Upload"}),(0,o.jsxs)(c.x,{as:"div",fontSize:"12px",textAlign:"center",children:["(",b,")"]}),z?(0,o.jsx)(c.x,{as:"div",fontSize:"12px",fontStyle:"italic",color:"#3182ce",children:"Processing image. Please wait..."}):null,(0,o.jsx)(d.U,{justifyContent:"center",alignItems:"flex-end",flexWrap:"wrap",children:L&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.E,{src:P||"",bg:"#cfcfcf",width:"auto",height:"70px",border:"4px ridge #dd6b20"}),(0,o.jsx)(r.Z,{status:"warning",h:"70px",onClick:()=>{p(U,L,P)},disabled:z,fontStyle:z?"italic":"normal",children:z?"Please wait...":O})]})})]})]})})}},13653:function(e,t,n){function o(e){return new Promise(((t,n)=>{const o=new Image;o.onload=()=>{t({width:o.width,height:o.height})},o.onerror=e=>{n(new Error("Failed to load image: ".concat(e)))},o.src=e}))}async function a(e,t){return new Promise(((n,o)=>{const a=new Image;a.onload=()=>{const e=a.width/a.height,i=t/e,r=document.createElement("canvas");r.width=t,r.height=i;const s=r.getContext("2d");if(s){s.drawImage(a,0,0,t,i);const e=r.toDataURL("image/png");n(e)}else o(new Error("Failed to get canvas context"))},a.onerror=e=>{o(new Error("Failed to load image: ".concat(e)))},a.src=e}))}function i(e,t,n){var o;const[a,i]=e.split(",");if(n=n||(null===(o=a.match(/:(.*?);/))||void 0===o?void 0:o[1]),!t){const e=(null===n||void 0===n?void 0:n.split("/")[1])||"bin";t="file_".concat(Date.now(),".").concat(e)}const r=window.atob(i),s=r.length,l=new Uint8Array(s);for(let d=0;d<s;d++)l[d]=r.charCodeAt(d);const c=new Blob([l],{type:n});return new File([c],t,{type:n})}n.d(t,{g8:function(){return i},gu:function(){return a},pz:function(){return o}})},57369:function(e,t,n){n.d(t,{OL:function(){return i},fe:function(){return a},ht:function(){return o}});const o={faceshot:"SOFTBAKER_FACESHOT"},a=e=>localStorage.getItem(e),i=e=>{((e,t)=>{try{localStorage.setItem(e,t)}catch(n){try{localStorage.clear(),localStorage.setItem(e,t)}catch(n){}}})(o.faceshot,e)}},77181:function(e,t,n){n.d(t,{t:function(){return o}});const o=async(e,t)=>new Promise(((n,o)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=async o=>{var a;const i=new Image;i.src=null===(a=o.target)||void 0===a?void 0:a.result,i.onload=()=>{const o=document.createElement("canvas"),a=o.getContext("2d");o.width=i.width,o.height=i.height,a.drawImage(i,0,0);const r=a.getImageData(0,0,o.width,o.height).data.length/(o.width*o.height),s=t/r,l=Math.sqrt(s);let c,d;i.width>=i.height?(c=l,d=i.height*(l/i.width)):(d=l,c=i.width*(l/i.height)),o.width=c,o.height=d,a.drawImage(i,0,0,c,d),o.toBlob((t=>{if(t){const a=new File([t],e.name,{type:e.type});n({base64:o.toDataURL(),file:a})}}),e.type)}},a.onerror=e=>o(e)}))}}]);