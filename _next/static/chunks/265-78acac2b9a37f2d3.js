"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[265],{32033:function(e,t,n){n.d(t,{Z:function(){return T}});var i=n(85893),a=n(67294),r=n(57747),o=n(48783),s=n(34292),l=n(93717),d=n(15948),c=n(86201),u=n(75863),h=n(14132),p=n(36238),f=n(55154),g=n(53754),m=n(38118),v=n(94345),x=n(71293),b=n(85461),w=n(33471),y=n(73804);var k=e=>{let{delimiter:t,value:n,onChange:s,suggestions:l,onSuggestionSelected:d,...c}=e;const[u,h]=(0,a.useState)(n||""),[f,g]=(0,a.useState)([]),[m,v]=(0,a.useState)(!1);(0,a.useEffect)((()=>{h(n||"")}),[n]);return(0,i.jsxs)(r.xu,{w:"100%",overflowX:"hidden",children:[(0,i.jsx)(p.Z,{w:"100%",value:u,onChange:e=>{h(e);const n=e.lastIndexOf(t),i=e.slice(n+t.length);if(-1===n||!/^[a-zA-Z]*$/.test(i)&&0!=i.length)v(!1);else{let e;e=0==i.length?l:l.filter((e=>e.toLowerCase().startsWith(i.toLowerCase()))),g(e),v(e.length>0)}s&&s(e)},...c}),m&&(0,i.jsx)(o.g,{position:"absolute",zIndex:"1",w:"100%",boxShadow:"md",borderRadius:"md",height:"120px",width:"100%",overflowY:"auto",overflowX:"hidden",children:(0,i.jsx)(y.aV,{w:"100%",overflowX:"hidden",children:f.map(((e,n)=>(0,i.jsx)(y.HC,{overflowX:"hidden",p:"2",cursor:"pointer",_hover:{border:"1px solid",borderRadius:"3px"},onClick:()=>(e=>{const n=u.lastIndexOf(t),i=u.slice(0,n+t.length)+e;h(i),v(!1),d(e,n+t.length,i)})(e),children:(0,i.jsx)(x.x,{children:e})},n)))})})]})};var j=e=>{let{fields:t,field:n,images:o,submitButtonText:s,onSettingsUpdated:l}=e;const[d,c]=(0,a.useState)({}),[u,h]=(0,a.useState)({}),[g,m]=(0,a.useState)(null),[y,j]=(0,a.useState)(!1);(0,a.useEffect)((()=>{n&&c(n)}),[n]),(0,a.useEffect)((()=>{console.info("pasrsedSvg:settings",d)}),[d]);const[S,_]=(0,a.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.xu,{onClick:()=>{_(!0)},cursor:"pointer",children:(0,i.jsx)(f.rU2,{size:"1.5rem",color:"#38a169"})}),S?(0,i.jsxs)(v.Z,{title:"".concat(n.name||""," settings"),isOpen:!0,onClose:()=>{_(!1)},dontCloseOnOverlayClick:y,children:[(0,i.jsxs)(r.xu,{height:"50vh",pos:"relative",overflowY:"auto",px:"0.5rem",children:[(0,i.jsx)(x.x,{display:"none",children:n.type}),"gen"===n.type?(0,i.jsx)(k,{w:"100%",id:"gen",title:"Text Generation Code",mb:4,helperText:"".concat((0,w.VH)(n.placeholder||""),"."),info:"This is where you enter the code for the text generation: ".concat((0,w.VH)(n.placeholder||""),"."),type:p.Z.TYPES.textarea,value:null===d||void 0===d?void 0:d.code,onChange:e=>{e&&c({...d,code:e})},errorMessage:u.code,delimiter:"{",suggestions:Object.keys(t),onSuggestionSelected:(e,t,n)=>{n&&c({...d,code:n})}},"gen"):null,["image_upload"].includes(n.type)?(0,i.jsx)(p.Z,{w:"100%",id:"upload",title:"File Rule",mb:4,helperText:'Enter the rule of the file. e.g "For best result, upload a 300x300 image."',info:'This is where you enter the rule of the file. e.g "For best result, upload a 300x300 image."',type:p.Z.TYPES.text,value:null===d||void 0===d?void 0:d.ruleMessage,onChange:e=>{e&&c({...d,ruleMessage:e})},errorMessage:u.ruleMessage},"upload"):null,["text","textarea"].includes(n.type)?(0,i.jsx)(p.Z,{w:"100%",id:"placeholder",title:"Placeholder",mb:4,helperText:"Enter the text that will show in the text field as placholder.",info:"This is where you enter the text that will show in the text field as placholder.",type:p.Z.TYPES.text,value:null===d||void 0===d?void 0:d.placeholder,onChange:e=>{e&&c({...d,placeholder:e})},errorMessage:u.placeholder},"placeholder"):null,"gen"!==n.type?(0,i.jsx)(p.Z,{w:"100%",id:"helper_text",title:"Helper Text",mb:4,helperText:"Enter the text that will show below this field just like this.",info:"This is where you enter the text that will show below this field.",type:p.Z.TYPES.text,value:null===d||void 0===d?void 0:d.helperText,onChange:e=>{e&&c({...d,helperText:e})},errorMessage:u.helperText},"helper_text"):null,["qrcode","checkbox","gen"].includes(n.type)?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Z,{w:"100%",id:"info",title:"Info Text",mb:4,helperText:"Enter the text that will show when the user clicks the info icon on this field.",info:"This is where you enter the text that will show when the user clicks the info icon on this field just like this.",type:p.Z.TYPES.text,value:null===d||void 0===d?void 0:d.info,onChange:e=>{e&&c({...d,info:e})},errorMessage:u.info},"info"),(0,i.jsx)(p.Z,{w:"100%",id:"optional",title:"Make Optional",mb:4,helperText:"Enable this if you want this field to be optional.",type:p.Z.TYPES.checkbox,value:null===d||void 0===d?void 0:d.optional,onChange:e=>{e&&c({...d,optional:e})},errorMessage:u.optional},"optional")]})]}),(0,i.jsx)(r.xu,{mb:"1rem",children:(0,i.jsx)(b.Z,{status:"warning",mb:"1rem",onClick:()=>{y||(_(!1),l(d,null))},disabled:y,children:y?"Please wait...":s||"Submit Settings"})})]}):null]})},S=n(23596),_=n(10151);var T=e=>{let{created:t,showFieldsErrors:n,fields:v,images:x,masks:b,data:y,isFieldsEditMode:k,isDragable:T,onDragged:I,onFieldDataChange:O,onAllFieldsDataChange:C,fieldDataErrorMessage:E,onSetFieldDataErrorMessage:F}=e;const[N,Z]=(0,a.useState)(Object.values(v)),[P,A]=(0,a.useState)(!1);(0,a.useEffect)((()=>{Z(Object.values(v));const e={...y};for(const t of Object.values(v))"image_select"==t.type&&t.options&&!e[t.id]&&(e[t.id]=Object.keys(t.options)[0]);Object.keys(e).length>0&&JSON.stringify(e)!=JSON.stringify(y)&&C(e)}),[v,y]);const D=(e,t)=>(F({...E,[e]:null}),null);return N&&0!=N.length?(0,i.jsx)(r.xu,{as:d.Z5,onDragEnd:e=>{if(!e.destination||!I)return;const t=Array.from(N),[n]=t.splice(e.source.index,1);t.splice(e.destination.index,0,n);const i=t.reduce(((e,t,n)=>(e[t.id]={...t,index:n},e)),{});console.info("parsedSvg:updatedFields",i),I(i)},p:"0px !important",children:(0,i.jsx)(d.bK,{droppableId:"fields",children:e=>(0,i.jsxs)(o.g,{w:"100%",ref:e.innerRef,...e.droppableProps,children:[N.map(((e,a)=>(0,i.jsx)(d._l,{draggableId:e.id,index:a,isDragDisabled:!T,children:a=>{const o=(e=>{const a={key:e.id,id:e.id,disabled:t,title:"".concat(e.name||"").concat(e.optional?"(Optional)":""),helperText:e.helperText||"",info:e.info||"",placeholder:(0,w.VH)(e.placeholder||e.name||""),onChange:t=>{D(e.id),O(e.id,t)},errorMessage:n?E[e.id]:null,labelEndIcon:k?(0,i.jsx)(j,{fields:v,field:e,images:x,onSettingsUpdated:(t,n)=>{const i={...v,[e.id]:{...e,...t}},a=n?{...b||{},...n}:null;I&&I(i,a),console.info("pasrsedSvg:settings.updated",i,a)}}):null,message:"Drag and Drop image here",hoverMessage:"Drop the image here",ruleMessage:e.ruleMessage||"Make sure you're uploading an image file.",useImageText:"Use Image"};switch(e.type){case"image_upload":return(0,i.jsx)(c.Z,{width:"100%",...a,thumbnail:y[e.id]&&!(0,S.zI)(y[e.id])?(0,g.VT)("other_tools_data",y.id,e.id):y[e.id]&&(0,S.zI)(y[e.id])?y[e.id]:void 0,onChange:(t,n)=>{n&&(D(e.id),O(e.id,n))}});case"image_select":var r;const t=Object.values(e.options||{}).map((e=>({id:e.id,title:e.name,thumbnail:(0,S.gJ)(e.id,x,"_thumbnail"),image:{base:(0,S.gJ)(e.id,x,"_512"),md:(0,S.gJ)(e.id,x,"_728"),lg:(0,S.gJ)(e.id,x)}})))||[];return(0,i.jsx)(u.Z,{width:"100%",...a,thumbnail:(0,S.gJ)(y[e.id],x,"_thumbnail"),imageTitle:e.options?null===(r=e.options[y[e.id]])||void 0===r?void 0:r.name:"",onChange:t=>{const n=t;D(e.id,n.id),O(e.id,n.id)},options:t});case"text":case"textarea":return(0,i.jsx)(p.Z,{width:"100%",...a,value:y[e.id]||"",type:e.type});case"gen":return k?(0,i.jsx)(p.Z,{width:"100%",...a,type:p.Z.TYPES.viewonly,placeholder:"",helperText:(0,w.VH)(e.placeholder||""),value:(0,_.l)(e.code,y,S.oh)}):null;case"checkbox":case"qrcode":return(0,i.jsx)(p.Z,{...a,value:y[e.id]||""});case"sign":return(0,i.jsx)(h.Z,{width:"100%",thumbnail:y[e.id]&&!(0,S.zI)(y[e.id])?(0,g.VT)("other_tools_data",y.id,e.id):y[e.id]&&(0,S.zI)(y[e.id])?y[e.id]:void 0,...a});default:return null}})(e);return o?(0,i.jsx)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,style:{...a.draggableProps.style,width:"100%"},children:(0,i.jsxs)(s.U,{w:"100%",justifyContent:"center",alignItems:e.helperText?"center":"flex-end",mb:4,children:[(0,i.jsx)(r.xu,{width:{base:"100%",md:T?"90%":"100%"},children:o}),(0,i.jsxs)(l.k,{display:{base:"none",md:T?"flex":"none"},w:"40px",h:"40px",border:"1px dashed",pos:"relative",justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(r.xu,{as:f.ZTc,position:"absolute",mb:"25px",size:"10px"}),(0,i.jsx)(r.xu,{as:f.NWQ,position:"absolute",mt:"25px",size:"10px"})]})]})}):(0,i.jsx)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,style:{display:"none"}})}},e.id))),e.placeholder]})})}):(0,i.jsx)(m.Z,{message:"Loading template assets...",minH:"100px"})}},4623:function(e,t,n){n.d(t,{Z:function(){return F}});var i=n(85893),a=n(56691),r=n(96918),o=n(34292),s=n(71293),l=n(98303),d=n(57747),c=n(48783),u=n(55154),h=n(67294),p=n(79230),f=n(85431),g=n(94713),m=n(23596),v=n(36238),x=n(94345);const b=(e,t,n)=>new Promise(((i,a)=>{const r=document.createElement("canvas"),o=r.getContext("2d");if(!o)return a(new Error("Canvas not supported"));const s=new Image;s.src=e,s.onload=()=>{r.width=s.width,r.height=s.height,o.drawImage(s,0,0);const e=o.getImageData(0,0,r.width,r.height);t(e,n),o.putImageData(e,0,0),i(r.toDataURL())},s.onerror=a}));var w={Whitescale:{filter:e=>b(e,(e=>{const t=e.data;for(let n=0;n<t.length;n+=4)t[n]=255,t[n+1]=255,t[n+2]=255}))},Blackscale:{filter:e=>b(e,(e=>{const t=e.data;for(let n=0;n<t.length;n+=4)t[n]=0,t[n+1]=0,t[n+2]=0}))},Greyscale:{filter:e=>b(e,(e=>{const t=e.data;for(let n=0;n<t.length;n+=4){const e=(t[n]+t[n+1]+t[n+2])/3;t[n]=e,t[n+1]=e,t[n+2]=e}}))},Redscale:{filter:e=>b(e,(e=>{const t=e.data;for(let n=0;n<t.length;n+=4)t[n+1]=0,t[n+2]=0}))},Greenscale:{filter:e=>b(e,(e=>{const t=e.data;for(let n=0;n<t.length;n+=4)t[n]=0,t[n+2]=0}))},Bluescale:{filter:e=>b(e,(e=>{const t=e.data;for(let n=0;n<t.length;n+=4)t[n]=0,t[n+1]=0}))},Guassianblur:{filter:(e,t)=>b(e,((e,t)=>{const n=(null===t||void 0===t?void 0:t.radius)&&!isNaN(t.radius)?parseFloat(t.radius):5,i=e.data,a=e.width,r=e.height,o=(e,t)=>4*(t*a+e),s=new Uint8ClampedArray(i);for(let l=0;l<r;l++)for(let e=0;e<a;e++){let t=0,d=0,c=0,u=0,h=0;for(let i=-n;i<=n;i++)for(let p=-n;p<=n;p++){const n=e+p,f=l+i;if(n>=0&&n<a&&f>=0&&f<r){const e=o(n,f);t+=s[e],d+=s[e+1],c+=s[e+2],u+=s[e+3],h++}}const p=o(e,l);i[p]=t/h,i[p+1]=d/h,i[p+2]=c/h,i[p+3]=u/h}})),render:e=>{let{filterArgs:t,setFilterArgs:n}=e;return(0,i.jsx)(d.xu,{children:(0,i.jsx)(v.Z,{w:"100%",id:"filter_arg",title:"Blur radius",mb:4,helperText:"Enter the blur radius.",info:"This is where you enter the blur radius.",type:v.Z.TYPES.text,value:null===t||void 0===t?void 0:t.radius,onChange:e=>{n({...t,radius:(isNaN(e),e)})}},"filter_arg")})}},Rotate:{filter:(e,t)=>new Promise(((t,n)=>{t(e)})),render:null}},y=n(85461),k=n(53754),j=n(10151),S=n(41160);const _=e=>{let{children:t}=e;return(0,i.jsxs)(o.U,{justifyContent:"flex-start",alignItems:"center",m:"0px !important",mb:"1rem !important",children:[(0,i.jsx)(u.gJy,{color:"#e53e3e"}),"\xa0",(0,i.jsx)(s.x,{as:"div",color:"#e53e3e",children:t})]})},T=e=>{const[t,n]=e.split(".");return"".concat(t,".").concat((n||"").split("_")[0].trim()).trim()};function I(e,t,n,i,a){const r=t+i/2,o=n+a/2;return"rotate(".concat(e," ").concat(r," ").concat(o,")")}const O=(e,t,n,i,a,r,o,s,l,d)=>{"image"!=e.children[n].name||(null===i||void 0===i?void 0:i.type)||(e.children[n].attributes["xlink:href"]=(0,m.gJ)(t,a,l?"_".concat(l):null));if("defs"!=e.children[n].name&&(e.children[n].attributes["data-svg-id"]=e.children[n].attributes.id),"defs"==e.children[n].name){e.children[n];const t=[];t.push({name:"style",type:"element",value:"",attributes:{},children:[{name:"",type:"text",value:"#softbaker-slider-handle, #softbaker-button-background, #softbaker-button-text, #softbaker-slider-track { cursor: pointer !important;}",attributes:{},children:[]}]}),e.children[n].children=t.concat(e.children[n].children);const i={ocrb10:{name:"ocrb10",srcData:"TEST_FONT"}},a=[];for(const e of Object.values(i))a.push({name:"style",type:"element",value:"",attributes:{},children:[{name:"",type:"text",value:'\n      @font-face {\n        font-family: "'.concat(e.name,'";\n        src: url("data:application/octet-stream;base64,').concat(e.srcData.split(",")[1],'") format(ttf);\n      }'),attributes:{},children:[]}]});a.length>0&&(e.children[n].children=a.concat(e.children[n].children))}else if("image_select"==(null===i||void 0===i?void 0:i.type)){if(r[i.id]){const o=r[i.id];e.children[n].attributes["xlink:href"]=(0,m.gJ)(o,a,l?"_".concat(l):null),e.children[n].attributes["data-click-field-id"]=i.id,e.children[n].attributes["data-click-element-id"]=t}}else if(["image_upload","sign"].includes(null===i||void 0===i?void 0:i.type))a[t]&&(e.children[n].attributes["xlink:href"]=a[t],e.children[n].attributes["data-click-field-id"]=i.id,e.children[n].attributes["data-click-element-id"]=t,(()=>{var t,i,a;if(d&&"Rotate"==d.filter_id&&void 0!=(null===(t=d.args)||void 0===t?void 0:t.degree)&&null!=(null===(i=d.args)||void 0===i?void 0:i.degree)&&!isNaN(null===(a=d.args)||void 0===a?void 0:a.degree)){const t=e.children[n],i=parseFloat(t.attributes.x),a=parseFloat(t.attributes.y),r=parseFloat(t.attributes.width),o=parseFloat(t.attributes.height);e.children[n].attributes.transform=I(d.args.degree,i,a,r,o)}})());else if("checkbox"==(null===i||void 0===i?void 0:i.type))a[t]&&"image"==e.children[n].name&&(e.children[n].attributes["xlink:href"]=(0,m.gJ)(t,a,l?"_".concat(l):null));else if("qrcode"==(null===i||void 0===i?void 0:i.type))a[t]&&"image"==e.children[n].name&&(e.children[n].attributes["xlink:href"]=(0,m.gJ)(t,a,l?"_".concat(l):null));else if(["text","textarea"].includes(null===i||void 0===i?void 0:i.type)){for(var c=e.children[n].children[0];c.children&&c.children.length>0;)c,c=c.children[0];r[i.id]&&(c.value=r[i.id])}else if(["gen"].includes(null===i||void 0===i?void 0:i.type)){for(c=e.children[n].children[0];c.children&&c.children.length>0;)c,c=c.children[0];c.value=(0,j.l)(i.code,r,m.oh)}},C=(e,t,n,i,a)=>new Promise((async(n,r)=>{((e,t,n)=>new Promise((async(i,a)=>{try{const a=Object.entries(e).map((async e=>{let[i,a]=e;var r,o,s=T(i);let l;l=["image_upload","sign"].includes(null===(r=n.fields[s])||void 0===r?void 0:r.type)?t[s]&&(0,m.zI)(t[s])?t[s]:(0,k.VT)("other_tools_data",t.id,s):await(0,f.tY)(a);const d="image_select"==(null===(o=n.fields[s])||void 0===o?void 0:o.type)?s:i;return s.startsWith("Logo.upload"),l&&!(0,k.N4)(l)&&(0,m.zI)(l)&&n.masks&&n.masks[d]&&(l=await w[n.masks[d].filter_id].filter(l,n.masks[d].args)),[i,l]})),r=await Promise.all(a);i(Object.fromEntries(r))}catch(r){a(r)}})))(t.images,e,t).then((o=>{(0,p.parse)(t.svg).then((async s=>{const l=Object.keys(t.fields),d=parseInt("".concat(s.attributes.width||0)),c=parseInt("".concat(s.attributes.height||0));let u=0,h=0,v=0,x=0;for(var b=0;b<s.children.length;b++){const n=s.children[b],{name:r,type:d,selectIndex:c,typeAndSelectIndex:p}=(0,g.py)(n.attributes.id),f="".concat(r,".").concat(d);if(l.includes(f)||"defs"==n.name||"image"==n.name){var w,y=T(n.attributes.id);const r="image_select"==d?y:n.attributes.id;O(s,n.attributes.id,b,t.fields[f],o,e,0,0,i,(a||{})[r]||((null===t||void 0===t?void 0:t.masks)||{})[r]),"Rotate"==(null===(w=(a||{})[f])||void 0===w?void 0:w.filter_id)&&(u=parseFloat(n.attributes.width),h=parseFloat(n.attributes.height),v=parseFloat(n.attributes.x),x=parseFloat(n.attributes.y))}}if(a){var k;const e=Object.keys(a)[0],t=a[e],n="#dd6b20",i={name:"rect",type:"element",value:"",attributes:{id:"softbaker-slider-track",x:v+"",y:x+h+10+"",width:u+"",height:"10",fill:"#2a2a2a"},children:[]},r={name:"circle",type:"element",value:"",attributes:{id:"softbaker-slider-handle",cx:v+((null===t||void 0===t||null===(k=t.args)||void 0===k?void 0:k.degree)||0)*parseFloat(i.attributes.width)/360+"",cy:parseFloat(i.attributes.y)+parseFloat(i.attributes.height)/2+"",r:parseFloat(i.attributes.height)+"",fill:n},children:[]},o={name:"rect",type:"element",value:"",attributes:{id:"softbaker-button-background",x:v+"",y:parseFloat(i.attributes.y)+parseFloat(i.attributes.height)+10+"",width:"40",height:"20",rx:"10",ry:"10",fill:n},children:[]},l={name:"text",type:"element",value:"",attributes:{id:"softbaker-button-text",x:v+parseFloat(o.attributes.width)/2+"",y:parseFloat(o.attributes.y)+parseFloat(o.attributes.height)/2+5+"","font-size":"14","text-anchor":"middle",fill:"#FFFFFF"},children:[{name:"",type:"text",value:"\u2714",parent:null,attributes:{},children:[]}]};s.children=s.children.concat([i,r,o,l])}e.is_freemium?(0,f.wL)("/res/watermark.png",d,c,.5).then((e=>{s.children.push({name:"image",type:"element",value:"",attributes:{id:"watermark-"+(0,m.Bu)(8),width:d+"",height:c+"","xlink:href":e},children:[]}),n((0,p.stringify)(s))})).catch((e=>{r(e)})):n((0,p.stringify)(s))})).catch((e=>{r(e)}))})).catch((e=>{r(e)}))})),E=e=>{let{isLoading:t,data:n,templateData:s,showWatermark:u,width:p,onFiltersUpdated:f}=e;const g=(0,h.useRef)(null),m=(0,l.S)(p||{base:0}),[b,k]=(0,h.useState)(),[j,T]=(0,h.useState)(),[O,E]=(0,h.useState)(),[F,N]=(0,h.useState)(null);(0,h.useEffect)((()=>{n&&s&&(T(!0),E(void 0),C(n,s,0,m,F).then((e=>{T(!1),k(e)})).catch((e=>{T(!1),E(e.message)})))}),[n,s,u,m,F]);const[Z,P]=(0,h.useState)(),[A,D]=(0,h.useState)(),[z,M]=(0,h.useState)(),[U,L]=(0,h.useState)(),[R,B]=(0,h.useState)(),J=e=>{D(null),P(null),L(null),B(null),M(null)},W=e=>{const t=e.target;if(t)if(t.hasAttribute("data-click-element-id")&&!F){((e,t,n)=>{P(t),D(e),M(n),e&&(null===s||void 0===s?void 0:s.masks)&&(null===s||void 0===s?void 0:s.masks[e])&&(B(s.masks[e].args),L(s.masks[e].filter_id))})(t.getAttribute("data-click-element-id"),t.getAttribute("data-click-field-id"),t.getAttribute("xlink:href"))}else if(["softbaker-button-background","softbaker-button-text"].includes(t.getAttribute("id"))&&f&&F){const e=document.querySelector("[data-svg-id='".concat(Object.keys(F)[0],"']"));if(!e)return;const t=e.getAttribute("data-degree");if(void 0!=t){var n,i,a;const e=parseFloat(t),r={...(null===s||void 0===s?void 0:s.masks)||{},...F||{},[Object.keys(F)[0]]:{filter_id:(null===(n=Object.values(F)[0])||void 0===n?void 0:n.filter_id)||"",args:{...(null===(i=Object.values(F)[0])||void 0===i?void 0:i.args)?null===(a=Object.values(F)[0])||void 0===a?void 0:a.args:{},degree:e}}};f(r)}N(null)}},Y=e=>{const t=e.target;"softbaker-slider-handle"===t.getAttribute("id")&&t.setAttribute("data-rotating","1")},V=()=>{const e=document.getElementById("softbaker-slider-handle");e&&e.setAttribute("data-rotating","0")},H=e=>{const t=document.getElementById("softbaker-slider-track");if(t&&F&&"softbaker-slider-handle"===e.target.getAttribute("id")){if(!("1"===e.target.getAttribute("data-rotating")))return;const n=t.getBoundingClientRect(),i=t.getBBox(),a=Math.min(Math.max(e.clientX-n.left,0),n.width);e.target.setAttribute("cx","".concat(i.x+a));const r=a/n.width*360;if(Object.keys(F)[0]){const e=document.querySelector("[data-svg-id='".concat(Object.keys(F)[0],"']"));if(!e)return;console.info("parsedSvg.degree.3",r);const t=I(r,parseFloat(e.getAttribute("x")||0),parseFloat(e.getAttribute("y")||0),parseFloat(e.getAttribute("width")||0),parseFloat(e.getAttribute("height")||0));e.setAttribute("transform",t),e.setAttribute("data-degree","".concat(r)),console.info("parsedSvg.degree.5",t)}}};return(0,h.useEffect)((()=>{const e=g.current;return e&&(e.addEventListener("click",W),e.addEventListener("mousedown",Y),e.addEventListener("mouseup",V),e.addEventListener("mousemove",H)),()=>{e&&(e.removeEventListener("click",W),e.removeEventListener("mousedown",Y),e.removeEventListener("mouseup",V),e.removeEventListener("mousemove",H))}}),[b,s,n,F]),(0,i.jsx)(S.Z,{disableDrag:null!=F,width:"100%",message:"Drag around to view the whole tool",height:{base:500,md:728,lg:1024},children:(0,i.jsxs)(d.xu,{id:"AirlineDocWrapper",pos:"relative",w:"100%",children:[b?(0,i.jsx)(d.xu,{ref:g,w:"100%",h:"100%",dangerouslySetInnerHTML:{__html:b}}):null,F?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.U,{pos:"absolute",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1",bg:"#dfdfdf",opacity:"0.7",justifyContent:"flex-start",pl:{base:"0px",md:"0px"},alignItems:"center",display:j||t?"flex":"none",w:"100%",h:"100%",children:(0,i.jsx)(a.Z,{type:a.Z.TYPES.grid,color:(0,r.Z)("colorAccent.light","colorAccent.dark"),size:"70px"})}),(0,i.jsx)(c.g,{pos:"absolute",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1",bg:"#fff",opacity:"0.7",justifyContent:"center",pl:"1rem",alignItems:"flex-start",display:O?"flex":"none",w:"100%",h:"100%",children:O?(0,i.jsx)(_,{children:(q=O,(null===q||void 0===q?void 0:q.message)?q.message:q)}):null})]}),A&&f?(0,i.jsxs)(x.Z,{title:"".concat(A||""," filter"),isOpen:!0,onClose:()=>{J()},dontCloseOnOverlayClick:!0,children:[(0,i.jsx)(v.Z,{w:"100%",mb:4,id:"filter",title:"Select Filter",helperText:"Select a filter you want applied on the user's image choice.",info:"This is the status you select a filter to apply to the user's image choice.",type:v.Z.TYPES.select,value:U||"",options:["none",...Object.keys(w)],onOptionValue:e=>e,onOptionName:e=>"none"===e?"--No Filter--":e,onChange:e=>{if("none"===e)L(null),B(null);else if("Rotate"===e){var t,n;N({[A]:{filter_id:e,args:{degree:(null===(t=((null===s||void 0===s?void 0:s.masks)||{})[A])||void 0===t||null===(n=t.args)||void 0===n?void 0:n.degree)||0}}}),J()}else L(e),B(null)}},"filter"),U&&w[U].render?w[U].render({filterArgs:R,setFilterArgs:B,filterImage:z}):null,(0,i.jsx)(d.xu,{mb:"1rem",children:(0,i.jsx)(y.Z,{status:"warning",mb:"1rem",onClick:()=>{var e,t;if("Rotate"===U)N({[A]:{filter_id:U,args:{degree:(null===(e=((null===s||void 0===s?void 0:s.masks)||{})[A])||void 0===e||null===(t=e.args)||void 0===t?void 0:t.degree)||0}}}),J();else if(f){const e={...(null===s||void 0===s?void 0:s.masks)||{},[A]:U?{filter_id:U,args:R}:null};f(e)}J()},children:"Rotate"===U?"Configure Filter":"Apply Filter"})})]}):null]})});var q};E.getSvg=C;var F=E},3683:function(e,t,n){var i=n(67294),a=n(5121),r=n(23596),o=n(94713),s=n(53754),l=n(16344);t.Z=(e,t)=>{const{user:n}=(0,l.P)(),[d,c]=(0,i.useState)(),[u,h]=(0,i.useState)(),[p,f]=(0,i.useState)({}),[g,m]=(0,i.useState)(!1),[v,x]=(0,i.useState)(!1),[b,w]=(0,i.useState)(!1),[y,k]=(0,i.useState)(),[j,S]=(0,i.useState)(),[_,T]=(0,i.useState)(),[I,O]=(0,i.useState)(),[C,E]=(0,i.useState)(),[F,N]=(0,i.useState)(),Z=e=>{if(!e)return null;var t=e.split("-")[1];return t?t.split(".")[0].trim():null},P=e=>{if(1==Object.keys(e).length)return Object.keys(e)[0];for(const t of Object.values(e))if(t.is_default)return t.id;return Object.keys(e)[0]};(0,i.useEffect)((()=>{const t=Z(e);e&&e!=d&&t?(c(e),m(!0),k(null),a.Z.get(e).then((e=>{h(t),f((0,r.Dn)(e.data)),m(!1)})).catch((e=>{k(e.message),m(!1)}))):e||(c(null),m(!1),k(null),h(null),f({}),T(null),O(null),E(null),N(null))}),[e]),(0,i.useEffect)((()=>{!t&&p&&Object.keys(p).length>0&&!_&&A(P(p))}),[p]);const A=e=>{const t=p[e];t&&!(0,s.N4)(t.data_url)&&(x(!0),S(null),a.Z.get(t.data_url).then((e=>{E({...t}),N({...e.data}),T({...t}),O({...e.data}),x(!1)})).catch((e=>{S(e.message),x(!1)})))},D=(e,t)=>{E(e),N(t)};return{templatesLoading:g,templatesError:y,selectedTemplateLoading:v,selectedTemplateError:j,parsingTemplate:b,templates:p,selectedTemplate:_,selectedTemplateData:I,workingTemplate:C,workingTemplateData:F,setAsDefaulTemplate:e=>{if(C&&(E({...C,is_default:e}),e&&Object.keys(p).length>1)){for(const e of Object.keys(p))e!=C.id&&(p[e].is_default=!1);f(p)}},setWorkingTemplate:E,setWorkingTemplateData:N,selectTemplate:A,parseTemplateSvg:(e,t)=>(w(!0),new Promise(((n,i)=>{(0,o.xz)(e).then((e=>{if(console.info("parsedSvg:result.ok!!!: ",e),e){var a=_,o=I;t&&(a=null,o=null),(0,r.s7)(e,o).then((e=>{const t={id:(null===a||void 0===a?void 0:a.id)||(0,r.Bu)(8),name:(null===a||void 0===a?void 0:a.name)||"",logo:(null===a||void 0===a?void 0:a.logo)||"",data_url:(null===a||void 0===a?void 0:a.data_url)||"",is_default:(null===a||void 0===a?void 0:a.is_default)||!1};E(t),N(e),w(!1),n({template:t,templateData:e})})).catch((e=>{w(!1),i(e)}))}else w(!1),n(null)})).catch((e=>{w(!1),i(e)}))}))),saveTemplate:()=>new Promise(((e,t)=>n?C&&F?void(0,r.t9)(n,u||(0,r.Bu)(8),p,C,F,_,I,d,D).then((t=>{if(t){c(t);const e=Z(t);h(e),f({...p,[C.id]:C}),T(C),O(F),E(C),N(F)}e(t)})).catch(t):t(new Error("No template provided yet.")):t(new Error("Please sign in")))),deleteTemplate:e=>{Object.keys(p).includes(e)||(null===C||void 0===C?void 0:C.id)!=e||A(P(p))},getDefaultTemplateId:P}}},85431:function(e,t,n){n.d(t,{_P:function(){return s},pu:function(){return r},sH:function(){return l},tY:function(){return a},wL:function(){return d},zD:function(){return o}});var i=n(23596);const a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((async(n,a)=>{if(!(0,i.Ri)(e))return n(e);try{const t=await fetch(e),i=await t.blob(),r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=a,r.readAsDataURL(i)}catch(r){if(console.info("parsedSvg:masks.fe",r.message),t)return n(null);a(r)}}))};function r(e,t){return console.info("parsedSvg:base64A: ",e.substring(0,32)),console.info("parsedSvg:base64B: ",t.substring(0,32)),e===t.split(",")[1]}function o(e){return function(e,t){try{const n=new URL(e);return n.searchParams.delete(t),n.toString()}catch(n){return console.error("Invalid URL:",n),e}}(e,"updates")}function s(e){const t=new URL(e),n=t.searchParams.get("updates"),i="".concat(n?parseInt(n,10)+1:1);return t.searchParams.set("updates",i),t.toString()}function l(e,t){return new Promise((async(n,i)=>{try{for(const n in e)if(e.hasOwnProperty(n)&&t.hasOwnProperty(n)){const i=e[n],o=t[n];if(i.startsWith("http")&&o.startsWith("data:image")){const e=await a(i,!0);e&&r(e,o)&&(t[n]=i)}}n(t)}catch(o){i(o)}}))}function d(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new Promise(((a,r)=>{const o=new Image;o.onload=()=>{const e=document.createElement("canvas"),s=e.getContext("2d");if(!s)return r("No canvas context");e.width=t,e.height=n,s.globalAlpha=i;for(let i=0;i<n;i+=o.height)for(let e=0;e<t;e+=o.width)s.drawImage(o,e,i,o.width,o.height);a(e.toDataURL())},o.onerror=r,o.src=e}))}},94713:function(e,t,n){n.d(t,{xz:function(){return h},mA:function(){return c},py:function(){return d}});var i=n(79230),a=n(23596);async function r(e,t){return new Promise(((n,i)=>{const a=new Image;a.onload=()=>{const e=a.width/a.height,r=t/e,o=document.createElement("canvas");o.width=t,o.height=r;const s=o.getContext("2d");if(s){s.drawImage(a,0,0,t,r);const e=o.toDataURL("image/png");n(e)}else i(new Error("Failed to get canvas context"))},a.onerror=e=>{i(new Error("Failed to load image: ".concat(e)))},a.src=e}))}var o=n(53754),s=n(77181);const l=e=>e.replace(/_/g," ").split("@")[0],d=e=>{const[t,n]=e.split(".");if(!n)return{name:t};const[i,a]=n.split("_");return{name:t,type:i,selectIndex:a,typeAndSelectIndex:n}},c=e=>{const[t,n]=e.split("@");return{name:t,directive:n}},u=(e,t,n)=>{const i=n.name,{name:r,type:s,selectIndex:c,typeAndSelectIndex:u}=d(t);if(!u||!s)return{field:null,updatedFields:e};const h={};switch(s){case"select":var p;h.id="".concat(r,".").concat(s),h.name=l(r),h.type="".concat(i,"_").concat(s);const d={name:"".concat(l(r)," ").concat(c),id:t,index:c||0,type:i};h.options=(0,a.VS)({...(null===(p=e[h.id])||void 0===p?void 0:p.options)||{},[d.id]:d});break;case"upload":h.id="".concat(r,".").concat(s),h.name=l(r),h.type="".concat(i,"_").concat(s);break;case"text":case"textarea":case"gen":h.id="".concat(r,".").concat(s),h.name=l(r),h.type=s,h.placeholder=(e=>{for(var t=e.children[0];t.children&&t.children.length>0;)t=t.children[0];const n=t.value;return(0,o.N4)(n)?null:n})(n)||h.name;break;default:h.id="".concat(r,".").concat(s),h.name=l(r),h.type=s}return Object.keys(h).length>0&&(e[h.id]=h),{field:h,updatedFields:e}},h=e=>new Promise((async(t,n)=>{try{e?(0,i.parse)((0,a.rY)(e)).then((async e=>{const o={};var l=[],h=[];const p=[];var f={};const g=[],m=[],v={};var x,b;for(const t of e.children){const e=(t.attributes["data-name"]||t.attributes.id||(0,a.Bu)(8)).replace(/^_+|_+$/g,"");t.attributes.id=e;const{field:n,updatedFields:i}=u(f,e,t);if(f=i,"image"==t.name){if((null===n||void 0===n?void 0:n.type)&&["image_upload","sign"].includes((null===n||void 0===n?void 0:n.type)||"")){const n=await(0,s.j)(t.attributes["xlink:href"]);0!=n&&(v[e]={filter_id:"Rotate",args:{degree:n}}),o[e]=""}else if(l.includes(t.attributes["xlink:href"])){const n=l.indexOf(t.attributes["xlink:href"]);o[e]=h[n]}else o[e]=t.attributes["xlink:href"],l.push(t.attributes["xlink:href"]),h.push(e);t.attributes["xlink:href"]="",n&&"image_select"==n.type&&p.push(e)}if(n)if("image_select"==(null===n||void 0===n?void 0:n.type))t.attributes.id=n.id,m.includes(n.type)||(g.push(t),m.push(n.type));else{const{name:i}=d(e),{directive:a}=c(i);a&&"name"==a?x=e:a&&"desc"==a&&(b=e),g.push(t),m.push(n.type)}else g.push(t)}if(!x||!b){let e;return e=x||b?x?"Make sure that at least @desc is declared on a text field. @small is optional.":"Make sure that at least @name is declared on a text field. @small is optional.":"Make sure that at least @name and @desc is declared on some text fields. @small is optional.",n(new Error(e))}l=[],h=[],e.children=g;const w=e.attributes.width||"2",y=await(0,a.WN)(o,(async(e,t)=>{const{width:n}=await(i=t,new Promise(((e,t)=>{const n=new Image;n.onload=()=>{e({width:n.width,height:n.height})},n.onerror=e=>{t(new Error("Failed to load image: ".concat(e)))},n.src=i})));var i,a={};return n==parseInt(w)&&(a={["".concat(e)]:await r(t,1024),["".concat(e,"_728")]:await r(t,728),["".concat(e,"_512")]:await r(t,512)}),p.includes(e)&&(a["".concat(e,"_thumbnail")]=await r(t,70)),Object.keys(a).length>0?a:null}));console.info("svg:svg ",(0,i.stringify)(e)),t({svg:(0,i.stringify)(e),fields:f,images:y,masks:v})})).catch((e=>{n(e)})):t(null)}catch(o){n(o)}}))},23596:function(e,t,n){n.d(t,{Bu:function(){return d},Dn:function(){return f},Ri:function(){return v},VS:function(){return p},WN:function(){return c},gJ:function(){return b},oh:function(){return y},rY:function(){return l},s7:function(){return m},t9:function(){return w},zI:function(){return x}});var i=n(25723),a=n(53754),r=n(85431),o=n(94713),s=n(21876).Buffer;function l(e){const t="data:image/svg+xml;base64,";e.startsWith(t)&&(e=e.slice(t.length));const n=function(e){if("undefined"!==typeof s)return s.from(e,"base64").toString("binary");if("function"===typeof window.atob)return window.atob(e);throw new Error("Base64 decoding not supported in this environment")}(e),i=new Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);const a=new Uint8Array(i);return new TextDecoder("utf-8").decode(a)}function d(e){const t="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let i=0;i<e;i++){const e=Math.floor(Math.random()*t.length);n+=t.charAt(e)}return n}function c(e,t){return new Promise((async(n,i)=>{try{const i={...e};for(const[n,a]of Object.entries(e))if(a&&x(a)){const e=await t(n,a);e&&Object.assign(i,e)}n(i)}catch(a){i(a)}}))}function u(e,t){const[n,i]=t.split(","),a=n.match(/data:(.*?);base64/);if(!a)throw new Error("Invalid base64 data format");const r=a[1],o=atob(i),s=o.length,l=new Uint8Array(s);for(let u=0;u<s;u++)l[u]=o.charCodeAt(u);const d=new Blob([l],{type:r}),c="".concat(e,".").concat(r.split("/")[1]);return{id:e,image:new File([d],c,{type:r})}}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data.json";const n=JSON.stringify(e,null,2),i=new Blob([n],{type:"application/json"}),a=new File([i],t,{type:"application/json"});return a}function p(e){const t=Object.entries(e);t.sort(((e,t)=>{let[,n]=e,[,i]=t;const a=(n.index||"").toString(),r=(i.index||"").toString();return a.localeCompare(r)}));const n={};for(const[i,a]of t)n[i]=a;return n}const f=e=>{const t=Object.entries(e);t.sort(((e,t)=>{const n=e[1].name.toUpperCase(),i=t[1].name.toUpperCase();return n<i?-1:n>i?1:0}));const n={};return t.forEach((e=>{let[t,i]=e;n[t]=i})),n};function g(e,t){return v(e)&&(0,r.zD)(e).toLowerCase()===(0,r.zD)(t).toLowerCase()}const m=(e,t)=>new Promise((async(n,i)=>{if(!t)return n(e);const a={};a.svg=e.svg;const o=[];for(const[r,s]of Object.entries(t.fields)){const t=e.fields[r];if(t){if(t.type!=s.type)o.push("The ".concat(s.type.split("_").join(" "),' field, "').concat(s.name,'" is misrepresented as "').concat(t.type.split("_").join(" "),'" in the new template.'));else if(s.options&&!(null===t||void 0===t?void 0:t.options))o.push("The ".concat(s.type.split("_").join(" "),' field, "').concat(s.name,'" is missing options in the new template.'));else if(s.options&&t.options)for(const e of Object.values(s.options))t.options[e.id]?t.options[e.id].type!=e.type&&o.push("The ".concat(s.type.split("_").join(" ")," ").concat(s.name,' option, "').concat(e.name,'" is misrepresented as "').concat(t.options[e.id].type.split("_").join(" "),'" in the new template.')):o.push("The ".concat(s.type.split("_").join(" ")," ").concat(s.name,' option, "').concat(e.name,'" is missing in the new template.'))}else o.push("The ".concat(s.type.split("_").join(" "),' field, "').concat(s.name,'" is missing in the new template.'))}if(Object.keys(t.images||{}).length>0&&0==Object.keys(e.images||{}).length)o.push("Images are missing in missing in the new template.");else if(Object.keys(t.images||{}).length>0)for(const r of Object.keys(t.images))e.images[r]||r.includes(".select")||o.push("The image with the id, ".concat(r," is missing in the new template."));a.fields={...t.fields,...e.fields};for(const[e,t]of Object.entries(a.fields))t.options&&(a.fields[e].options=p(t.options));if(a.images=await(0,r.sH)(t.images,{...t.images,...e.images}),o.length>0)return i(new Error(o.join("\n")));n(a)})),v=e=>e.startsWith("http"),x=e=>e.startsWith("data:image")||e.startsWith("data:img"),b=(e,t,n)=>{var i=t[e];return!i||v(i)||x(i)?i&&(i=t["".concat(e).concat(n||"")]):i=t["".concat(t[e]).concat(n||"")],!i&&n&&(i=t[e]),i},w=(e,t,n,o,s,l,d,c,p)=>new Promise((async(f,m)=>{try{const _=[];if(o.id||_.push("ID is missing in the template"),o.name||_.push("Please provide the template's name"),o.logo||_.push("Please provide the template's logo"),_.length>0)return m(new Error(_.join("\n")));const T=o.id;if(console.info("parsedSvg:base64BB:oldTemplate?.logo ",null===l||void 0===l?void 0:l.logo),console.info("parsedSvg:base64BB:template.logo ",o.logo),console.info("parsedSvg:base64BB:isImageDataUrl ",x(o.logo)),(null===l||void 0===l?void 0:l.logo)&&v(l.logo)&&x(o.logo)){const e=l.logo,t=await(0,r.tY)(e,!0);console.info("parsedSvg:base64BB:2 ",t?t.substring(0,32):"NULL"),t&&(0,r.pu)(t,o.logo)&&(o.logo=l.logo,console.info("parsedSvg:oldTemplate.logo ",l.logo))}const I=[];for(const[e,n]of Object.entries(s.images))if(x(n)){const{image:a}=u(e,n);I.push({id:e,file:a,fileName:"templates-".concat(t,"-").concat(T,"-").concat(e,"-image.").concat((0,i.t)(a.name).ext),dir:"templates"})}const O="templates-".concat(t,"-").concat(T,"-logo");if(x(o.logo)){const e=u(O,o.logo);I.push({id:O,file:e.image,fileName:"".concat(O,".").concat((0,i.t)(e.image.name).ext),dir:"templates"})}const C=await(0,i.d)(e,I,"https://r2.softbaker.com/");console.info("parsedSvg:imagesUploadResults",C,I);const E={};var w=null,y=null;C.forEach((e=>{(0,a.N4)(e.error)||(y=new Error(e.error)),e.id!=O?E[e.id]=e.url:w=e.url}));for(const[e,t]of Object.entries(E))d&&b(e,d.images)&&g(b(e,d.images),t)?s.images[e]=(0,r._P)(b(e,d.images)):s.images[e]=t;if(w&&((null===l||void 0===l?void 0:l.logo)&&g(l.logo,w)?o.logo=(0,r._P)(l.logo):o.logo=w),p&&p(o,s),y)return m(y);var k=null;if(s.svg!=(null===d||void 0===d?void 0:d.svg)||JSON.stringify(s.fields)!=JSON.stringify((null===d||void 0===d?void 0:d.fields)||{})||JSON.stringify(s.images)!=JSON.stringify((null===d||void 0===d?void 0:d.images)||{})||JSON.stringify(s.masks)!=JSON.stringify((null===d||void 0===d?void 0:d.masks)||{})){const n=h(s),r="templates-".concat(t,"-").concat(T,"-data");if(k=await(0,i.d)(e,[{id:r,file:n,fileName:"".concat(r,".").concat((0,i.t)(n.name).ext),dir:"templates"}],"https://r2.softbaker.com/"),console.info("parsedSvg:uploadedData",k),!(0,a.N4)(k[0].error))return m(new Error(k[0].error))}var j=null;if(o.name!==(null===l||void 0===l?void 0:l.name)||o.logo!==(null===l||void 0===l?void 0:l.logo)||o.is_default!==(null===l||void 0===l?void 0:l.is_default)||k){k&&((null===l||void 0===l?void 0:l.data_url)&&g(l.data_url,k[0].url)?o.data_url=(0,r._P)(l.data_url):o.data_url=k[0].url,p&&p(o,s));const d=h({...n,[T]:o}),c="templates-".concat(t);if(j=await(0,i.d)(e,[{id:c,file:d,fileName:"".concat(c,".").concat((0,i.t)(d.name).ext),dir:"templates"}],"https://r2.softbaker.com/"),console.info("parsedSvg:uploadedTemplates",j[0].url,j),!(0,a.N4)(j[0].error))return m(new Error(j[0].error))}var S=j?j[0].url:null;c&&S&&g(c,S)&&(S=(0,r._P)(c)),f(S)}catch(_){m(_)}})),y=e=>{const{type:t}=(0,o.py)(e);return!(!t||!["text","textarea"].includes(t))}},75863:function(e,t,n){var i=n(85893),a=n(51857),r=n.n(a),o=n(34292),s=n(57747),l=n(71293),d=n(85970),c=n(5418),u=n(6089),h=n(67294),p=n(94345),f=n(53754),g=n(49626);const m=e=>{let{id:t,link:n,downloadImage:a,title:r,image:d,thumbnail:c,...u}=e;return(0,i.jsxs)(o.U,{cursor:"pointer",justifyContent:"flex-start",alignItems:"flex-end",mb:4,...u,children:[(0,i.jsx)(s.xu,{as:"image",w:"40px",h:"40px",backgroundColor:"#dfdfdf",style:{backgroundImage:"url(".concat(c,")")},backgroundRepeat:"no-repeat",backgroundSize:"cover"}),(0,i.jsx)(l.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:r})]})};t.Z=e=>{let{title:t,helperText:n,info:a,textTransform:v,labelEndIcon:x,image:b,thumbnail:w,imageTitle:y,options:k,onChange:j,disabled:S,..._}=e;const[T,I]=(0,h.useState)(!1);return(0,i.jsxs)(s.xu,{..._,children:[(0,i.jsxs)(d.NI,{opacity:S?.4:1,cursor:S?"not-allowed":"pointer",children:[(0,i.jsxs)(o.U,{w:"100%",justifyContent:"space-between",alignItems:"center",children:[!t||(0,f.N4)(a)||S?(0,i.jsx)(c.l,{textTransform:v||"capitalize",mb:"0px",children:t}):(0,i.jsx)(g.Z,{as:c.l,info:a,textTransform:v||"capitalize",children:t}),x||null]}),(0,i.jsxs)(o.U,{className:"image-selector-button",onClick:e=>{e.preventDefault(),S||I(!0)},children:[(0,i.jsx)(s.xu,{width:"auto",height:"40px",bg:"#dfdfdf",children:w?(0,i.jsx)(u.E,{src:w,width:"auto",h:"40px",objectFit:"cover"}):null}),(0,i.jsx)(l.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:y})]}),(0,f.N4)(n)||S?null:(0,i.jsx)(d.Q6,{children:n})]}),(0,i.jsx)(p.Z,{title:t,isOpen:T,onClose:()=>{I(!1)},overflowY:"auto",children:(k||[]).map(((e,t)=>(0,i.jsx)(m,{...e,onClick:()=>{j(e),I(!1)}},t)))}),(0,i.jsx)(r(),{id:"95178590041dfe1a",children:".image-selector-button{width:100%;min-width:0px;outline:2px solid transparent;outline-offset:2px;position:relative;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-transition-property:var(--chakra-transition-property-common);-moz-transition-timing-function:var(--chakra-transition-property-common);-o-transition-timing-function:var(--chakra-transition-property-common);transition-property:var(--chakra-transition-property-common);-webkit-transition-duration:var(--chakra-transition-duration-normal);-moz-transition-duration:var(--chakra-transition-duration-normal);-o-transition-duration:var(--chakra-transition-duration-normal);transition-duration:var(--chakra-transition-duration-normal);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);-moz-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-10);-moz-padding-end:var(--chakra-space-10);padding-inline-end:var(--chakra-space-10);height:var(--chakra-sizes-10);-webkit-border-radius:var(--chakra-radii-md);-moz-border-radius:var(--chakra-radii-md);border-radius:var(--chakra-radii-md);border:1px solid;border-color:inherit;background:inherit}"})]})}},62122:function(e,t,n){var i=n(85893),a=n(51857),r=n.n(a),o=n(34292),s=n(6089),l=n(71293),d=n(57747),c=n(85970),u=n(49626),h=n(36238),p=n(67294),f=n(94345),g=n(86201),m=n(55154);const v=e=>{let{id:t,name:n,logo:a,onDelete:r,...c}=e;return(0,i.jsxs)(o.U,{cursor:"pointer",justifyContent:"space-between",alignItems:"flex-end",mb:1,mx:"0.5rem",...c,children:[(0,i.jsxs)(o.U,{justifyContent:"flex-start",alignItems:"flex-end",children:[(0,i.jsx)(s.E,{src:a||"/res/svg-icon.png",w:"35px",h:"35px",borderRadius:"5px",border:"1px solid #dfdfdf"}),(0,i.jsx)(l.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:n||"No name yet"})]}),r?(0,i.jsx)(d.xu,{p:"0.5rem",onClick:()=>{r(t)},children:(0,i.jsx)(m.Xm5,{color:"#e53e3e"})}):null]})};t.Z=e=>{let{id:t,title:n,templates:a,createdTemplatesKeys:m,value:x,onChange:b,onNewTemplateSvgUploaded:w,disabled:y,errorMessage:k,info:j,helperText:S,onDelete:_,contactLink:T,...I}=e;const[O,C]=(0,p.useState)(!1),[E,F]=(0,p.useState)(),[N,Z]=(0,p.useState)([]);return(0,p.useEffect)((()=>{x&&F(x)}),[x]),(0,i.jsxs)(d.xu,{...I,children:[(0,i.jsxs)(c.NI,{opacity:y?.4:1,cursor:y?"not-allowed":"pointer",children:[(0,i.jsx)(u.Z,{textTransform:"capitalize",info:j,children:n}),(0,i.jsxs)(o.U,{className:"image-selector-button",onClick:e=>{e.preventDefault(),y||C(!0)},children:[E?(0,i.jsx)(s.E,{src:E.logo||"/res/svg-icon.png",w:"35px",h:"35px",borderRadius:"5px",border:"1px solid #dfdfdf"}):null,(0,i.jsx)(l.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:E?E.name||"No name yet":"Select Template"})]})]}),(0,i.jsx)(h.Z,{type:h.Z.TYPES.none,helperText:S,errorMessage:k}),O?(0,i.jsxs)(f.Z,{title:n,isOpen:!0,onClose:()=>{C(!1)},children:[w?(0,i.jsx)(o.U,{children:(0,i.jsx)(g.Z,{showAsButton:!0,isOtherFiles:!0,w:"100%",id:"Form_".concat(t,"logo"),title:"Add Template",mb:4,info:"This is where you upload your SVG file to generate a template from.",helperText:"Click to select upload an SVG file to use as a template.",message:"Drag and Drop file here",hoverMessage:"Drop the file here",ruleMessage:"Make sure you're uploading a .svg file.",useImageText:"Use File",onChange:(e,t)=>{C(!1),w(e,t)}},"Form_".concat(t,"logo"))}):null,(0,i.jsxs)(d.xu,{height:"50vh",pos:"relative",overflowY:"auto",children:[Object.values(a).map(((e,t)=>(0,i.jsx)(v,{...e,onClick:()=>{C(!1),b(e)},border:x&&x.id===(null===e||void 0===e?void 0:e.id)?"1px dashed":"none",borderRadius:x&&x.id===(null===e||void 0===e?void 0:e.id)?"5px":"0px",_hover:{opacity:"0.4"},onDelete:m&&m.length>0&&!m.includes(e.id)?_:null},t))),!w&&T?(0,i.jsxs)(d.xu,{w:"100%",textAlign:"center",fontSize:"14px",pb:"0.5rem",children:[(0,i.jsx)(l.x,{as:"div",children:"Can't find the type you want?"}),(0,i.jsx)(l.x,{as:"a",href:T,target:"_blank",color:"#38a169",textDecoration:"underline",children:"Click here to tell us what you want."})]}):null]})]}):null,(0,i.jsx)(r(),{id:"42ccd62b5c30613c",children:".image-selector-button{width:100%;min-width:0px;outline:2px solid transparent;outline-offset:2px;position:relative;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-transition-property:var(--chakra-transition-property-common);-moz-transition-timing-function:var(--chakra-transition-property-common);-o-transition-timing-function:var(--chakra-transition-property-common);transition-property:var(--chakra-transition-property-common);-webkit-transition-duration:var(--chakra-transition-duration-normal);-moz-transition-duration:var(--chakra-transition-duration-normal);-o-transition-duration:var(--chakra-transition-duration-normal);transition-duration:var(--chakra-transition-duration-normal);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);-moz-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-10);-moz-padding-end:var(--chakra-space-10);padding-inline-end:var(--chakra-space-10);height:var(--chakra-sizes-10);-webkit-border-radius:var(--chakra-radii-md);-moz-border-radius:var(--chakra-radii-md);border-radius:var(--chakra-radii-md);border:1px solid;border-color:inherit;background:inherit}"})]})}},25723:function(e,t,n){n.d(t,{d:function(){return s},t:function(){return r}});var i=n(5121),a=n(11802);function r(e){const t=e.split("."),n=t.length>1&&t.pop()||"";return{name:t.join("."),ext:n}}const o=e=>new Promise((t=>setTimeout(t,e))),s=async function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const l=[];for(const c of t){const{id:t,file:u,fileName:h,dir:p,onFileName:f}=c,{name:g,ext:m}=r(u.name),v=f?f(g,m):h||u.name;try{const r=await e.getIdToken(),o=await i.Z.post("".concat(a.Lu,"/get-presigned-url"),{id:t,fileName:v,fileType:u.type,dir:p},{headers:{Authorization:r}}),{presignedUrl:s}=o.data;if(200===(await i.Z.put(s,u,{headers:{"Content-Type":u.type}})).status){const e=n?"".concat(n).concat(n.endsWith("/")?"":"/").concat(p||"").concat((p||"").endsWith("/")?"":"/").concat(v):s.split("?")[0];l.push({id:t,url:e})}else l.push({id:t,url:"",error:"Upload failed"})}catch(d){console.log("parsedSvg: error",t,d),l.push({id:t,url:"",error:d.message})}await o(s)}return l}},10151:function(e,t,n){n.d(t,{l:function(){return a}});class i{random(){const e=1e4*Math.sin(this.seed++);return e-Math.floor(e)}randomInt(e,t){return Math.floor(this.random()*(t-e+1))+e}constructor(e){this.seed=e}}function a(e,t,n){if(!e||!t)return"";function a(a,r,o){const s=n?function(e,t,n,i){if(null===e||void 0===e||null===n||void 0===n||null===t||void 0===t||null===i||void 0===i)return 0;const a=(e+Object.keys(n).filter((e=>i(e))).map((e=>n[e].toString().replace(/\s+/g,""))).join("")+t.toString()).toLowerCase();let r=0;for(let o=0;o<a.length;o++)r=(r<<5)-r+a.charCodeAt(o),r|=0;return r}(e,o,t,n):1e6*Math.random(),l=new i(s),d=e=>"string"===typeof e&&e.endsWith("d"),c=e=>!isNaN(e)&&!d("".concat(e));if(c(a)&&c(r))return l.randomInt(parseInt(a),parseInt(r)).toString();if(d(a)&&d(r)){const e=parseInt(a),t=parseInt(r);let n="",i=0;const o=l.randomInt(e,t);for(;i<o;){n+=l.randomInt(1,9).toString(),i=n.length}return n}if(d(a)){const e=parseInt(a);let t=l.randomInt(1,9).toString();for(let n=1;n<e;n++){t+=l.randomInt(0,9).toString()}return t}return c(a)?Math.round(l.random()*parseInt(a)).toString():"Invalid arguments for randomNumber function: "+"Min: ".concat(a," - ").concat(typeof a," | Max: ").concat(r," - ").concat(typeof r)}const r=[];let o=0,s=e.replace(/\(([^()]*)\)/g,((e,n)=>{if(n.startsWith("rn[")){const[e,t]=n.slice(3,-1).split(",");return a(e,t,o++)}if(n.match(/^([^*]+)(\*{1,2})(\d+)$/)){const[,e,t,i]=n.match(/^([^*]+)(\*{1,2})(\d+)$/)||[],a=parseInt(i);if("*"==t)return e.repeat(a);{const t="<".concat(Math.floor(1e9*Math.random()),">");return r.push({id:t,char:e,count:a}),t}}if(n.includes("{")&&n.includes("}")){const e=n.split(/[{}]/);let i=function(e){if(!t)return"";const n=(e=e.replace(/[{}]+/g,"")).match(/(.+)\[w(\d+)\]/);if(n){const[,e,i]=n;return(t[e]||"").split(" ")[parseInt(i)-1]||""}return e in t?t[e]:""}(e[1]);return i&&i.length>0?(e[1]=i,i=e.join("")):i="",i}return n}));for(const i of r){const e=s.length-i.id.length;if(e>=i.count)break;const t=i.char.repeat(i.count-e);s=s.replace(i.id,t)}return s}}}]);