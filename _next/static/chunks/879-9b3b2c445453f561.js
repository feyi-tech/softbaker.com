"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{30929:function(e,t,n){n.d(t,{j:function(){return a}});var o=n(11163),i=n(67294);const a={error:"ERROR",info:"INFO",warning:"WARNING",warn:"WARNING"};t.Z=()=>{const{pathname:e}=(0,o.useRouter)(),t=()=>{if(window.localStorage)try{const e=JSON.parse(localStorage.getItem("APP_LOGS")||"[]");if("undefined"!==typeof Blob){const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="APP_LOGS_FILE.json",o.click(),URL.revokeObjectURL(n)}else{const t="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2)),n=document.createElement("a");n.href=t,n.download="APP_LOGS_FILE.json",n.click()}}catch(e){console.error("Failed to download logs",e)}};return(0,i.useEffect)((()=>{console.log("path",e),"/status/download-debug"===e&&t()}),[e]),{logger:(e,t)=>{if(window.localStorage){let o=[];try{o=JSON.parse(localStorage.getItem("APP_LOGS")||"[]")}catch(n){console.error("Failed to parse logs from localStorage",n)}o.push("".concat((new Date).toISOString()," => [").concat(t,"] ").concat(e));let i=JSON.stringify(o);for(;new Blob([i]).size>5120;)o.shift(),i=JSON.stringify(o);try{localStorage.setItem("APP_LOGS",i)}catch(n){console.error("Failed to save logs to localStorage",n)}}},downloadLogs:t}}},94345:function(e,t,n){var o=n(85893),i=n(35541),a=n(19778),r=n(14581),l=n(64859),s=n(71293),c=n(34292),d=n(57747),h=n(54346),g=n(14253),f=n(55154),u=n(96918);t.Z=e=>{let{bg:t,color:n,children:p,placement:m,onClose:x,isOpen:w,isClosable:y,title:j,footer:v,hideModeSwitch:S,noHeader:b,w:O,width:C,maxW:I,maxWidth:R,h:F,height:z,maxH:k,maxHeight:L,dontCloseOnOverlayClick:E,...U}=e;return(0,o.jsxs)(i.u_,{closeOnOverlayClick:!E,onClose:x||(()=>{}),isOpen:w,isCentered:!0,children:[(0,o.jsx)(a.Z,{}),(0,o.jsxs)(r.h,{bg:t||(0,u.Z)("cardBg.light","cardBg.dark"),color:n,minH:F||z||"50vh",maxH:k||L||"70vh",w:O||C||{base:"95%",md:"650px"},maxW:I||R,borderRadius:"16px !important",children:[b?null:(0,o.jsxs)(l.x,{borderBottomWidth:"1px",w:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,o.jsx)(s.x,{as:"div",fontSize:{base:"1.1rem",md:"1.3rem"},textTransform:"capitalize",children:j}),(0,o.jsx)(c.U,{children:x&&(y||void 0===y)?(0,o.jsx)(d.xu,{onClick:x,cursor:"pointer",display:"block",children:(0,o.jsx)(f.aHS,{size:"24px"})}):null})]}),(0,o.jsx)(h.f,{...U,children:p}),v?(0,o.jsx)(g.m,{children:v}):null]})]})}},35052:function(e,t,n){var o=n(85893),i=n(67294),a=n(94345),r=n(85461),l=n(55154),s=n(48783),c=n(71293),d=n(34292),h=n(6089),g=n(77181),f=n(57369),u=n(13653),p=n(30929);t.Z=e=>{let{galleryKey:t,onClose:n,onImage:m,maxFileSize:x,isOtherFiles:w,onThumb:y,title:j,message:v,hoverMessage:S,ruleMessage:b,useImageText:O,accept:C}=e;const{logger:I}=(0,p.Z)(),[R,F]=(0,i.useState)(!1),[z,k]=(0,i.useState)(!1),[L,E]=(0,i.useState)(null),[U,D]=(0,i.useState)();(0,i.useEffect)((()=>{if(t){const e=(0,f.fe)(t);if(e){E(e);const t=(0,u.g8)(e);e&&D(t)}}}),[t]);const[A,N]=(0,i.useState)();return(0,i.useEffect)((()=>{U&&L&&y?y(U,L).then((e=>{N(e)})).catch((e=>{console.error("handleUseImage: ",e.message),N(void 0)})):N(L)}),[L]),(0,o.jsx)(a.Z,{title:j,isOpen:!0,onClose:()=>n(),children:(0,o.jsxs)(s.g,{p:"0.5rem",id:"upload-area",justifyContent:"center",alignItems:"center",mb:4,width:"100%",height:"300px",cursor:"pointer",border:"4px dashed ".concat(R?"#dd6b20":"#ccc"),onDragEnter:e=>{e.preventDefault(),F(!0)},onDragOver:e=>{e.preventDefault()},onDragLeave:e=>{e.preventDefault(),F(!1)},onDrop:async e=>{if(z)return;e.preventDefault(),F(!1);const t=e.dataTransfer.files;if(t.length>0){const e=new FileReader,n=t[0];e.onload=async e=>{if(x&&x>0&&!w&&n.size>x){k(!0);const e=await(0,g.t)(n,x);E(e.base64),D(e.file),k(!1)}else{var t;const o=null===(t=e.target)||void 0===t?void 0:t.result;E(o),D(n)}},e.readAsDataURL(n)}},children:[(0,o.jsx)(l.DUB,{size:"2rem"}),(0,o.jsxs)(s.g,{alignItems:"center",children:[(0,o.jsx)(c.x,{as:"div",fontSize:"12px",children:R?S:v}),(0,o.jsx)(c.x,{as:"div",fontSize:"14px",children:"OR"}),(0,o.jsx)(r.Z,{status:"info",mb:"1rem",onClick:()=>{if(I("handleClickUpload.called:",p.j.info),z)return void I("handleClickUpload.aborted: processing in progress",p.j.warning);const e=document.createElement("input");e.type="file",e.accept=C||"image/*",e.style.display="none",document.body.appendChild(e),e.addEventListener("change",(async t=>{const n=t.target.files;if(document.body.removeChild(e),n&&n.length>0){const e=n[0];I("File selected: ".concat(JSON.stringify({name:e.name,size:e.size,type:e.type})),p.j.info);const t=new FileReader;t.onload=async t=>{var n;I("FileReader.onload fired:",p.j.info);const o=null===(n=t.target)||void 0===n?void 0:n.result;if(o)if(x&&x>0&&!w&&e.size>x){I("File size exceeds maxFileSize, resizing...",p.j.info),k(!0);const t=await(0,g.t)(e,x);I("Image resized.size: ".concat(t.base64.length),p.j.info),E(t.base64),D(t.file),k(!1)}else I("File within size limit, setting base64 image",p.j.warn),E(o),D(e);else I("FileReader result is empty or undefined",p.j.error)},t.onerror=e=>{I("FileReader.onerror fired: ".concat((null===e||void 0===e?void 0:e.message)||e),p.j.error)},t.readAsDataURL(e)}else I("No file selected or file input is empty",p.j.warn)})),e.click()},display:z?"none":"block",children:"Click to Upload"}),(0,o.jsxs)(c.x,{as:"div",fontSize:"12px",textAlign:"center",children:["(",b,")"]}),z?(0,o.jsx)(c.x,{as:"div",fontSize:"12px",fontStyle:"italic",color:"#3182ce",children:"Processing image. Please wait..."}):null,(0,o.jsx)(d.U,{justifyContent:"center",alignItems:"flex-end",flexWrap:"wrap",children:L&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.E,{src:A||"",bg:"#cfcfcf",width:"auto",height:"70px",border:"4px ridge #dd6b20"}),(0,o.jsx)(r.Z,{status:"warning",h:"70px",onClick:()=>{m(U,L,A)},disabled:z,fontStyle:z?"italic":"normal",children:z?"Please wait...":O})]})})]})]})})}},13653:function(e,t,n){function o(e,t,n){var o;const[i,a]=e.split(",");if(n=n||(null===(o=i.match(/:(.*?);/))||void 0===o?void 0:o[1]),!t){const e=(null===n||void 0===n?void 0:n.split("/")[1])||"bin";t="file_".concat(Date.now(),".").concat(e)}const r=window.atob(a),l=r.length,s=new Uint8Array(l);for(let d=0;d<l;d++)s[d]=r.charCodeAt(d);const c=new Blob([s],{type:n});return new File([c],t,{type:n})}n.d(t,{g8:function(){return o}})},57369:function(e,t,n){n.d(t,{OL:function(){return a},fe:function(){return i},ht:function(){return o}});const o={faceshot:"SOFTBAKER_FACESHOT"},i=e=>localStorage.getItem(e),a=e=>{((e,t)=>{try{localStorage.setItem(e,t)}catch(n){try{localStorage.clear(),localStorage.setItem(e,t)}catch(n){}}})(o.faceshot,e)}},77181:function(e,t,n){n.d(t,{t:function(){return o}});const o=async(e,t)=>new Promise(((n,o)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=async o=>{var i;const a=new Image;a.src=null===(i=o.target)||void 0===i?void 0:i.result,a.onload=()=>{const o=document.createElement("canvas"),i=o.getContext("2d");o.width=a.width,o.height=a.height,i.drawImage(a,0,0);const r=i.getImageData(0,0,o.width,o.height).data.length/(o.width*o.height),l=t/r,s=Math.sqrt(l);let c,d;a.width>=a.height?(c=s,d=a.height*(s/a.width)):(d=s,c=a.width*(s/a.height)),o.width=c,o.height=d,i.drawImage(a,0,0,c,d),o.toBlob((t=>{if(t){const i=new File([t],e.name,{type:e.type});n({base64:o.toDataURL(),file:i})}}),e.type)}},i.onerror=e=>o(e)}))}}]);