(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{40249:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});var i=n(85893),o=n(67294),a=n(57747),r=n(48783),l=n(34292),s=n(93717),d=n(15948),c=n(98687),u=n(75863),h=n(14132),p=n(36238),g=n(55154),m=n(53754),f=n(38118),v=n(94345),x=n(71293),w=n(85461),b=n(33471),y=n(73804),j=n(96918);var S=e=>{let{textAreaData:t,delimiter:n,value:l,onChange:s,suggestions:d,onSuggestionSelected:c,...u}=e;const[h,g]=(0,o.useState)(l||""),[m,f]=(0,o.useState)([]),[v,w]=(0,o.useState)(!1),[b,S]=(0,o.useState)(0);(0,o.useEffect)((()=>{g(l||"")}),[l]);const k=e=>{((e,t)=>{if(null==e||void 0==e)return;g(e),S(t);const i=e.slice(0,t).lastIndexOf(n),o=e.slice(i+n.length,t),a=["id",...d];if(-1===i||!/^[a-zA-Z]*$/.test(o)&&0!==o.length)w(!1);else{let e;e=0===o.length?a:a.filter((e=>e.toLowerCase().startsWith(o.toLowerCase()))),f(e),w(e.length>0)}s&&s(e)})(e.target.value,e.target.selectionStart||0)};return(0,i.jsxs)(a.xu,{w:"100%",overflowX:"hidden",...u,children:[(0,i.jsx)(p.Z,{w:"100%",value:h,onChange:(e,t)=>k(t),onClick:e=>k(e),onKeyUp:e=>k(e),...t}),v&&(0,i.jsx)(r.g,{position:"absolute",zIndex:"5",w:"100%",boxShadow:"md",borderRadius:"md",height:"120px",width:"100%",overflowY:"auto",overflowX:"hidden",bg:(0,j.Z)("dropDownBg.light","dropDownBg.dark"),children:(0,i.jsx)(y.aV,{w:"100%",overflowX:"hidden",children:m.map(((e,t)=>(0,i.jsx)(y.HC,{overflowX:"hidden",p:"2",cursor:"pointer",_hover:{border:"1px solid",borderRadius:"3px"},onClick:()=>(e=>{const t=h.slice(0,b).lastIndexOf(n),i=h.slice(0,t+n.length)+e+h.slice(b);g(i),w(!1),n.length,e.length,c(e,t+n.length,i)})(e),children:(0,i.jsx)(x.x,{as:"div",children:e})},t)))})})]})},k=n(467),T=n(86455),C=n.n(T);const E="FIELDS_SETTINGS",I=()=>{const e=localStorage.getItem(E);let t={};try{e&&(t=JSON.parse(e))}catch(n){}return t};var O=e=>{let{fields:t,field:n,images:r,submitButtonText:s,onSettingsUpdated:d,onDelete:c}=e;const[u,h]=(0,o.useState)({}),[m,f]=(0,o.useState)({}),[y,j]=(0,o.useState)(null),[T,O]=(0,o.useState)(!1);(0,o.useEffect)((()=>{if(n){var e,t,i,o,a,r;const l={...n};let s=I();!l.helperText&&(null===(e=s[n.id])||void 0===e?void 0:e.helperText)&&(l.helperText=s[n.id].helperText),!l.info&&(null===(t=s[n.id])||void 0===t?void 0:t.info)&&(l.info=s[n.id].info),!l.ruleMessage&&(null===(i=s[n.id])||void 0===i?void 0:i.ruleMessage)&&(l.ruleMessage=s[n.id].ruleMessage),!l.placeholder&&(null===(o=s[n.id])||void 0===o?void 0:o.placeholder)&&(l.placeholder=s[n.id].placeholder),!l.name&&(null===(a=s[n.id])||void 0===a?void 0:a.name)&&(l.name=s[n.id].name),!l.optional&&(null===(r=s[n.id])||void 0===r?void 0:r.optional)&&(l.optional=s[n.id].optional),h(l)}}),[n]),(0,o.useEffect)((()=>{}),[u]);const[_,Z]=(0,o.useState)(!1),M=e=>{if(n.id){if(Object.values(e).length>0){const t=Object.values(e)[0];if(!("string"===typeof t&&0==t.length)){let t=I();t[n.id]={...t[n.id]||{},...e},localStorage.setItem(E,JSON.stringify(t))}}h({...u,...e})}},D=e=>{const t={},n=e.split(",");for(const i of n){const e=i,[n,o]=e.split(":").map((e=>e));if(console.log("mapifyList:0",i,n,o),void 0!=o){t[n.trim().toLowerCase().replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")]={name:n,value:o}}else{t[n.trim().toLowerCase().replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")]={name:n,value:n}}}return console.log("mapifyList",t),t};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.U,{children:[(0,i.jsx)(a.xu,{onClick:()=>{Z(!0)},cursor:"pointer",mr:4,children:(0,i.jsx)(g.rU2,{size:"1.5rem",color:["gen","defgen","date"].includes(n.type)?"#dd6b20":"text_select"==n.type?"#3182ce":"#38a169"})}),(0,i.jsx)(a.xu,{onClick:c,cursor:"pointer",justifyContent:"flex-start",alignItems:"center",children:(0,i.jsx)(g.Xm5,{size:"1.2rem",color:"#e53e3e"})})]}),_?(0,i.jsxs)(v.Z,{title:"".concat(n.name||""," settings"),isOpen:!0,onClose:()=>{Z(!1)},dontCloseOnOverlayClick:T,children:[(0,i.jsxs)(a.xu,{height:"50vh",pos:"relative",overflowY:"auto",overflowX:"hidden",px:"0.5rem",children:[(0,i.jsx)(x.x,{as:"div",display:"none",children:n.type}),(0,i.jsx)(p.Z,{w:"100%",mb:4,title:"Field Type",placeholder:"Select Field Type",helperText:"Select the type you want for this field.",value:null===u||void 0===u?void 0:u.type,type:p.Z.TYPES.select,options:k.eh,onOptionValue:e=>e,onOptionName:e=>e,onChange:e=>{e&&h({...u,type:e})},errorMessage:m.type}),["gen","defgen","date"].includes(null===u||void 0===u?void 0:u.type)?(0,i.jsx)(S,{w:"100%",textAreaData:{id:"gen",key:"gen",title:"Text Generation Code",helperText:"".concat((0,b.VH)(n.placeholder||""),"."),info:"This is where you enter the code for the text generation: ".concat((0,b.VH)(n.placeholder||""),"."),type:p.Z.TYPES.textarea,value:null===u||void 0===u?void 0:u.code,onChange:e=>{e&&h({...u,code:e})},errorMessage:m.code},mb:4,delimiter:"{",suggestions:Object.keys(t),onSuggestionSelected:(e,t,n)=>{n&&h({...u,code:n})}}):null,["text_select"].includes(null===u||void 0===u?void 0:u.type)?(0,i.jsx)(p.Z,{w:"100%",id:"selections",title:"Options",mb:4,helperText:"Separate the options you want to list with commas. Exaple: 'Blue:BLU, Green'",info:"This is where you list the options you want to show by separating them with commas.",type:p.Z.TYPES.textarea,value:(e=>{const t=[];for(const n in e){const{name:i,value:o}=e[n];i===o?t.push(i):t.push("".concat(i,":").concat(o))}return t.join(",")})((null===u||void 0===u?void 0:u.selections)||{}),onChange:e=>{e&&M({selections:D(e)})},errorMessage:m.selections},"selections"):null,["image_upload","faceshot"].includes(null===u||void 0===u?void 0:u.type)?(0,i.jsx)(p.Z,{w:"100%",id:"upload",title:"File Rule",mb:4,helperText:'Enter the rule of the file. e.g "For best result, upload a 300x300 image."',info:'This is where you enter the rule of the file. e.g "For best result, upload a 300x300 image."',type:p.Z.TYPES.text,value:null===u||void 0===u?void 0:u.ruleMessage,onChange:e=>{e&&M({ruleMessage:e})},errorMessage:m.ruleMessage},"upload"):null,(0,i.jsx)(p.Z,{w:"100%",id:"name",title:"Name",mb:4,helperText:"Enter the text that will show as the name of the field.",info:"This is where you enter the text that will show as the name of the field.",type:p.Z.TYPES.text,value:null===u||void 0===u?void 0:u.name,onChange:e=>{if(e)if("image_select"!=u.type)M({name:e});else{const t=u.options||{},n={};for(const[i,o]of Object.entries(t))n[i]={...o,name:((null===o||void 0===o?void 0:o.name)||"").replace(u.name,e)};M({name:e,options:n})}},errorMessage:m.name},"name"),["text","textarea","defgen","text_select","date"].includes(null===u||void 0===u?void 0:u.type)?(0,i.jsx)(p.Z,{w:"100%",id:"placeholder",title:"Placeholder",mb:4,helperText:"Enter the text that will show behind the text field as an example input.",info:"This is where you enter the text that will show behind the text field as an example input.",type:p.Z.TYPES.textarea,value:null===u||void 0===u?void 0:u.placeholder,onChange:e=>{e&&M({placeholder:e})},errorMessage:m.placeholder},"placeholder"):null,"textarea"==(null===u||void 0===u?void 0:u.type)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Z,{w:"100%",id:"maxCharsPerLine",title:"Max Chars Per Line",mb:4,helperText:"Enter the maximum number of characters per line.",info:"This is where you enter the maximum number of characters per line.",type:p.Z.TYPES.number,value:null===u||void 0===u?void 0:u.maxCharsPerLine,onChange:e=>{e&&M({maxCharsPerLine:e})},errorMessage:m.maxCharsPerLine,numberDecimals:0},"maxCharsPerLine"),(0,i.jsx)(p.Z,{w:"100%",id:"maxChars",title:"Max Chars",mb:4,helperText:"Enter the maximum number of total characters.",info:"This is where you enter the maximum number of total characters per line.",type:p.Z.TYPES.number,value:null===u||void 0===u?void 0:u.maxChars,onChange:e=>{e&&M({maxChars:e})},errorMessage:m.maxChars,numberDecimals:0},"maxChars")]}):null,["text","textarea","defgen"].includes(null===u||void 0===u?void 0:u.type)?(0,i.jsx)(p.Z,{w:"100%",id:"maxCharsBeforeScale",title:"Font Scale-Down Max Chars",mb:4,helperText:"Enter the maximum number of total characters before the font size is scaled down.",info:"This is where you enter the maximum number of total characters the font size is scaled down.",type:p.Z.TYPES.number,value:null===u||void 0===u?void 0:u.maxTextBeforeScaleDown,onChange:e=>{e&&M({maxTextBeforeScaleDown:e})},errorMessage:m.maxTextBeforeScaleDown,numberDecimals:0},"maxCharsBeforeScale"):null,"gen"!==(null===u||void 0===u?void 0:u.type)?(0,i.jsx)(p.Z,{w:"100%",id:"helper_text",title:"Helper Text",mb:4,helperText:"Enter the text that will show below this field just like this.",info:"This is where you enter the text that will show below this field.",type:p.Z.TYPES.text,value:null===u||void 0===u?void 0:u.helperText,onChange:e=>{e&&M({helperText:e})},errorMessage:m.helperText},"helper_text"):null,["qrcode","checkbox","gen"].includes(null===u||void 0===u?void 0:u.type)?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Z,{w:"100%",id:"info",title:"Info Text",mb:4,helperText:"Enter the text that will show when the user clicks the info icon on this field.",info:"This is where you enter the text that will show when the user clicks the info icon on this field just like this.",type:p.Z.TYPES.textarea,value:null===u||void 0===u?void 0:u.info,onChange:e=>{e&&M({info:e})},errorMessage:m.info},"info"),(0,i.jsx)(p.Z,{w:"100%",id:"optional",title:"Make Optional",mb:4,helperText:"Enable this if you want this field to be optional.",type:p.Z.TYPES.checkbox,value:null===u||void 0===u?void 0:u.optional,onChange:e=>{M({optional:e})},errorMessage:m.optional},"optional")]}),(0,i.jsx)(S,{w:"100%",textAreaData:{id:"visibility",key:"visibility",title:(0,i.jsxs)(x.x,{as:"div",children:["Visibility Anchor",(0,i.jsx)("br",{}),"(CompareCodeResult == ToThis)"]}),helperText:"Enter the field comparison conditional visibility code",info:"This is where you enter the field comparison conditional visibility code.",type:p.Z.TYPES.textarea,value:null===u||void 0===u?void 0:u.visibility_code,onChange:e=>{e&&h({...u,visibility_code:e})},errorMessage:m.code},mb:4,delimiter:"{",suggestions:Object.keys(t),onSuggestionSelected:(e,t,n)=>{n&&h({...u,visibility_code:n})}})]}),(0,i.jsx)(a.xu,{mb:"1rem",children:(0,i.jsx)(w.Z,{status:"warning",mb:"1rem",onClick:()=>{T||((null===u||void 0===u?void 0:u.type)!=(null===n||void 0===n?void 0:n.type)?C().fire({icon:"warning",title:"Field Change Warning!!",text:"You're about to change this field type from ".concat(null===n||void 0===n?void 0:n.type," to ").concat(null===u||void 0===u?void 0:u.type,"! Changing field type without properly understanding how it affects the users can cause a bad user experience and might require deleting the tool and then re-uploading disruptively to fix."),confirmButtonText:"I Understand, Continue",cancelButtonText:"Cancel",showConfirmButton:!0,showCancelButton:!0}).then((e=>{Z(!1),e.isConfirmed?d(u,null):d({...u,type:null===n||void 0===n?void 0:n.type},null)})):(Z(!1),d(u,null)))},disabled:T,children:T?"Please wait...":s||"Submit Settings"})})]}):null]})},_=n(36024),Z=n(5555);class M{random(){const e=1e4*Math.sin(this.seed++);return e-Math.floor(e)}randomInt(e,t){return Math.floor(this.random()*(t-e+1))+e}constructor(e){this.seed=e}}function D(e,t,n,i){if(!e||!t)return"";function o(i,o,a){const r=n?function(e,t,n,i){if(null===e||void 0===e||null===n||void 0===n||null===t||void 0===t||null===i||void 0===i)return 0;const o=(e+Object.keys(n).filter((e=>i(e))).map((e=>n[e].toString().replace(/\s+/g,""))).join("")+t.toString()).toLowerCase();let a=0;for(let r=0;r<o.length;r++)a=(a<<5)-a+o.charCodeAt(r),a|=0;return a}(e,a,t,n):1e6*Math.random(),l=new M(r),s=e=>"string"===typeof e&&e.endsWith("d"),d=e=>!isNaN(e)&&!s("".concat(e));if(d(i)&&d(o))return l.randomInt(parseInt(i),parseInt(o)).toString();if(s(i)&&s(o)){const e=parseInt(i),t=parseInt(o);let n="",a=0;const r=l.randomInt(e,t);for(;a<r;){n+=l.randomInt(1,9).toString(),a=n.length}return n}if(s(i)){const e=parseInt(i);let t=l.randomInt(1,9).toString();for(let n=1;n<e;n++){t+=l.randomInt(0,9).toString()}return t}return d(i)?Math.round(l.random()*parseInt(i)).toString():"Invalid arguments for randomNumber function: "+"Min: ".concat(i," - ").concat(typeof i," | Max: ").concat(o," - ").concat(typeof o)}function a(e){if(!t)return"";const n=(e=e.replace(/[{}]+/g,"")).match(/(.+)\[w(\d+)\]/);if(n){const[,e,o]=n,a=i?i(e,t[e]||""):t[e];return(a||"").split(" ")[parseInt(o)-1]||""}if(e in t){return i?i(e,t[e]||""):t[e]}return""}function r(e,t,n){var i=parseInt(t),o=parseInt(n||"");return isNaN(o)?e.substring(i-1):e.substring(i-1,o)}function l(e,t,n){var i=null;switch(t){case"cut":if(n&&[1,2].includes(n.length))try{i=r(e,n[0],n[1])}catch(a){}break;case"df":if(n&&[1,2,3].includes(n.length))try{var o=n[0];i=function(e,t){const n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["January","February","March","April","May","June","July","August","September","October","November","December"];return{YYYY:e.getFullYear().toString(),YY:String(e.getFullYear()).slice(-2),MMMM:i[e.getMonth()],MMM:i[e.getMonth()].slice(0,3),MM:String(e.getMonth()+1).padStart(2,"0"),M:(e.getMonth()+1).toString(),DD:String(e.getDate()).padStart(2,"0"),D:e.getDate().toString(),dddd:n[e.getDay()],ddd:n[e.getDay()].slice(0,3),HH:String(e.getHours()).padStart(2,"0"),H:e.getHours().toString(),hh:String(e.getHours()%12||12).padStart(2,"0"),h:(e.getHours()%12||12).toString(),mm:String(e.getMinutes()).padStart(2,"0"),m:e.getMinutes().toString(),ss:String(e.getSeconds()).padStart(2,"0"),s:e.getSeconds().toString(),A:e.getHours()<12?"AM":"PM",a:e.getHours()<12?"am":"pm"}[t]||""}("_"==e?new Date:(0,Z.Ft)(e),o),n.length>1&&(i=r(i,n[1],n[2]))}catch(a){console.log(a)}}return i}const s=[];let d=0,c=e.replace(/\(([^()]*)\)/g,((e,t)=>{if(t.startsWith("rn[")){const[e,n]=t.slice(3,-1).split(",");return o(e,n,d++)}if(t.match(/^([^*]+)(\*{1,2})(\d+)$/)){const[,e,n,i]=t.match(/^([^*]+)(\*{1,2})(\d+)$/)||[],o=parseInt(i);if("*"==n)return e.repeat(o);{const t="<".concat(Math.floor(1e9*Math.random()),">");return s.push({id:t,char:e,count:o}),t}}if(t.includes("{")&&t.includes("}")){var n=function(e){const t=/{([^{}]+?)}(\.\w+\[(.*?)\])?/g,n=[];let i;for(;null!==(i=t.exec(e));){const e=i[1],t=i[2]?i[2].split("[")[0].slice(1):null,o=i[3]?i[3].split(",").map((e=>e.trim())):[],a=i.index,r=i.index+i[0].length-1,l={varKey:e,varFunc:t||void 0,varFuncArgs:o.length?o:void 0,replacementStart:a,replacementEnd:r};n.push(l)}return n}(t);n.sort(((e,t)=>t.replacementStart-e.replacementStart));for(const e of n){var i=a(e.varKey);if(e.varFunc&&(i=l(i,e.varFunc,e.varFuncArgs)),!(i&&t.length>0)){t="";break}r=t,c=i,u=e.replacementStart,h=e.replacementEnd,t=r.slice(0,u)+c+r.slice(h+1)}return t}return t;var r,c,u,h}));for(const u of s){const e=c.length-u.id.length;if(e>=u.count)break;const t=u.char.repeat(u.count-e);c=c.replace(u.id,t)}return c}var F=n(57369),A=n(20967);var N=e=>{let{onAdd:t,...n}=e;const{isOpen:r,onOpen:s,onClose:d}=(0,A.q)(),[c,u]=(0,o.useState)(),[h,m]=(0,o.useState)(),[f,x]=(0,o.useState)(),[b,y]=(0,o.useState)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.U,{justifyContent:"flex-end",alignItems:"center",...n,children:(0,i.jsx)(w.Z,{leftIcon:(0,i.jsx)(g.wEH,{}),status:"warning",onClick:s,children:"Add Field"})}),r?(0,i.jsxs)(v.Z,{title:"Ad Field",isOpen:!0,onClose:d,children:[(0,i.jsxs)(a.xu,{height:"50vh",pos:"relative",overflowY:"auto",overflowX:"hidden",px:"0.5rem",children:[(0,i.jsx)(p.Z,{w:"100%",mb:4,name:"Field Type",placeholder:"Select Field Type",helperText:"Select the type of the field to add.",value:c,type:p.Z.TYPES.select,options:k.Z9,onOptionValue:e=>e,onOptionName:e=>e,onChange:u,errorMessage:f}),(0,i.jsx)(p.Z,{w:"100%",id:"name",title:"Field Name",mb:4,helperText:"Enter the text that will show as the name of the field.",info:"This is where you enter the text that will show as the name of the field.",type:p.Z.TYPES.text,value:h,onChange:m,errorMessage:b},"name")]}),(0,i.jsx)(a.xu,{mb:"1rem",children:(0,i.jsx)(w.Z,{status:"warning",mb:"1rem",onClick:()=>{x(""),y("");var e,n=!1;c?k.Z9.includes(c)||(n=!0,x("Invalid field type.")):(n=!0,x("Please select a field type.")),h&&0!=h.length||(n=!0,y("Please enter the field name.")),n||(d(),t({type:c,name:h,id:"".concat((e=h,e.trim().toLowerCase().replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")),".").concat(c)}))},children:"Submit Field"})})]}):null]})},P=n(30929);var z=e=>{let{created:t,showFieldsErrors:n,fields:v,images:x,masks:w,data:y,isFieldsEditMode:j,isDragable:S,onDragged:k,onFieldDataChange:T,onAllFieldsDataChange:E,fieldDataErrorMessage:I,onSetFieldDataErrorMessage:M,minSignatureWidth:A,maxSignatureWidth:z,editableFields:Y}=e;const{logger:L}=(0,P.Z)(),[B,U]=(0,o.useState)(Object.values(v)),[J,R]=(0,o.useState)(!1);(0,o.useEffect)((()=>{U(Object.values(v));const e={...y};for(const t of Object.values(v))"image_select"==t.type&&t.options&&!e[t.id]&&(e[t.id]=Object.keys(t.options)[0]);Object.keys(e).length>0&&JSON.stringify(e)!=JSON.stringify(y)&&E(e)}),[v,y]);const H=(e,t)=>{let n=null;return e.maxChars&&"".concat(t).length>e.maxChars&&(n="".concat(e.name," should not be greater than ").concat(e.maxChars," characters.")),M({...I,[e.id]:n}),n};return B&&0!=B.length?(0,i.jsxs)(a.xu,{as:d.Z5,onDragEnd:e=>{if(!e.destination||!k)return;const t=Array.from(B),[n]=t.splice(e.source.index,1);t.splice(e.destination.index,0,n);const i=t.reduce(((e,t,n)=>(e[t.id]={...t,index:n},e)),{});console.info("parsedSvg:updatedFields",i),k(i)},p:"0px !important",children:[j?(0,i.jsx)(N,{my:4,onAdd:e=>{if(v[e.id])C().fire({icon:"error",title:"Field Error",text:"Duplicate field error!"});else{if(!k)return;const t=[e,...B].reduce(((e,t,n)=>(e[t.id]={...t,index:n},e)),{});console.info("parsedSvg:updatedFields",t),k(t)}}}):null,(0,i.jsx)(d.bK,{droppableId:"fields",children:e=>(0,i.jsxs)(r.g,{w:"100%",ref:e.innerRef,...e.droppableProps,children:[B.map(((e,o)=>(0,i.jsx)(d._l,{draggableId:e.id,index:o,isDragDisabled:!S,children:o=>{const r=(e=>{const o={key:e.id,id:e.id,disabled:t&&!(Y||[]).includes(e.id),title:"".concat(e.name||"").concat(e.optional?"(Optional)":""),helperText:e.helperText||"",info:e.info||"",placeholder:(0,b.VH)(e.placeholder||e.name||""),onChange:t=>{H(e,t),T(e.id,t)},errorMessage:n?I[e.id]:null,labelEndIcon:j?(0,i.jsx)(O,{fields:v,field:e,images:x,onDelete:()=>{C().fire({icon:"warning",title:"Delete field",text:"Are you sure you want to delete this field?",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"No!"}).then((t=>{if(t.isConfirmed){const t={...v};if(delete t[e.id],!k)return;const n=Object.values(t).reduce(((e,t,n)=>(e[t.id]={...t,index:n},e)),{});k(n)}}))},onSettingsUpdated:(t,n)=>{const i={...v,[t.id]:{...e,...t}},o=n?{...w||{},...n}:null;k&&k(i,o),console.info("onSettingsUpdated.updated",i,o)}}):null,message:"Drag and Drop image here",hoverMessage:"Drop the image here",ruleMessage:e.ruleMessage||"Make sure you're uploading an image file.",useImageText:"Use Image"};if(!(0,_.LV)(e,v,y))return j?(0,i.jsx)(p.Z,{width:"100%",...o,value:y[e.id]||"",type:p.Z.TYPES.none}):null;switch(e.type){case"image_upload":case"faceshot":return(0,i.jsx)(c.Z,{galleryKey:"faceshot"==e.type?F.ht.faceshot:void 0,width:"100%",...o,disabled:!1,thumbnail:y[e.id]&&!(0,_.zI)(y[e.id])?(0,m.VT)("other_tools_data",y.id,e.id):y[e.id]&&(0,_.zI)(y[e.id])?y[e.id]:void 0,maxFileSize:1048576,removeBackground:"faceshot"==e.type,imageCropArg:"faceshot"==e.type?{message:"Make sure the image is cropped from the top of the head to above the chests with the shoulders visible as shown in the sample image.",sampleImage:"/res/sample-image-crop.png"}:void 0,onChange:(t,n)=>{if(n)try{if(L("faceshot.base64String.size: ".concat(n.length),P.j.info),"faceshot"==e.type)try{(0,F.OL)(n),L("faceshot.saved.ok",P.j.info)}catch(i){L("faceshot.save.error: ".concat(null===i||void 0===i?void 0:i.message),P.j.error)}try{H(e,n),L("faceshot.onFieldDataCheckInfo.ok",P.j.info)}catch(i){L("faceshot.onFieldDataCheckInfo.error: ".concat(null===i||void 0===i?void 0:i.message),P.j.error)}try{T(e.id,n),L("faceshot.onFieldDataChange.ok",P.j.info)}catch(i){L("faceshot.onFieldDataChange.error: ".concat(null===i||void 0===i?void 0:i.message),P.j.error)}}catch(i){L("faceshot.x.error: ".concat(null===i||void 0===i?void 0:i.message),P.j.error)}else L("faceshot.base64String.empty",P.j.warning)}});case"sign":return(0,i.jsx)(h.Z,{width:"100%",...o,disabled:!1,minSignatureWidth:A||1,maxSignatureWidth:z||1,thumbnail:y[e.id]&&!(0,_.zI)(y[e.id])?(0,m.VT)("other_tools_data",y.id,e.id):y[e.id]&&(0,_.zI)(y[e.id])?y[e.id]:void 0});case"image_select":var r;const t=Object.values(e.options||{}).map((t=>({id:t.id,title:(0,_.Ok)(e.name,t.name),thumbnail:(0,_.gJ)(t.id,x,"_thumbnail"),image:{base:(0,_.gJ)(t.id,x,"_512"),md:(0,_.gJ)(t.id,x,"_728"),lg:(0,_.gJ)(t.id,x)}})))||[];return(0,i.jsx)(u.Z,{width:"100%",...o,thumbnail:(0,_.gJ)(y[e.id],x,"_thumbnail"),imageTitle:(0,_.Ok)(e.name,e.options?null===(r=e.options[y[e.id]])||void 0===r?void 0:r.name:""),onChange:t=>{const n=t;H(e,n.id),T(e.id,n.id)},options:t});case"text":case"textarea":return(0,i.jsx)(p.Z,{width:"100%",...o,value:y[e.id]||"",type:e.type,maxTextLimit:e.maxChars?e.maxChars:void 0});case"date":return(0,i.jsx)(p.Z,{width:"100%",...o,value:(0,Z.Ft)(y[e.id]),title:j?"".concat(o.title," (").concat((0,b.VH)(e.placeholder||""),")"):o.title,type:e.type,onChange:t=>{H(e,(0,Z.SG)(t)),T(e.id,(0,Z.SG)(t))}});case"text_select":return(0,i.jsx)(p.Z,{w:"100%",...o,placeholder:"-- Select ".concat((0,m.kC)(e.name||"")," --"),value:y[e.id]||"",type:p.Z.TYPES.select,options:Object.keys(e.selections||{}),onOptionValue:e=>e,onOptionName:t=>{var n,i;const o=((null===(n=(e.selections||{})[t]||"")||void 0===n?void 0:n.name)||"").trim(),a=((null===(i=(e.selections||{})[t]||"")||void 0===i?void 0:i.value)||"").trim();var r=j&&o!=a?"(".concat(a,")"):"";return"".concat(o).concat(r)}});case"defgen":return(0,i.jsx)(p.Z,{width:"100%",...o,type:p.Z.TYPES.text,value:y[e.id]||""});case"gen":return j?(0,i.jsx)(p.Z,{width:"100%",...o,type:p.Z.TYPES.viewonly,placeholder:"",helperText:(0,b.VH)(e.placeholder||""),value:D(e.code,y,_.oh,((e,t)=>{var n,i;return"text_select"==(null===(n=v[e])||void 0===n?void 0:n.type)?((null===(i=(v[e].selections||{})[t])||void 0===i?void 0:i.value)||"").trim():t}))}):null;case"checkbox":return(0,i.jsx)(p.Z,{...o,type:e.type,value:y[e.id]||!1});case"qrcode":return j?(0,i.jsxs)(a.xu,{w:"100%",h:"40px",border:"1px solid #dfdfdf",children:["QR CODE | ",o.title]}):null;default:return null}})(e);return r?(0,i.jsx)("div",{ref:o.innerRef,...o.draggableProps,...o.dragHandleProps,style:{...o.draggableProps.style,width:"100%"},children:(0,i.jsxs)(l.U,{w:"100%",justifyContent:"center",alignItems:e.helperText||["gen"].includes(e.type)&&e.placeholder?"center":"flex-end",mb:4,children:[(0,i.jsx)(a.xu,{width:{base:"100%",md:S?"90%":"100%"},children:r}),(0,i.jsxs)(s.k,{display:{base:"none",md:S?"flex":"none"},w:"40px",h:"40px",border:"1px dashed",pos:"relative",justifyContent:"center",alignItems:"center",children:[(0,i.jsx)(a.xu,{as:g.ZTc,position:"absolute",mb:"25px",size:"10px"}),(0,i.jsx)(a.xu,{as:g.NWQ,position:"absolute",mt:"25px",size:"10px"})]})]})}):(0,i.jsx)("div",{ref:o.innerRef,...o.draggableProps,...o.dragHandleProps,style:{display:"none"}})}},e.id))),e.placeholder]})})]}):(0,i.jsx)(f.Z,{message:"Loading template assets...",minH:"100px"})}},34346:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var i=n(85893),o=n(56691),a=n(96918),r=n(34292),l=n(71293),s=n(98303),d=n(57747),c=n(48783),u=n(55154),h=n(67294),p=n(36238),g=n(88772),m=n(81136),f=n(6089),v=n(36024),x=n(94345),w=n(59501),b=n(85461);const y=["0.1","0.2","0.3","0.4","0.5","0.6","0.7"],j={Whitescale:{id:"Whitescale"},Blackscale:{id:"Blackscale"},Greyscale:{id:"Greyscale"},Redscale:{id:"Redscale"},Greenscale:{id:"Greenscale"},Bluescale:{id:"Bluescale"},Sepia:{id:"Sepia"},Guassianblur:{id:"Guassianblur",render:e=>{let{filterArgs:t,setFilterArgs:n}=e;return(0,i.jsx)(d.xu,{w:"100%",children:(0,i.jsx)(p.Z,{w:"100%",id:"filter_arg",title:"Blur radius",mb:4,helperText:"Select the blur radius.",info:"This is where you select the blur radius.",type:p.Z.TYPES.select,value:null===t||void 0===t?void 0:t.radius,options:y,onOptionValue:e=>y.includes(e)?e:y[0],onOptionName:e=>y.includes(e)?e:y[0],onChange:e=>{n({...t,radius:(isNaN(e),e)})}},"filter_arg")})}},ImageTransform:{id:"ImageTransform",render:e=>{let{filterArgs:t,setFilterArgs:n,onShowSvgArgsInput:o}=e;return(0,i.jsx)(d.xu,{w:"100%",children:(0,i.jsx)(b.Z,{status:"warning",onClick:()=>{o&&o()},children:"Edit Rotation"})})}}},S=e=>{let{filterElementId:t,id:n,value:o,onRender:a,onChange:r,onShowSvgArgsInput:l,...s}=e;var u;return(0,i.jsxs)(c.g,{w:"100%",justifyContent:"flex-start",alignItems:"flex-start",border:"1px",p:"0.5rem",borderRadius:"3px",...s,children:[(0,i.jsx)(g.X,{id:n,isChecked:o.selected,onChange:e=>{var t;r({...o,selected:null===(t=e.target)||void 0===t?void 0:t.checked})},children:n}),a?(0,i.jsx)(d.xu,{mb:2,w:"100%",children:a({filterArgs:null===(u=o.mask)||void 0===u?void 0:u.args,setFilterArgs:e=>{r({...o,mask:{...o.mask,args:{...o.mask.args||{},...e}}})},onShowSvgArgsInput:()=>{l&&l(t,o.mask)}})}):null]})},k=e=>{let{filterElementId:t,title:n,filters:o,isOpen:a,onComplete:l,onClose:s,onShowSvgArgsInput:d}=e;const[u,p]=(0,h.useState)();(0,h.useEffect)((()=>{u||p((e=>{const t={},n=Object.values(v.Oq);for(const i of n)t[i.id]={id:i.id,selected:null!=e[i.id]&&void 0!=e[i.id],mask:e[i.id]||{filter_id:i.id},render:j["".concat(i.id)].render};return t})(o||{}))}),[o]),(0,h.useEffect)((()=>{}),[u]);return(0,i.jsxs)(x.Z,{title:n,isOpen:a,onClose:s,dontCloseOnOverlayClick:!0,w:"100%",h:"90vh",children:[(0,i.jsx)(c.g,{justifyContent:"flex-start",alignItems:"flex-start",w:"100%",height:"60vh",pos:"relative",overflowY:"auto",px:"0.5rem",children:u?Object.values(u).sort(((e,t)=>(e.id||"").localeCompare(t.id||""))).map(((e,n)=>(0,i.jsx)(S,{id:e.id,value:u[e.id],onRender:j["".concat(e.id)].render,filterElementId:t,onShowSvgArgsInput:d,onChange:t=>{p({...u,[e.id]:t})},mb:4},n))):(0,i.jsx)(r.U,{w:"100%",justifyContent:"center",children:(0,i.jsx)(m.$,{size:"xl"})})}),(0,i.jsx)(w.Z,{onClick:()=>{if(u){const e={},t=Object.values(v.Oq).filter((e=>e.isAutomatic));for(const i of t)o[i.id]&&(e[i.id]=o[i.id]);const n=Object.values(u).filter((e=>e.selected));for(const i of n)e[i.id]=i.mask;l(e),s()}else s()},children:"Submit Filters"})]})},T=e=>{let{id:t,image:n,onClick:o,...a}=e;return(0,i.jsxs)(r.U,{w:"100%",justifyContent:"flex-start",alignItems:"flex-end",border:"1px",p:"0.5rem",borderRadius:"3px",...a,onClick:o,cursor:"pointer",children:[(0,i.jsx)(f.E,{src:n||"",w:"60px",h:"60px"}),(0,i.jsx)(l.x,{as:"div",children:t})]})},C=e=>{let{images:t,onSelected:n,onClose:o}=e;return(0,i.jsx)(x.Z,{title:"Select Image",isOpen:!0,onClose:o,dontCloseOnOverlayClick:!0,w:"100%",h:"90vh",children:(0,i.jsx)(c.g,{justifyContent:"flex-start",alignItems:"flex-start",w:"100%",height:"60vh",pos:"relative",overflowY:"auto",px:"0.5rem",children:0==t.length?(0,i.jsx)(r.U,{w:"100%",justifyContent:"center",children:(0,i.jsx)(m.$,{size:"xl"})}):t.map((e=>(0,i.jsx)(T,{id:e.id,image:e.image,onClick:()=>{n(e)},mb:4},e.id)))})})};var E=n(41160);const I=e=>{let{children:t}=e;return(0,i.jsxs)(r.U,{justifyContent:"flex-start",alignItems:"center",m:"0px !important",mb:"1rem !important",children:[(0,i.jsx)(u.gJy,{color:"#e53e3e"}),"\xa0",(0,i.jsx)(l.x,{as:"div",color:"#e53e3e",children:t})]})},O=e=>{let{fonts:t,isLoading:n,data:l,templateData:u,showWatermark:p,width:g,onFiltersUpdated:m,filterEnabled:f}=e;const x=(0,h.useRef)(null),w=(0,s.S)(g||{base:0}),[b,y]=(0,h.useState)(),[j,S]=(0,h.useState)(),[T,O]=(0,h.useState)(),[_,Z]=(0,h.useState)(null);(0,h.useEffect)((()=>{}),[b]),(0,h.useEffect)((()=>{l&&u?(S(!0),O(void 0),(0,v.d1)(l,u,t,p,w,_).then((e=>{S(!1),y(e)})).catch((e=>{S(!1),O(e.message)}))):u||(S(!0),y(""))}),[l,u,p,w,_,t]);const[M,D]=(0,h.useState)(),[F,A]=(0,h.useState)(),[N,P]=(0,h.useState)(),[z,Y]=(0,h.useState)(),[L,B]=(0,h.useState)(),U=e=>{D(null),P(null),Y(null),A(null)},J=e=>{const t=e.target;if(t)if(t.hasAttribute("data-click-element-id")&&!_){((e,t)=>{if(f)if(e.includes(",")){const i=e.split(","),o=[];for(var n=0;n<i.length;n++){const e=i[n];if(0==n)o.push({id:e,image:t});else{const t=document.getElementById(e);if(t){const n=t.getAttribute("xlink:href");o.push({id:e,image:n})}}}B(o)}else D(e),A(t),e&&(null===u||void 0===u?void 0:u.masks)&&(null===u||void 0===u?void 0:u.masks[e])&&Y(u.masks[e].args)})(t.getAttribute("data-click-element-id"),t.getAttribute("xlink:href"))}else if(["softbaker-button-background","softbaker-button-text"].includes(t.getAttribute("id"))){if(m&&_){const e=document.querySelector("[data-svg-id='".concat(Object.keys(_)[0],"']"));if(!e)return;const t=e.getAttribute("data-degree");if(void 0!=t){var n,i;const e=Number(t),o=((null===u||void 0===u?void 0:u.masks)||{})[Object.keys(_)[0]]||{},a={...o,ImageTransform:{filter_id:(null===o||void 0===o||null===(n=o.ImageTransform)||void 0===n?void 0:n.filter_id)||"",args:{...(null===o||void 0===o||null===(i=o.ImageTransform)||void 0===i?void 0:i.args)||{},rotationAngle:e}}};m({...(null===u||void 0===u?void 0:u.masks)||{},[Object.keys(_)[0]]:a})}Z(null)}}else["softbaker-cancel-background","softbaker-cancel-text"].includes(t.getAttribute("id"))&&Z(null)},R=e=>{const t=e.target;"softbaker-slider-handle"===t.getAttribute("id")&&t.setAttribute("data-rotating","1")},H=()=>{const e=document.getElementById("softbaker-slider-handle");e&&e.setAttribute("data-rotating","0")},W=e=>{const t=document.getElementById("softbaker-slider-track");if(t&&_&&"softbaker-slider-handle"===e.target.getAttribute("id")){if(!("1"===e.target.getAttribute("data-rotating")))return;const n=t.getBoundingClientRect(),i=t.getBBox(),o=Math.min(Math.max(e.clientX-n.left,0),n.width);e.target.setAttribute("cx","".concat(i.x+o));const a=o/n.width*360;if(Object.keys(_)[0]){const e=document.querySelector("[data-svg-id='".concat(Object.keys(_)[0],"']"));if(!e)return;const t=parseFloat(e.getAttribute("x")||0),n=parseFloat(e.getAttribute("y")||0),i=parseFloat(e.getAttribute("width")||0),o=parseFloat(e.getAttribute("height")||0),r=(0,v.au)(a,t,n,i,o);e.setAttribute("transform",r),e.setAttribute("data-degree","".concat(a))}}};return(0,h.useEffect)((()=>{const e=x.current;return e&&(e.addEventListener("click",J),e.addEventListener("mousedown",R),e.addEventListener("mouseup",H),e.addEventListener("mousemove",W)),()=>{e&&(e.removeEventListener("click",J),e.removeEventListener("mousedown",R),e.removeEventListener("mouseup",H),e.removeEventListener("mousemove",W))}}),[b,u,l,_,f]),(0,i.jsx)(E.Z,{disableDrag:null!=_,width:"100%",message:"Drag around to view the whole tool",height:{base:500,md:728,lg:1024},children:(0,i.jsxs)(d.xu,{id:"AirlineDocWrapper",pos:"relative",w:"100%",children:[b?(0,i.jsx)(d.xu,{ref:x,w:"100%",h:"100%",dangerouslySetInnerHTML:{__html:b}}):null,_?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.U,{pos:"absolute",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1",bg:"#dfdfdf",opacity:"0.7",justifyContent:"flex-start",pl:{base:"0px",md:"0px"},alignItems:"center",display:j||n?"flex":"none",w:"100%",h:"100%",children:(0,i.jsx)(o.Z,{type:o.Z.TYPES.grid,color:(0,a.Z)("colorAccent.light","colorAccent.dark"),size:"70px"})}),(0,i.jsx)(c.g,{pos:"absolute",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1",bg:"#fff",opacity:"0.7",justifyContent:"center",pl:"1rem",alignItems:"flex-start",display:T?"flex":"none",w:"100%",h:"100%",children:T?(0,i.jsx)(I,{children:(q=T,(null===q||void 0===q?void 0:q.message)?q.message:q)}):null})]}),L?(0,i.jsx)(C,{images:L,onClose:()=>{B(void 0)},onSelected:e=>{D(e.id),A(e.image),e.id&&(null===u||void 0===u?void 0:u.masks)&&(null===u||void 0===u||u.masks[e.id]),B(void 0)}}):M&&m?(0,i.jsx)(k,{filterElementId:M,title:"".concat(M||""," filter"),filters:((null===u||void 0===u?void 0:u.masks)||{})[M]||{},isOpen:!0,onClose:()=>{U()},onComplete:e=>{m({...(null===u||void 0===u?void 0:u.masks)||{},[M]:e})},onShowSvgArgsInput:(e,t)=>{Z({[e]:{[t.filter_id]:t}}),U()}}):null]})});var q};O.getSvg=v.d1;var _=O},74054:function(e,t,n){"use strict";var i=n(67294),o=n(36024);t.Z=(e,t,n,a)=>{const[r,l]=(0,i.useState)(),[s,d]=(0,i.useState)();(0,i.useEffect)((()=>{const{newFieldString:i,newCurrentTemplateId:c,defaultFieldsData:u}=(0,o.yO)(e,n,a,r,s);i&&l(i),c&&d(c),u&&t&&t(u)}),[n,e,t,a])}},83613:function(e,t,n){"use strict";var i=n(67294),o=n(36024),a=n(25723),r=n(73391);t.Z=e=>{const[t,n]=(0,i.useState)(),[l,s]=(0,i.useState)(),[d,c]=(0,i.useState)(),{user:u}=(0,r.P)(),[h,p]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{e&&(0,o.fY)(e).then((async e=>{c(e)})).catch((e=>{n(e.message)}))}),[e]),(0,i.useEffect)((()=>{d&&(0,o.Xx)(d,["ttf","otf","woff","woff2","eot","svg"]).then((e=>{s({...l,...e}),p(!1)})).catch((e=>{n(e.message),p(!1)}))}),[d]),{loadingFonts:h,error:t,fonts:l,setFonts:s,uploadFonts:e=>new Promise((async(t,n)=>{if(l){e&&e("Preparing fonts for upload...");const i=[];for(const e of Object.values(l))!e.url&&e.file&&i.push({id:e.id,file:e.file,fileName:"".concat((0,o.vq)(e.id),".").concat(e.ext),dir:"fonts"});if(i.length>0){if(!u)return e&&e("Sign In Requred..."),n(new Error("Please sign in"));e&&e("Uploading fonts..."),(0,a.dq)(u,i,"https://r2.softbaker.com/").then((a=>{const r={...l},d={};a.forEach((e=>{if((0,o.N4)(e.error))r[e.id].url=e.url;else{const t=new Error(e.error);r[e.id].readError=t.message,d[e.id]=t.message}})),Object.keys(d).length==i.length?(e&&e('Fonts upload failed with the error, "'.concat(JSON.stringify(d),'"...')),n(new Error("The font(s) failed to upload: ".concat(JSON.stringify(d))))):Object.keys(d).length>0?(s(r),e&&e('Fonts upload failed with the error, "'.concat(JSON.stringify(d),'"...')),n(new Error("Some or all fonts failed to upload: ".concat(JSON.stringify(d))))):(s(r),e&&e("Fonts uploaded..."),t(l))})).catch((t=>{e&&e('Fonts upload failed with the error, "'.concat(t.message,'"...')),n(t)}))}else e&&e("No font to Prepare for upload..."),t({})}else e&&e("No fonts to upload..."),t(null)}))}}},87123:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(67294),o=n(36024),a=n(87066),r=n(25723),l=n(53754);n(48764).Buffer;function s(e,t){const[n,i]=t.split(","),a=n.match(/data:(.*?);base64/);if(!a)throw new Error("Invalid base64 data format");const r=a[1],l=atob(i),s=l.length,d=new Uint8Array(s);for(let o=0;o<s;o++)d[o]=l.charCodeAt(o);const c=new Blob([d],{type:r}),u="".concat((0,o.vq)(e),".").concat(r.split("/")[1]);return{id:e,image:new File([c],u,{type:r})}}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data.json";const n=JSON.stringify(e,null,2),i=new Blob([n],{type:"application/json"}),o=new File([i],t,{type:"application/json"});return o}function c(e,t){return!(!e||!t)&&((0,o.Ri)(e)&&(0,o.zD)(e).toLowerCase()===(0,o.zD)(t).toLowerCase())}const u=async(e,t,n,i,o)=>{const a=await(0,r.dq)(e,t,"https://r2.softbaker.com/"),s=[...n],d=[],c=[],h=[];return a.forEach((e=>{(0,l.N4)(e.error)?(s.push(e),d.push(e.id)):(o&&o("Failed to upload file with error, ".concat(e.error||"",". Would be retried later."),e.id,!0),c.push(e))})),t.forEach((e=>{d.includes(e.id)||h.push(e)})),h.length>0?i?(o&&o("Failed files upload retry stopped for ".concat(h.length," files.")),[...s,...c]):(o&&o("Sleeping for 5 seconds to retry ".concat(h.length," failed file uploads. Make sure you're connected to the internet....")),await(0,r._v)(5e3),o&&o("Resuming program to retry the ".concat(h.length," failed file uploads. Make sure you're connected to the internet...")),u(e,h,s,h.length==t.length,o)):s};var h=n(73391);var p=(e,t)=>{const{user:n}=(0,h.P)(),[p,g]=(0,i.useState)(),[m,f]=(0,i.useState)(),[v,x]=(0,i.useState)({}),[w,b]=(0,i.useState)(!1),[y,j]=(0,i.useState)(!1),[S,k]=(0,i.useState)(!1),[T,C]=(0,i.useState)(),[E,I]=(0,i.useState)(),[O,_]=(0,i.useState)(),[Z,M]=(0,i.useState)(),[D,F]=(0,i.useState)(),[A,N]=(0,i.useState)(),[P,z]=(0,i.useState)();(0,i.useEffect)((()=>{}),[A]);const Y=e=>{if(!e)return null;var t=e.split("-")[1];return t?t.split(".")[0].trim():null},L=e=>{if(1==Object.keys(e).length)return Object.keys(e)[0];for(const t of Object.values(e))if(t.is_default)return t.id;return Object.keys(e)[0]};(0,i.useEffect)((()=>{const t=Y(e);e&&e!=p&&t?(g(e),b(!0),C(null),f(null),x({}),_(null),M(null),F(null),N(null),a.Z.get(e).then((e=>{f(t),x((0,o.Dn)(e.data)),b(!1)})).catch((e=>{C(e.message),b(!1)}))):e||(g(null),b(!1),C(null),f(null),x({}),_(null),M(null),F(null),N(null))}),[e]),(0,i.useEffect)((()=>{!t&&v&&Object.keys(v).length>0&&!O&&U(L(v))}),[v]);const B=(e,t)=>{a.Z.get(e.data_url).then((t=>{F({...e}),N({...t.data}),_({...e}),M({...t.data}),j(!1)})).catch((n=>{!t||(t||0)<3?B(e,(t||0)+1):(I(n.message),j(!1))}))},U=(e,t)=>{t&&t&&z(e);const n=v[e];n&&!(0,l.N4)(n.data_url)&&(j(!0),I(null),B(n))},J=(e,t)=>{F(e),N(t)};return{templatesLoading:w,templatesError:T,selectedTemplateLoading:y,selectedTemplateError:E,parsingTemplate:S,templates:v,selectedTemplate:O,selectedTemplateData:Z,workingTemplate:D,workingTemplateData:A,setAsDefaulTemplate:e=>{if(D&&(F({...D,is_default:e}),e&&Object.keys(v).length>1)){for(const e of Object.keys(v))e!=D.id&&(v[e].is_default=!1);x(v)}},setWorkingTemplate:F,setWorkingTemplateData:N,selectTemplate:U,parseTemplateSvg:(e,t)=>(k(!0),new Promise(((n,i)=>{(0,o.xz)(e).then((e=>{if(console.log("parsedSvg2:result.ok!!!: ",e),e){var a=O,r=Z;t&&(a=null,r=null),(0,o.s7)(e,r).then((e=>{const t={id:(null===a||void 0===a?void 0:a.id)||(0,o.Bu)(8),name:(null===a||void 0===a?void 0:a.name)||"",logo:(null===a||void 0===a?void 0:a.logo)||"",data_url:(null===a||void 0===a?void 0:a.data_url)||"",is_default:(null===a||void 0===a?void 0:a.is_default)||!1,split_on_download:(null===a||void 0===a?void 0:a.split_on_download)||!1,split_on_download_hr:(null===a||void 0===a?void 0:a.split_on_download_hr)||!1};F(t),N(e),k(!1),n({template:t,templateData:e})})).catch((e=>{k(!1),i(e)}))}else k(!1),n(null)})).catch((e=>{k(!1),i(e)}))}))),saveTemplate:e=>new Promise(((t,i)=>n?D&&A?void((e,t,n,i,a,h,p,g,m,f)=>{console.log("uploadTemplates: ","toolId",t,"templates",n,"template",i,"templateData",a,"oldTemplate",h,"oldTemplateData",p,"oldTemplatesUrl",g);const v=(e,t)=>{f&&f(e,t)},x=e=>{v(e,0)};return new Promise((async(f,w)=>{try{v("Template assets upload started...");const T=[];if(i.id||T.push("ID is missing in the template"),i.name||T.push("Please provide the template's name"),i.logo||T.push("Please provide the template's logo"),T.length>0)return w(new Error(T.join("\n")));const C=i.id;if((null===h||void 0===h?void 0:h.logo)&&(0,o.Ri)(h.logo)&&(0,o.zI)(i.logo)){const e=h.logo,t=await(0,o.tY)(e,!0);t&&(0,o.pu)(t,i.logo)&&(i.logo=h.logo)}v("Stacking template images and logo to upload...");const E=[];for(const[e,n]of Object.entries(a.images))if((0,o.zI)(n)){const{image:i}=s(e,n);E.push({id:e,file:i,fileName:"templates-".concat(t,"-").concat(C,"-").concat((0,o.vq)(e),"-image.").concat((0,r.tD)(i.name).ext),dir:"templates"})}const I="templates-".concat(t,"-").concat(C,"-logo");if((0,o.zI)(i.logo)){const e=s(I,i.logo);E.push({id:I,file:e.image,fileName:"".concat(I,".").concat((0,r.tD)(e.image.name).ext),dir:"templates"})}v("Uploading template images and logo...");const O=await u(e,E,[],!1,x),_={};var b=null,y=null;v("Linking template images IDs and logo to the uploaded images..."),O.forEach((e=>{(0,l.N4)(e.error)?e.id!=I?_[e.id]=e.url:b=e.url:(y=new Error(e.error),v('The image, "'.concat(e.id,"\" failed to upload. Please make sure you're connected to the internet.")))}));for(const[e,t]of Object.entries(_))p&&(0,o.gJ)(e,p.images)&&c((0,o.gJ)(e,p.images),t)?a.images[e]=(0,o._P)((0,o.gJ)(e,p.images)):a.images[e]=t;if(b&&((null===h||void 0===h?void 0:h.logo)&&c(h.logo,b)?i.logo=(0,o._P)(h.logo):i.logo=b),m&&m(i,a),y)return w(y);var j=null;if(v("Checking if any changes need to be written to the template data file..."),a.svg!=(null===p||void 0===p?void 0:p.svg)||JSON.stringify(a.fields||{})!=JSON.stringify((null===p||void 0===p?void 0:p.fields)||{})||JSON.stringify(a.images||{})!=JSON.stringify((null===p||void 0===p?void 0:p.images)||{})||JSON.stringify(a.masks||{})!=JSON.stringify((null===p||void 0===p?void 0:p.masks)||{})||JSON.stringify(a.cssActions||{})!=JSON.stringify((null===p||void 0===p?void 0:p.cssActions)||{})){v("Uploading the template data file with the changes made...");const n=d(a),i="templates-".concat(t,"-").concat(C,"-data");if(j=await u(e,[{id:i,file:n,fileName:"".concat(i,".").concat((0,r.tD)(n.name).ext),dir:"templates"}],[],!1,x),!(0,l.N4)(j[0].error))return w(new Error(j[0].error))}var S=null;if(i.name!==(null===h||void 0===h?void 0:h.name)||i.logo!==(null===h||void 0===h?void 0:h.logo)||i.is_default!==(null===h||void 0===h?void 0:h.is_default)||i.split_on_download!==(null===h||void 0===h?void 0:h.split_on_download)||i.split_on_download_hr!==(null===h||void 0===h?void 0:h.split_on_download_hr)||j){j&&((null===h||void 0===h?void 0:h.data_url)&&c(h.data_url,j[0].url)?i.data_url=(0,o._P)(h.data_url):i.data_url=j[0].url,m&&m(i,a)),v("Updating the the tool's template list data file with the new template's data...");const s=d({...n,[C]:i}),p="templates-".concat(t);if(S=await u(e,[{id:p,file:s,fileName:"".concat(p,".").concat((0,r.tD)(s.name).ext),dir:"templates"}],[],!1,x),!(0,l.N4)(S[0].error))return w(new Error(S[0].error))}var k=S?S[0].url:null;g&&k&&c(g,k)?(k=(0,o._P)(g),v("Template updated with no error \u2714\u2714"),f(k)):g?(v("No changes found in the template."),f(null)):(v("Template created with no error \u2714\u2714"),f(k))}catch(T){w(T)}}))})(n,m||(0,o.Bu)(8),v,D,A,O,Z,p,J,e).then((e=>{if(e){g(e);const t=Y(e);f(t),x({...v,[D.id]:D}),_(D),M(A),F(D),N(A)}t(e)})).catch(i):i(new Error("No template provided yet.")):i(new Error("Please sign in")))),deleteTemplate:e=>{Object.keys(v).includes(e)||(null===D||void 0===D?void 0:D.id)!=e||U(L(v))},getDefaultTemplateId:L,currentTemplateId:P}}},467:function(e,t,n){"use strict";n.d(t,{Z9:function(){return o},eh:function(){return a},mP:function(){return i}});const i={newData:"New Tool",noDataError:"No Tool selected",newTitle:"Tool Type",updateTitle:"Update Cost",updateMessage:"The update will cost you {PRICE}.",freeTitle:"Test Tool(Free).",freeMessage:"The downloaded Tool will have watermark.",paidTitle:"Clean Tool({PRICE})",paidMessage:"The downloaded Tool will be clean with no watermark.",signInMessage:"Please sign in to save your Tool.",signUpMessage:"Please sign up to save your Tool.",createButtonText:"Create Tool",noChatToListMessage:"Your Tool will show here",deleteWarning:"Are you sure you want to permanently delete this already saved tool?"},o=["text","textarea","text_select","gen","defgen","checkbox","date"],a=[...o,"image_select","faceshot","qrcode"]},75863:function(e,t,n){"use strict";var i=n(85893),o=n(51857),a=n.n(o),r=n(34292),l=n(57747),s=n(71293),d=n(85970),c=n(5418),u=n(6089),h=n(67294),p=n(94345),g=n(53754),m=n(49626);const f=e=>{let{id:t,link:n,downloadImage:o,title:a,image:d,thumbnail:c,...u}=e;return(0,i.jsxs)(r.U,{cursor:"pointer",justifyContent:"flex-start",alignItems:"flex-end",mb:4,...u,children:[(0,i.jsx)(l.xu,{as:"image",w:"40px",h:"40px",backgroundColor:"#dfdfdf",style:{backgroundImage:"url(".concat(c,")")},backgroundRepeat:"no-repeat",backgroundSize:"cover"}),(0,i.jsx)(s.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:a})]})};t.Z=e=>{let{title:t,helperText:n,info:o,textTransform:v,labelEndIcon:x,image:w,thumbnail:b,imageTitle:y,options:j,onChange:S,disabled:k,...T}=e;const[C,E]=(0,h.useState)(!1);return(0,i.jsxs)(l.xu,{...T,children:[(0,i.jsxs)(d.NI,{opacity:k?.4:1,cursor:k?"not-allowed":"pointer",children:[(0,i.jsxs)(r.U,{w:"100%",justifyContent:"space-between",alignItems:"center",children:[!t||(0,g.N4)(o)||k?(0,i.jsx)(c.l,{textTransform:v||"capitalize",mb:"0px",children:t}):(0,i.jsx)(m.Z,{as:c.l,info:o,textTransform:v||"capitalize",children:t}),x||null]}),(0,i.jsxs)(r.U,{className:"image-selector-button",onClick:e=>{e.preventDefault(),k||E(!0)},children:[(0,i.jsx)(l.xu,{width:"auto",height:"40px",maxWidth:"50px",bg:"#dfdfdf",children:b?(0,i.jsx)(u.E,{src:b,width:"auto",h:"40px",objectFit:"cover"}):null}),(0,i.jsx)(s.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:y})]}),(0,g.N4)(n)||k?null:(0,i.jsx)(d.Q6,{children:n})]}),(0,i.jsx)(p.Z,{title:t,isOpen:C,onClose:()=>{E(!1)},overflowY:"auto",children:(j||[]).map(((e,t)=>(0,i.jsx)(f,{...e,onClick:()=>{S(e),E(!1)}},t)))}),(0,i.jsx)(a(),{id:"95178590041dfe1a",children:".image-selector-button{width:100%;min-width:0px;outline:2px solid transparent;outline-offset:2px;position:relative;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-transition-property:var(--chakra-transition-property-common);-moz-transition-timing-function:var(--chakra-transition-property-common);-o-transition-timing-function:var(--chakra-transition-property-common);transition-property:var(--chakra-transition-property-common);-webkit-transition-duration:var(--chakra-transition-duration-normal);-moz-transition-duration:var(--chakra-transition-duration-normal);-o-transition-duration:var(--chakra-transition-duration-normal);transition-duration:var(--chakra-transition-duration-normal);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);-moz-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-10);-moz-padding-end:var(--chakra-space-10);padding-inline-end:var(--chakra-space-10);height:var(--chakra-sizes-10);-webkit-border-radius:var(--chakra-radii-md);-moz-border-radius:var(--chakra-radii-md);border-radius:var(--chakra-radii-md);border:1px solid;border-color:inherit;background:inherit}"})]})}},62122:function(e,t,n){"use strict";var i=n(85893),o=n(51857),a=n.n(o),r=n(34292),l=n(6089),s=n(71293),d=n(57747),c=n(85970),u=n(49626),h=n(36238),p=n(67294),g=n(94345),m=n(98687),f=n(55154);const v=e=>{let{id:t,name:n,logo:o,onDelete:a,...c}=e;return(0,i.jsxs)(r.U,{cursor:"pointer",justifyContent:"space-between",alignItems:"flex-end",mb:1,mx:"0.5rem",...c,children:[(0,i.jsxs)(r.U,{justifyContent:"flex-start",alignItems:"flex-end",children:[(0,i.jsx)(l.E,{src:o||"/res/svg-icon.png",w:"35px",h:"35px",borderRadius:"5px",border:"1px solid #dfdfdf"}),(0,i.jsx)(s.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:n||"No name yet"})]}),a?(0,i.jsx)(d.xu,{p:"0.5rem",onClick:()=>{a(t)},children:(0,i.jsx)(f.Xm5,{color:"#e53e3e"})}):null]})};t.Z=e=>{let{id:t,title:n,templates:o,createdTemplatesKeys:f,value:x,onChange:w,onNewTemplateSvgUploaded:b,disabled:y,errorMessage:j,info:S,helperText:k,onDelete:T,contactLink:C,...E}=e;const[I,O]=(0,p.useState)(!1),[_,Z]=(0,p.useState)(),[M,D]=(0,p.useState)([]);return(0,p.useEffect)((()=>{x&&Z(x)}),[x]),(0,i.jsxs)(d.xu,{...E,children:[(0,i.jsxs)(c.NI,{opacity:y?.4:1,cursor:y?"not-allowed":"pointer",children:[(0,i.jsx)(u.Z,{textTransform:"capitalize",info:S,children:n}),(0,i.jsxs)(r.U,{className:"image-selector-button",onClick:e=>{e.preventDefault(),y||O(!0)},children:[_?(0,i.jsx)(l.E,{src:_.logo||"/res/svg-icon.png",w:"35px",h:"35px",borderRadius:"5px",border:"1px solid #dfdfdf"}):null,(0,i.jsx)(s.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:_?_.name||"No name yet":"Select Template"})]})]}),(0,i.jsx)(h.Z,{type:h.Z.TYPES.none,helperText:k,errorMessage:j}),I?(0,i.jsxs)(g.Z,{title:n,isOpen:!0,onClose:()=>{O(!1)},children:[b?(0,i.jsx)(r.U,{children:(0,i.jsx)(m.Z,{showAsButton:!0,isOtherFiles:!0,w:"100%",id:"Form_".concat(t,"logo"),title:"Add Template",mb:4,info:"This is where you upload your SVG file to generate a template from.",helperText:"Click to select upload an SVG file to use as a template.",message:"Drag and Drop file here",hoverMessage:"Drop the file here",ruleMessage:"Make sure you're uploading a .svg file.",useImageText:"Use File",onChange:(e,t)=>{O(!1),b(e,t)}},"Form_".concat(t,"logo"))}):null,(0,i.jsxs)(d.xu,{height:"50vh",pos:"relative",overflowY:"auto",children:[Object.values(o).map(((e,t)=>(0,i.jsx)(v,{...e,onClick:()=>{O(!1),w(e)},border:x&&x.id===(null===e||void 0===e?void 0:e.id)?"1px dashed":"none",borderRadius:x&&x.id===(null===e||void 0===e?void 0:e.id)?"5px":"0px",_hover:{opacity:"0.4"},onDelete:f&&f.length>0&&!f.includes(e.id)?T:null},t))),!b&&C?(0,i.jsxs)(d.xu,{w:"100%",textAlign:"center",fontSize:"14px",pb:"0.5rem",children:[(0,i.jsx)(s.x,{as:"div",children:"Can't find the type you want?"}),(0,i.jsx)(s.x,{as:"a",href:C,target:"_blank",color:"#38a169",textDecoration:"underline",children:"Click here to tell us what you want."})]}):null]})]}):null,(0,i.jsx)(a(),{id:"42ccd62b5c30613c",children:".image-selector-button{width:100%;min-width:0px;outline:2px solid transparent;outline-offset:2px;position:relative;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-transition-property:var(--chakra-transition-property-common);-moz-transition-timing-function:var(--chakra-transition-property-common);-o-transition-timing-function:var(--chakra-transition-property-common);transition-property:var(--chakra-transition-property-common);-webkit-transition-duration:var(--chakra-transition-duration-normal);-moz-transition-duration:var(--chakra-transition-duration-normal);-o-transition-duration:var(--chakra-transition-duration-normal);transition-duration:var(--chakra-transition-duration-normal);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);-moz-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-10);-moz-padding-end:var(--chakra-space-10);padding-inline-end:var(--chakra-space-10);height:var(--chakra-sizes-10);-webkit-border-radius:var(--chakra-radii-md);-moz-border-radius:var(--chakra-radii-md);border-radius:var(--chakra-radii-md);border:1px solid;border-color:inherit;background:inherit}"})]})}},25723:function(e,t,n){"use strict";n.d(t,{_v:function(){return r},dq:function(){return l},tD:function(){return a}});var i=n(87066),o=n(11802);function a(e){const t=e.split("."),n=t.length>1&&t.pop()||"";return{name:t.join("."),ext:n}}const r=e=>new Promise((t=>setTimeout(t,e))),l=async function(e,t,n){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=[];for(const c of t){const{id:t,file:u,fileName:h,dir:p,onFileName:g}=c,{name:m,ext:f}=a(u.name),v=g?g(m,f):h||u.name;try{const a=await e.getIdToken(),r=await i.Z.post("".concat(o.Lu,"/get-presigned-url"),{id:t,fileName:v,fileType:u.type,dir:p},{headers:{Authorization:a}}),{presignedUrl:l}=r.data;if(200===(await i.Z.put(l,u,{headers:{"Content-Type":u.type}})).status){const e=n?"".concat(n).concat(n.endsWith("/")?"":"/").concat(p||"").concat((p||"").endsWith("/")?"":"/").concat(v):l.split("?")[0];s.push({id:t,url:e})}else s.push({id:t,url:"",error:"Upload failed"})}catch(d){s.push({id:t,url:"",error:d.message})}await r(l)}return s}},43535:function(){},78311:function(){},20491:function(){},51437:function(){},54675:function(){},25832:function(){},51459:function(){},32256:function(){},16299:function(){},99927:function(){}}]);