"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[687],{59501:function(e,t,n){var a=n(85893),o=n(45161),r=n(14225),i=n(34292),s=n(57747),l=n(71293),c=n(55204);t.Z=e=>{let{as:t,onClick:n,children:d,variant:g,bgColor:h,outlineColor:u,leftIcon:m,rightIcon:p,loading:x,disabled:f,...w}=e;const b=h||(0,o.ff)("colorAccent.light","colorAccent.dark"),v=u||(0,o.ff)("colorAccentDestination.light","colorAccentDestination.dark");return(0,a.jsx)(r.z,{as:t||"button",cursor:"pointer",disabled:f||x,onClick:e=>{!n||f||x||n(e)},display:"inline-flex",justifyContent:"center",alignItems:"center",p:"0px 24px",h:"48px",letterSpacing:"0.03em",textAlign:"center",borderRadius:"16px",bg:"outline"==g?"transparent":b,border:"outline"==g?"2px solid":"none",borderColor:"outline"==g?v:"transparent",color:"outline"==g?v:"#fff",boxShadow:"ghost"==g||"outline"==g?"none":"rgb(14 14 44 / 40%) 0px -1px 0px 0px inset",opacity:"ghost"==g?"0.8":"1",transition:"background-color 0.2s ease 0s, opacity 0.2s ease 0s",_hover:{opacity:"0.65",border:"none !important"},_disabled:{opacity:"0.65",cursor:"not-allowed"},...w,children:(0,a.jsxs)(i.U,{justifyContent:"center",alignItems:"center",children:[m?(0,a.jsx)(s.xu,{mr:"7px",children:m}):null,(0,a.jsx)(l.x,{as:"div",children:d}),x?(0,a.jsx)(s.xu,{as:c.g4,display:"inline",width:"20%",height:"20%",color:"#fff"}):p?(0,a.jsx)(s.xu,{ml:"7px",children:p}):null]})})}},98687:function(e,t,n){n.d(t,{Z:function(){return M}});var a=n(85893),o=n(51857),r=n.n(o),i=n(57747),s=n(85970),l=n(34292),c=n(5418),d=n(6089),g=n(71293),h=n(67294),u=n(30351),m=n(3804),p=n(35052),x=n(49626),f=n(85461),w=n(53754),b=n(82084),v=(n(72554),n(48783)),k=n(81136),j=n(49289),y=n(98924),I=n(59501);const C=async(e,t)=>{const n=await(a=e,new Promise(((e,t)=>{const n=new Image;n.addEventListener("load",(()=>e(n))),n.addEventListener("error",(e=>t(e))),n.src=a})));var a;const o=document.createElement("canvas"),r=o.getContext("2d");if(!r)throw new Error("Could not get canvas context");const i=t.width*n.width/100,s=t.height*n.height/100,l=t.x*n.width/100,c=t.y*n.height/100;return o.width=i,o.height=s,r.drawImage(n,l,c,i,s,0,0,i,s),{base64:o.toDataURL("image/png")}};var S=e=>{let{image:t,imageFile:n,imageCropArg:o,onThumb:r,onImage:s}=e;const[c,u]=(0,h.useState)(),[m,p]=(0,h.useState)(null),[x,f]=(0,h.useState)(!1);(0,h.useEffect)((()=>{t&&w()}),[t]);const w=async()=>{try{u({unit:"%",x:25,y:20,width:50,height:50})}catch(e){console.error("Error loading image:",e),s(null,null,null,e)}};return(0,a.jsx)(y.Z,{title:"Crop Image",isOpen:!0,width:"100%",height:"100%",placement:"top",onClose:()=>{s(null,null,null,null)},overflowY:"auto",children:(0,a.jsx)(v.g,{width:"100%",alignItems:"center",children:x?(0,a.jsxs)(v.g,{p:"0.5rem",width:"300px",height:"300px",pos:"relative",justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(k.$,{size:"xl",mb:2}),(0,a.jsx)(g.x,{as:"div",textAlign:"center",fontStyle:"italic",children:"Processing image. Please wait..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v.g,{border:"1px",p:"0.5rem",width:"300px",height:"300px",pos:"relative",justifyContent:"flex-start",alignItems:"center",mb:4,children:[o.sampleImage&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.U,{justifyContent:"flex-start",alignItems:"flex-end",mb:0,children:[(0,a.jsx)(d.E,{width:"auto",height:"60px",src:o.sampleImage,border:"1px dashed"}),(0,a.jsx)(g.x,{as:"div",children:"Sample Image"})]}),(0,a.jsx)(j.i,{})]}),(0,a.jsx)(b.ZP,{crop:c,onChange:(e,t)=>{t.width>5&&t.height>5&&u(t)},onComplete:(e,t)=>{p(t)},children:(0,a.jsx)(d.E,{src:t,height:"200px",width:"auto"})})]}),o.message&&(0,a.jsx)(i.xu,{children:(0,a.jsx)(g.x,{as:"div",textAlign:"center",maxWidth:"600px",children:o.message})}),(0,a.jsx)(I.Z,{onClick:async()=>{if(f(!0),m)try{const e=await C(t,m);s(null,e.base64),f(!1)}catch(e){console.error("Error cropping the image:",e),s(null,null,null,e),f(!1)}},outlineColor:"#dd6b20",children:"Submit Crop"})]})})})},T=n(65040),E=n(93717),A=n(94345),R=n(85963),F=n(11802),D=n(33939),z=n(13653);const B=["\ud83e\udde0 Applying AI magic... Step {CURRENT} of {TOTAL}. Your image's background is being removed as we speak!\ud83d\udd25","\ud83e\udde0 Applying AI magic... Step {CURRENT} of {TOTAL}. Please be patient. Nothing's broken. The background is still being removed.\ud83d\udc4c","\ud83e\udde0 Applying AI magic... Step {CURRENT} of {TOTAL}. AI does good job at tasks like this. But can be a little bit slow if your mobile phone or PC's GPU is low. Please be patient.\u270c","\ud83e\udde0 Applying AI magic... Step {CURRENT} of {TOTAL}. Hang on buddy. All is working fine. Your image's background is being removed as we speak.\ud83d\ude0d","\ud83e\udde0 Applying AI magic... Step {CURRENT} of {TOTAL}. Only step 1 takes the longest time. The remaining steps take less than a few seconds in total.\ud83d\ude80"];var U=(e,t,n)=>{const[a,o]=(0,h.useState)(),[r,i]=(0,h.useState)(),[s,l]=(0,h.useState)(),c=(0,D.Z)(5),d=()=>{if(a){const e=Date.now();!s&&a.key.includes("compute:inference")&&l(e),i(function(e,t,n,a,o){let r="";if(e.startsWith("fetch:"))r=t<n?"\ud83d\ude80 Downloading background removal tools... ".concat(Math.floor(t/n*100),"% completed. If this is your first time, this may take a bit longer. But don\u2019t worry, next time will be much faster!"):"\u2705 Tools downloaded! We're all set for quick background removal from now on.";else if(e.includes("compute:decode"))r="\ud83d\udd0d Decoding image data... Step ".concat(t," of ").concat(n,". Hang tight, we're preparing your image for background removal.");else if(e.includes("compute:inference")){const e=o-a,i=Math.floor(e/1e4)%B.length;r=B[i].replace("{CURRENT}","".concat(t)).replace("{TOTAL}","".concat(n))}else r="Wrapping up... Step ".concat(t," of ").concat(n,". Your image is being re-touched!");return r}(a.key,a.current,a.total,s||e,e))}};(0,h.useEffect)((()=>{d()}),[c]),(0,h.useEffect)((()=>{d()}),[a]);const[g,u]=(0,h.useState)({imageData:e,imageFile:t});(0,h.useEffect)((()=>{u({imageData:e,imageFile:t})}),[e,t]);const[m,p]=(0,h.useState)({publicPath:F.c9,progress:(e,t,n)=>{o({key:e,current:t,total:n}),console.info("Downloading; ".concat(e,": ").concat(t," of ").concat(n))}}),x=(e,t)=>new Promise(((n,a)=>{const o=new Image;o.src=e,o.onload=()=>{const e=document.createElement("canvas");e.width=o.width*t,e.height=o.height*t;const r=e.getContext("2d");r?(r.drawImage(o,0,0,e.width,e.height),n(e.toDataURL())):a(new Error("Failed to get canvas context"))},o.onerror=()=>{a(new Error("Failed to load image for downscaling"))}})),f=(e,t)=>new Promise(((n,a)=>{const o=new Image,r=new Image;o.src=e,r.src=t,o.onload=()=>{r.onload=()=>{const e=document.createElement("canvas");e.width=o.width,e.height=o.height;const t=e.getContext("2d");t?(t.drawImage(o,0,0,e.width,e.height),t.globalCompositeOperation="destination-in",t.drawImage(r,0,0,e.width,e.height),n(e.toDataURL())):a(new Error("Failed to get canvas context"))},r.onerror=()=>{a(new Error("Failed to load mask image"))}},o.onerror=()=>{a(new Error("Failed to load original image"))}}));return{progress:a,progressMessage:r,startBackgroundRemoval:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise(((a,o)=>{let r=Promise.resolve(e),i=e;n&&n<1&&(r=x(e,n)),r.then((e=>(0,R.X1)(e,m))).then((e=>{const n=new FileReader;n.onloadend=()=>{const e=n.result;f(i,e).then((e=>{let n;t&&(n=(0,z.g8)(e,t.name,t.type));const o={imageData:e,imageFile:n};u(o),a(o)})).catch((e=>{o(e)}))},n.onerror=()=>{o(new Error("Failed to convert blob to base64"))},n.readAsDataURL(e)})).catch((e=>{o(e)}))}))},imageState:g}},P=n(86455),Z=n.n(P),O=n(30929);var N=e=>{let{image:t,imageFile:n,onThumb:o,onImage:r,debug:i}=e;const{logger:s}=(0,O.Z)(),[l,c]=(0,h.useState)(!0),{startBackgroundRemoval:u,progress:m,progressMessage:p}=U(t,n,i),x=async(e,t)=>{let n,a;if(t&&(a=(0,z.g8)(e,t.name,t.type)),o&&a)try{n=await o(a,e)}catch(i){console.error(i)}r(a,e,n)};return(0,h.useEffect)((()=>{t&&(c(!0),(async e=>new Promise((t=>{const n=new Image;n.src=e,n.onload=()=>{const e=document.createElement("canvas"),a=e.getContext("2d");if(!a)return t(!1);e.width=n.width,e.height=n.height,a.drawImage(n,0,0);const o=a.getImageData(0,0,e.width,e.height).data,r=.15,i=[[0,0],[e.width-r*e.width,0],[0,e.height-r*e.height],[e.width-r*e.width,e.height-r*e.height]],s=(t,n)=>{const a=4*(n*e.width+t);return o[a+3]<51};let l=0;const c=.0225*e.width*e.height;for(const[t,n]of i)for(let a=0;a<r*e.width;a++)for(let o=0;o<r*e.height;o++)s(t+a,n+o)&&l++;t(l/c>.5)},n.onerror=()=>t(!1)})))(t).then((async e=>{e?(await x(t,n),c(!1)):c(!1)})).catch((e=>{s("ImageBackgroundRemover.checkImageTransparency.error:".concat(null===e||void 0===e?void 0:e.message),O.j.error),r(null,null,null,e)})))}),[t]),(0,a.jsx)(A.Z,{title:"Background Remover",isOpen:!0,width:"100%",height:"100%",onClose:()=>{r(null,null,null,null)},children:(0,a.jsxs)(v.g,{spacing:4,alignItems:"center",children:[(0,a.jsx)(d.E,{src:t,height:"250px",width:"auto",overflowY:"auto"}),m&&l&&p?(0,a.jsxs)(v.g,{w:"200px",alignItems:"center",children:[(0,a.jsx)(T.E,{value:m.current/m.total*100,width:"100%",borderRadius:"2px",hasStripe:!0,isAnimated:!0}),(0,a.jsx)(g.x,{as:"div",fontSize:"12px",textAlign:"center",fontStyle:"italic",children:p}),(0,a.jsx)(k.$,{size:"sm"})]}):l?(0,a.jsxs)(v.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",children:[(0,a.jsx)(k.$,{size:"xl",mb:2}),(0,a.jsx)(g.x,{as:"div",textAlign:"center",fontStyle:"italic",children:"Checking Image opacity. Please be patient..."})]}):(0,a.jsxs)(E.k,{w:"100%",flexDirection:{base:"column",md:"row"},justifyContent:{base:"flex-start",md:"center"},children:[(0,a.jsx)(I.Z,{fontSize:"0.7rem",bgColor:"tomato",mr:{base:"0px",md:"0.5rem"},mb:{base:"0.5rem",md:"0px"},onClick:()=>{c(!0),u().then((async e=>{s("ImageBackgroundRemover.startBackgroundRemoval.ok: ".concat(e.imageData?"resultImageData":""," ").concat(e.imageFile?"resultImageFile":""," ").concat(n?"imageFile":""),O.j.info),await x(e.imageData,e.imageFile||n),c(!1)})).catch((e=>{s("ImageBackgroundRemover.startBackgroundRemoval.error:".concat(null===e||void 0===e?void 0:e.message),O.j.error),c(!1),r(null,null,null,e)}))},children:"Remove Background"}),(0,a.jsx)(I.Z,{fontSize:"0.7rem",variant:"outline",outlineColor:"tomato",onClick:()=>{Z().fire({icon:"warning",title:"Skip Background Removal",text:"Are you sure you want to skip image background removal? If your image has a background, we recommend removing the background.",confirmButtonText:"Yes, Skip",cancelButtonText:"No",showCancelButton:!0}).then((async e=>{e.isConfirmed&&(c(!0),await x(t,n),c(!1))}))},children:"Skip Background Removal"})]})]})})},L=n(77181);var M=e=>{let{onThumb:t,accept:n,galleryKey:o,title:b,thumbnail:v,onChange:k,disableCrop:j,disabled:y,info:I,helperText:C,errorMessage:T,message:E,hoverMessage:A,ruleMessage:R,useImageText:F,maxFileSize:D,isOtherFiles:B,showAsButton:U,textTransform:P,labelEndIcon:Z,imageCropArg:M,removeBackground:Y,..._}=e;const[W,$]=(0,h.useState)(!1),[H,K]=(0,h.useState)(!1),[q,G]=(0,h.useState)(!1),[J,X]=(0,h.useState)(!1),[Q,V]=(0,h.useState)(),[ee,te]=(0,h.useState)(),[ne,ae]=(0,h.useState)(),{logger:oe}=(0,O.Z)(),re=(e,t,n,a)=>{if(t&&Q&&D&&!B){X(!0);const a=e||(0,z.g8)(t,Q.name,Q.type);(0,L.t)(a,D).then((e=>{V(e.file),te(e.base64),k(e.file,e.base64,n),X(!1)})).catch((e=>{oe("UploadInput.resizeImage.error:".concat(null===e||void 0===e?void 0:e.message),O.j.error),k(null,null,null,e),X(!1)}))}else oe("UploadInput.handleOnChange.empty",O.j.info),k(e,t,n,a)};return(0,a.jsxs)(i.xu,{..._,children:[U?(0,a.jsx)(f.Z,{status:"success",onClick:e=>{e.preventDefault(),y||J||$(!0)},children:b}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.NI,{opacity:J||y?.4:1,cursor:J||y?"not-allowed":"pointer",children:[(0,a.jsxs)(l.U,{w:"100%",justifyContent:"space-between",alignItems:"center",children:[!b||(0,w.N4)(I)||y?(0,a.jsx)(c.l,{textTransform:P||"capitalize",mb:"0px",children:b}):(0,a.jsx)(x.Z,{as:c.l,info:I,textTransform:P||"capitalize",children:b}),Z||null]}),(0,a.jsxs)(l.U,{className:"image-selector-button",onClick:e=>{e.preventDefault(),y||J||$(!0)},children:[(0,a.jsx)(i.xu,{width:"auto",height:"40px",bg:"#dfdfdf",children:!J&&v?(0,a.jsx)(d.E,{src:v,width:"auto",h:"40px",objectFit:"cover"}):null}),(0,a.jsx)(g.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontStyle:J?"italic":"normal",children:J?"Please wait...":v?"Click to change":"Click to upload"})]})]}),(0,a.jsx)(m.Z,{type:m.Z.TYPES.none,helperText:C,errorMessage:T})]}),W?(0,a.jsx)(p.Z,{galleryKey:o,title:b,message:E,onThumb:t,hoverMessage:A,ruleMessage:R,useImageText:F,maxFileSize:D,onImage:(e,t,n,a)=>{((e,t,n,a)=>{$(!1),j||B?re(e,t,n):(X(!0),M?(V(e),te(t),ae(n),K(!0)):Y?(V(e),te(t),ae(n),G(!0)):(0,u.xJ)(t).then((t=>{re(e,t,n),X(!1)})).catch((e=>{oe("UploadInput.cropImage.error:".concat(null===e||void 0===e?void 0:e.message),O.j.error),X(!1)})))})(e,t,n)},onClose:()=>{$(!1)},isOtherFiles:B,accept:n}):null,H&&ee&&M?(0,a.jsx)(S,{image:ee,imageFile:Q,imageCropArg:M,onThumb:t,onImage:(e,t,n,a)=>{e&&V(e),t&&te(t),n&&ae(n),Y&&t?(K(!1),G(!0)):(X(!1),K(!1),t?re(e,t,n):a&&re(null,null,null,a))}}):null,q&&ee&&Y?(0,a.jsx)(N,{image:ee,imageFile:Q,onThumb:t,onImage:(e,t,n,a)=>{e&&V(e),t&&te(t),n&&ae(n),X(!1),G(!1),t?re(e,t,n):a&&re(null,null,null,a)}}):null,(0,a.jsx)(r(),{id:"95178590041dfe1a",children:".image-selector-button{width:100%;min-width:0px;outline:2px solid transparent;outline-offset:2px;position:relative;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-transition-property:var(--chakra-transition-property-common);-moz-transition-timing-function:var(--chakra-transition-property-common);-o-transition-timing-function:var(--chakra-transition-property-common);transition-property:var(--chakra-transition-property-common);-webkit-transition-duration:var(--chakra-transition-duration-normal);-moz-transition-duration:var(--chakra-transition-duration-normal);-o-transition-duration:var(--chakra-transition-duration-normal);transition-duration:var(--chakra-transition-duration-normal);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);-moz-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-10);-moz-padding-end:var(--chakra-space-10);padding-inline-end:var(--chakra-space-10);height:var(--chakra-sizes-10);-webkit-border-radius:var(--chakra-radii-md);-moz-border-radius:var(--chakra-radii-md);border-radius:var(--chakra-radii-md);border:1px solid;border-color:inherit;background:inherit}"})]})}},33939:function(e,t,n){var a=n(67294);t.Z=e=>{const[t,n]=(0,a.useState)(Date.now());return(0,a.useEffect)((()=>{const t=setInterval((()=>{n(Date.now())}),e);return()=>clearInterval(t)}),[e]),t}}}]);