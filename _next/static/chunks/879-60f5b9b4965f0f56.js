"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{94345:function(e,t,n){var a=n(85893),o=n(35541),i=n(19778),r=n(14581),s=n(64859),c=n(71293),l=n(34292),d=n(57747),h=n(54346),g=n(14253),u=n(55154),f=n(96918);t.Z=e=>{let{bg:t,color:n,children:m,placement:x,onClose:p,isOpen:w,isClosable:v,title:b,footer:y,hideModeSwitch:j,noHeader:C,w:S,width:I,maxW:D,maxWidth:E,h:k,height:F,maxH:O,maxHeight:R,dontCloseOnOverlayClick:U,...z}=e;return(0,a.jsxs)(o.u_,{closeOnOverlayClick:!U,onClose:p||(()=>{}),isOpen:w,isCentered:!0,children:[(0,a.jsx)(i.Z,{}),(0,a.jsxs)(r.h,{bg:t||(0,f.Z)("cardBg.light","cardBg.dark"),color:n,minH:k||F||"50vh",maxH:O||R||"70vh",w:S||I||{base:"95%",md:"650px"},maxW:D||E,borderRadius:"16px !important",children:[C?null:(0,a.jsxs)(s.x,{borderBottomWidth:"1px",w:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(c.x,{as:"div",fontSize:{base:"1.1rem",md:"1.3rem"},textTransform:"capitalize",children:b}),(0,a.jsx)(l.U,{children:p&&(v||void 0===v)?(0,a.jsx)(d.xu,{onClick:p,cursor:"pointer",display:"block",children:(0,a.jsx)(u.aHS,{size:"24px"})}):null})]}),(0,a.jsx)(h.f,{...z,children:m}),y?(0,a.jsx)(g.m,{children:y}):null]})]})}},35052:function(e,t,n){var a=n(85893),o=n(67294),i=n(94345),r=n(85461),s=n(55154),c=n(48783),l=n(71293),d=n(34292),h=n(6089),g=n(77181),u=n(57369),f=n(13653);t.Z=e=>{let{galleryKey:t,onClose:n,onImage:m,maxFileSize:x,isOtherFiles:p,onThumb:w,title:v,message:b,hoverMessage:y,ruleMessage:j,useImageText:C,accept:S}=e;const[I,D]=(0,o.useState)(!1),[E,k]=(0,o.useState)(!1),[F,O]=(0,o.useState)(null),[R,U]=(0,o.useState)();(0,o.useEffect)((()=>{if(t){const e=(0,u.fe)(t);if(e){O(e);const t=(0,f.g8)(e);e&&U(t)}}}),[t]);const[z,L]=(0,o.useState)();return(0,o.useEffect)((()=>{R&&F&&w?w(R,F).then((e=>{L(e)})).catch((e=>{console.error("handleUseImage: ",e.message),L(void 0)})):L(F)}),[F]),(0,a.jsx)(i.Z,{title:v,isOpen:!0,onClose:()=>n(),children:(0,a.jsxs)(c.g,{p:"0.5rem",id:"upload-area",justifyContent:"center",alignItems:"center",mb:4,width:"100%",height:"300px",cursor:"pointer",border:"4px dashed ".concat(I?"#dd6b20":"#ccc"),onDragEnter:e=>{e.preventDefault(),D(!0)},onDragOver:e=>{e.preventDefault()},onDragLeave:e=>{e.preventDefault(),D(!1)},onDrop:async e=>{if(E)return;e.preventDefault(),D(!1);const t=e.dataTransfer.files;if(t.length>0){const e=new FileReader,n=t[0];e.onload=async e=>{if(x&&x>0&&!p){k(!0);const e=await(0,g.t)(n,x);O(e.base64),U(e.file),k(!1)}else{var t;const a=null===(t=e.target)||void 0===t?void 0:t.result;O(a),U(n)}},e.readAsDataURL(n)}},children:[(0,a.jsx)(s.DUB,{size:"2rem"}),(0,a.jsxs)(c.g,{alignItems:"center",children:[(0,a.jsx)(l.x,{as:"div",fontSize:"12px",children:I?y:b}),(0,a.jsx)(l.x,{as:"div",fontSize:"14px",children:"OR"}),(0,a.jsx)(r.Z,{status:"info",mb:"1rem",onClick:()=>{if(E)return;const e=document.createElement("input");e.type="file",e.accept=S||"image/*",e.click(),e.addEventListener("change",(async e=>{const t=e.target.files;if(t&&t.length>0){const e=new FileReader,n=t[0];e.onload=async e=>{if(x&&x>0&&!p){k(!0);const e=await(0,g.t)(n,x);O(e.base64),U(e.file),k(!1)}else{var t;const a=null===(t=e.target)||void 0===t?void 0:t.result;O(a),U(n)}},e.readAsDataURL(n)}}))},display:E?"none":"block",children:"Click to Upload"}),(0,a.jsxs)(l.x,{fontSize:"12px",children:["(",j,")"]}),E?(0,a.jsx)(l.x,{fontSize:"12px",fontStyle:"italic",color:"#3182ce",children:"Processing image. Please wait..."}):null,(0,a.jsx)(d.U,{justifyContent:"center",alignItems:"flex-end",flexWrap:"wrap",children:F&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.E,{src:z||"",bg:"#cfcfcf",width:"auto",height:"70px",border:"4px ridge #dd6b20"}),(0,a.jsx)(r.Z,{status:"warning",h:"70px",onClick:()=>{m(R,F,z)},children:C})]})})]})]})})}},13653:function(e,t,n){function a(e){return new Promise(((t,n)=>{const a=new Image;a.onload=()=>{t({width:a.width,height:a.height})},a.onerror=e=>{n(new Error("Failed to load image: ".concat(e)))},a.src=e}))}async function o(e,t){return new Promise(((n,a)=>{const o=new Image;o.onload=()=>{const e=o.width/o.height,i=t/e,r=document.createElement("canvas");r.width=t,r.height=i;const s=r.getContext("2d");if(s){s.drawImage(o,0,0,t,i);const e=r.toDataURL("image/png");n(e)}else a(new Error("Failed to get canvas context"))},o.onerror=e=>{a(new Error("Failed to load image: ".concat(e)))},o.src=e}))}function i(e,t,n){var a;const[o,i]=e.split(",");if(n=n||(null===(a=o.match(/:(.*?);/))||void 0===a?void 0:a[1]),!t){const e=(null===n||void 0===n?void 0:n.split("/")[1])||"bin";t="file_".concat(Date.now(),".").concat(e)}const r=window.atob(i),s=r.length,c=new Uint8Array(s);for(let d=0;d<s;d++)c[d]=r.charCodeAt(d);const l=new Blob([c],{type:n});return new File([l],t,{type:n})}n.d(t,{g8:function(){return i},gu:function(){return o},pz:function(){return a}})},57369:function(e,t,n){n.d(t,{OL:function(){return i},fe:function(){return o},ht:function(){return a}});const a={faceshot:"SOFTBAKER_FACESHOT"},o=e=>localStorage.getItem(e),i=e=>{((e,t)=>{try{localStorage.setItem(e,t)}catch(n){try{localStorage.clear(),localStorage.setItem(e,t)}catch(n){}}})(a.faceshot,e)}},77181:function(e,t,n){n.d(t,{t:function(){return a}});const a=async(e,t)=>new Promise(((n,a)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=async a=>{var o;const i=new Image;i.src=null===(o=a.target)||void 0===o?void 0:o.result,i.onload=()=>{const a=document.createElement("canvas"),o=a.getContext("2d");a.width=i.width,a.height=i.height,o.drawImage(i,0,0);const r=o.getImageData(0,0,a.width,a.height).data.length/(a.width*a.height),s=t/r,c=Math.sqrt(s);let l,d;i.width>=i.height?(l=c,d=i.height*(c/i.width)):(d=c,l=i.width*(c/i.height)),a.width=l,a.height=d,o.drawImage(i,0,0,l,d),a.toBlob((t=>{if(t){const o=new File([t],e.name,{type:e.type});n({base64:a.toDataURL(),file:o})}}),e.type)}},o.onerror=e=>a(e)}))}}]);