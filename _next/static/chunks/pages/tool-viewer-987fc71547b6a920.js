(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{89879:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tool-viewer",function(){return o(40030)}])},34365:function(e,t,o){"use strict";o.d(t,{Iu:function(){return a},Qj:function(){return n},Yg:function(){return i},bA:function(){return l},e3:function(){return d},h$:function(){return s}});const n=(e,t,o,n)=>0==e?0:(e=e*t/o,n?parseFloat(e.toFixed(n)):Math.ceil(e)),i=(e,t,o,n)=>0==e?0:(e=e*t/o,n?parseFloat(e.toFixed(n)):Math.ceil(e)),a=(e,t,o,a,l,s)=>"translate(".concat(n(e,o,a,3)," ").concat(i(t,l,s,3),") "),l=(e,t,o,a,l,s)=>"scale(".concat(n(e,o,a,3)," ").concat(i(t,l,s,3),") ");const s=e=>e?Array.isArray(e)?e:"object"==typeof e?function(e){const t=[];return Object.keys(e).sort(((e,t)=>parseInt("".concat(e))-parseInt("".concat(t)))).forEach((o=>{t.push(e[o])})),t}(e):[]:[],d=(e,t)=>{if(!t)return e;var o="".concat(t.replace(/\n/g,"%0A")).replace(/[ ]/g,"%20");return e.split("?")[0]+"?text=".concat(o)}},99020:function(e,t,o){"use strict";var n=o(85893),i=o(55154),a=o(85461),l=o(94345),s=o(48783),d=o(59501);t.Z=e=>{let{title:t,children:o,onDownloadButtonClick:r,downloadFormats:c,onFormatSelected:u,showDownloadFormatOptions:m,setShowDownloadFormatOptions:p,hideButton:f,...h}=e;return(0,n.jsxs)(n.Fragment,{children:[f?null:(0,n.jsx)(a.Z,{rightIcon:(0,n.jsx)(i.ZJh,{}),...h,onClick:()=>{1==c.length?u(c[0]):r()&&p(!0)},children:o}),m?(0,n.jsx)(l.Z,{justifyContent:"flex-start",alignItems:"center",title:t||"Select Format",isOpen:!0,onClose:()=>{p(!1)},children:(0,n.jsx)(s.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",children:c.map(((e,t)=>(0,n.jsx)(d.Z,{w:"100%",mb:2,status:"warning",onClick:()=>{u(e),p(!1)},children:e.title},t)))})}):null]})}},40030:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return te}});var n=o(85893),i=o(5397),a=o(67294),l=o(71293),s=o(7963),d=o(48783),r=o(34292),c=o(57747),u=o(93717),m=o(70959),p=o(44461),f=o(24124),h=o(84028),v=o(90889),g=o(67918),w=o(85461),x=o(56691),_=o(86455),y=o.n(_),T=o(53754),b=o(80419),j=o(55154),I=o(11802),D=o(96918),k=o(73386),S=o(21344),E=o(41160),C=o(34365),N=o(33775),O=o(62122),P=o(38118),F=o(40249),Z=o(34346),L=o(92709),A=o(99020),M=o(83613),W=o(74054),B=o(81058),K=o(65380),U=o(36024);const Y=(e,t)=>{if(!e)return[];const o=[];for(const[n,i]of Object.entries(e)){const{name:a,type:l}=(0,U.py)(n),{directive:s}=(0,U.mA)(a||"");s&&o.push((0,U.OL)(n,i,e,t))}return o};var z=e=>{let{tool:t,templatesResults:o,data:i,isNew:_,onUpdateData:z,onPublishData:J,saving:R,setSaving:V,hasPendingSave:H,collectionName:X,publishTexts:Q,initData:q}=e;if(!i)return null;const G=(0,s.p)(),{user:$,sdkConfig:ee}=(0,N.Pd)(),[te,oe]=(0,a.useState)(!1),[ne,ie]=(0,a.useState)(!1),{templatesLoading:ae,templatesError:le,selectedTemplateLoading:se,selectedTemplateError:de,parsingTemplate:re,templates:ce,selectedTemplate:ue,selectedTemplateData:me,workingTemplate:pe,workingTemplateData:fe,setAsDefaulTemplate:he,setWorkingTemplate:ve,setWorkingTemplateData:ge,selectTemplate:we,parseTemplateSvg:xe,saveTemplate:_e,getDefaultTemplateId:ye,currentTemplateId:Te}=o||{},{error:be,fonts:je,setFonts:Ie,uploadFonts:De}=(0,M.Z)(null===me||void 0===me?void 0:me.svg),[ke,Se]=(0,a.useState)({}),[Ee,Ce]=(0,a.useState)(!0),[Ne,Oe]=(0,a.useState)(!1),[Pe,Fe]=(0,a.useState)(),[Ze,Le]=(0,a.useState)(),[Ae,Me]=(0,a.useState)();(0,a.useEffect)((()=>{(null===ue||void 0===ue?void 0:ue.split_on_download)&&!Ae?Me("front"):(null===ue||void 0===ue?void 0:ue.split_on_download_hr)&&!Ae&&Me("front_hr")}),[null===ue||void 0===ue?void 0:ue.split_on_download,null===ue||void 0===ue?void 0:ue.split_on_download_hr]);(0,W.Z)(i,(e=>{_&&q&&q(e)}),null===me||void 0===me?void 0:me.fields,Te),(0,a.useEffect)((()=>{}),[i]);const We=e=>e.includes("faceshot")?"passport photograph.":e.includes("sign")?"signature":"image",Be=(e,t,o)=>new Promise(((n,i)=>{if(t)if((0,T.VT)("other_tools_data",o,e))Se({...ke,[e]:""}),n(null);else{const t=We(e);n("".concat(e,":The ").concat(t," was not found on this browser. Please provide the ").concat(t," again."))}else{n("".concat(e,":Invalid ").concat(We(e)))}})),Ke=async(e,o,n)=>{if(te||!me)return;if(!$)return;const i=[];for(const t of Object.keys(e))(t.endsWith(".sign")||t.endsWith(".faceshot"))&&i.push(Be(t,e[t],e.id));const a=(await Promise.all(i)).filter((e=>null!=e));if(a.length>0){const e={};for(const t of a){const o=t.split(":");e[o[0]]=o[1]}return Se({...ke,...e}),void y().fire({title:"Download Error",text:"Check your upload fields to fix some missing files affecting your download.",icon:"error"})}oe(!0);const l=!0===((null===ue||void 0===ue?void 0:ue.split_on_download)||(null===ue||void 0===ue?void 0:ue.split_on_download_hr)),s=(n=n&&!e.is_freemium)?l?2048:1024:l?1024:728;Z.Z.getSvg(e,me,je,e.is_freemium,s).then((n=>{G({description:"Your ".concat((null===t||void 0===t?void 0:t.name)||"item"," will download shortly."),status:"info",duration:4e3,isClosable:!0}),(0,U.T8)(n,o,"".concat((0,T.yZ)("".concat((null===t||void 0===t?void 0:t.name)||"item","-").concat(Y(e,null===me||void 0===me?void 0:me.fields).join("_"))),"-").concat((new Date).toISOString()),((null===ue||void 0===ue?void 0:ue.split_on_download)||(null===ue||void 0===ue?void 0:ue.split_on_download_hr))&&Ae?Ae:void 0).then((e=>{oe(!1),ie(!0),setTimeout((()=>{ie(!1)}),8e3)})).catch((e=>{oe(!1),y().fire({icon:"error",title:"Download Error",text:e.message})}))})).catch((n=>{Z.Z.downloadSvgResultFromServer($,e,o,"other_tools_data","".concat((0,T.yZ)("".concat((null===t||void 0===t?void 0:t.name)||"item","-").concat(Y(e,null===me||void 0===me?void 0:me.fields).join("_"))),"-").concat((new Date).toISOString()),((null===ue||void 0===ue?void 0:ue.split_on_download)||(null===ue||void 0===ue?void 0:ue.split_on_download_hr))&&Ae?Ae:void 0,s).then((e=>{G({description:"Your ".concat((null===t||void 0===t?void 0:t.name)||"item"," will download shortly."),status:"info",duration:4e3,isClosable:!0}),oe(!1),ie(!0),setTimeout((()=>{ie(!1)}),8e3)})).catch((e=>{oe(!1),y().fire({icon:"error",title:"Download Error",text:e.message})}))}))},[Ue,Ye]=(0,a.useState)(!1);(0,a.useEffect)((()=>{}),[ue]),(0,a.useEffect)((()=>{!_&&i&&ce&&(null===ue||void 0===ue?void 0:ue.id)!=i.template_id?we(i.template_id):_&&ce&&!ue&&we(ye(ce))}),[ce,i,_]);const ze=()=>{if(J){const e=i.template_id?void 0:{template_id:null===ue||void 0===ue?void 0:ue.id};J(!1,null,e).then((e=>{V(!1),G({description:_?(null===Q||void 0===Q?void 0:Q.saveSuccess)||"New Item successfully saved.":(null===Q||void 0===Q?void 0:Q.updateSuccess)||"Item successfully updated.",status:"success",duration:4e3,isClosable:!0}),!0===((null===ue||void 0===ue?void 0:ue.split_on_download)||(null===ue||void 0===ue?void 0:ue.split_on_download_hr))?Le(!0):Fe(!0)})).catch((e=>{V(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&y().fire({icon:"error",title:_?"Tool Creation Error":"Tool Update Error",text:e.message})}))}else V(!1)},Je=(0,a.useMemo)((()=>me?(0,n.jsx)(F.Z,{isFieldsEditMode:!1,created:!_,editableFields:((null===t||void 0===t?void 0:t.editables)||"").split(",").map((e=>e.trim())),showFieldsErrors:Ee,fields:me.fields,images:me.images,masks:me.masks,data:i,isDragable:!1,onAllFieldsDataChange:e=>{z&&z({...e||{}})},onFieldDataChange:(e,t)=>{console.log("onSettingsUpdated.3.onFieldDataChange",e,t),z&&z({id:i.id,[e]:t})},fieldDataErrorMessage:ke,onSetFieldDataErrorMessage:Se}):null),[me,_,Ee,i,z]),Re=(0,a.useMemo)((()=>{if((null===t||void 0===t?void 0:t.message)&&i.id!=I.XA){const e=function(e){const t=e.split("\n"),o={},i={};if(t.forEach((e=>{const[t,n]=e.split(" == ");"CONTENT"===t?i[t]=n:o[t]=n})),i.CONTENT){const e=i.CONTENT.replace("{LINK}",o.LINK);o.CONTENT=()=>(0,n.jsx)(l.x,{as:"div",fontSize:"13px",children:e.split(o.LINK).map(((e,t,i)=>(0,n.jsxs)(n.Fragment,{children:[e,t<i.length-1&&(0,n.jsx)(l.x,{as:"a",color:(0,K.z)("warning"),href:"".concat(o.LINK.startsWith("https://")||o.LINK.startsWith("http://")?"":"https://").concat(o.LINK),target:"_blank",fontWeight:"bold",textDecoration:"underline",children:o.LINK})]})))})}return o}(null===t||void 0===t?void 0:t.message);return(0,n.jsxs)(d.g,{children:[(0,n.jsxs)(r.U,{flexWrap:"wrap",justifyContent:"space-between",width:"100%",children:[e.ID_TITLE?(0,n.jsxs)(r.U,{flexWrap:"wrap",children:[(0,n.jsxs)(l.x,{as:"div",m:"0px !important",mr:1,children:[e.ID_TITLE,":"," "]}),(0,n.jsx)(b.Z,{fontWeight:"bold",m:"0px !important",mr:2,onCopyMessage:"".concat(e.ID_TITLE," copied."),children:i.id})]}):(0,n.jsx)(c.xu,{}),e.LINK?(0,n.jsxs)(w.Z,{as:"a",href:"".concat(e.LINK.startsWith("https://")||e.LINK.startsWith("http://")?"":"https://").concat(e.LINK),target:"_blank",bg:(0,K.z)("warning"),rightIcon:(0,n.jsx)(j.CkN,{}),children:["Visit ",e.LINK]}):(0,n.jsx)(c.xu,{})]}),e.CONTENT?e.CONTENT():null]})}return null}),[t,i]);return(0,n.jsx)(k.Z,{tool:t,maxHeaderWidth:"100%",children:(0,n.jsxs)(g.Z,{w:"100%",maxW:"100%",h:"auto",children:[i.id!=I.XA?(0,n.jsx)(n.Fragment,{children:Re}):(0,n.jsxs)(d.g,{alignItems:"flex-start",children:[(0,n.jsxs)(r.U,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",children:[(null===t||void 0===t?void 0:t.icon)?L.Z[null===t||void 0===t?void 0:t.icon].element({}):(0,n.jsx)(j.sYB,{})," ",(0,n.jsx)(l.x,{as:"div",m:"0px !important",mr:1,children:"New ".concat((null===t||void 0===t?void 0:t.name)||"Document")})]}),(0,n.jsxs)(l.x,{as:"div",fontSize:"13px",children:["Click the info icon(",(0,n.jsx)(j.DAO,{style:{display:"inline"}}),") beside each form fields for help on what to enter."]})]}),(0,n.jsx)(u.k,{w:"100%",flexWrap:"wrap",m:"15px auto",children:(0,n.jsx)(c.xu,{w:{base:"100%"},bg:"#dd6b20",p:"1rem",children:(0,n.jsxs)(c.xu,{bg:(0,D.Z)("cardBg.light","cardBg.dark"),minH:"80vh",w:"100%",p:{base:"1rem"},borderRadius:"24px",children:[(0,n.jsxs)(m.m,{isFitted:!0,variant:"enclosed",children:[(0,n.jsxs)(p.t,{mb:"1em",children:[(0,n.jsx)(f.O,{children:"Edit Mode"}),(0,n.jsx)(f.O,{children:"View Mode"})]}),(0,n.jsxs)(h.n,{children:[(0,n.jsxs)(v.x,{children:[_&&ce&&!ae&&ue&&!se?(0,n.jsx)(O.Z,{w:"100%",id:"Form_".concat(i.id,"_select_template"),title:"".concat((null===t||void 0===t?void 0:t.name)||"Document"," Type"),mb:4,helperText:"Select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),info:"This is where you select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),templates:ce,createdTemplatesKeys:Object.keys(ce),value:pe,onChange:e=>{e&&we(e.id)},onCheckInfo:()=>null,errorMessage:null,contactLink:(null===ee||void 0===ee?void 0:ee.contact_link)?(0,C.e3)(null===ee||void 0===ee?void 0:ee.contact_link,"Hello. I can't find the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," I want on softbaker.")):null},"Form_".concat(i.id,"_select_template")):null,ae||!ue||se?(0,n.jsx)(P.Z,{message:"Loading template assets. Please wait...",minH:"100px"}):(0,n.jsx)(n.Fragment,{children:Je}),(0,n.jsx)(B.Z,{my:2})]}),(0,n.jsx)(v.x,{bg:"#dcdcdc",p:"0px",children:(0,n.jsx)(E.Z,{width:"100%",message:"Drag around to view the whole tool",height:{base:500,md:728,lg:1024},pos:"relative",overflowX:"hidden",overflowY:"hidden",children:(0,n.jsx)(Z.Z,{fonts:je,isLoading:te,width:{base:512,md:728},data:i,templateData:fe,showWatermark:!!i.is_freemium})})})]})]}),(0,n.jsxs)(d.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",my:8,children:[_||0!=((null===t||void 0===t?void 0:t.editables)||"").length?(0,n.jsx)(w.Z,{status:R&&!Ue?"loading":"warning",fontStyle:R&&!Ue?"italic":"normal",disabled:R||!H||ae||!ue||se,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:async()=>{if(!J||!_e||!ue)return;V(!0);const e=(()=>{if(Se({}),null===me||void 0===me?void 0:me.fields){const e={},t=[],o=[],n={text:"provided",sign:"provided",image_upload:"uploaded",faceshot:"uploaded"};for(const a of Object.values(me.fields))if(!i[a.id]&&!["qrcode","gen","checkbox"].includes(a.type)&&(e[a.id]="No ".concat(a.name," ").concat(n[a.type]||"provided","."),t.push(a.name),o.length<2)){const{name:e,type:t}=(0,U.py)(a.id),{directive:n}=(0,U.mA)(e||"");["name","desc"].includes(n)&&o.push(a.name)}return Se(e),{all:t,compulsory:o}}return{all:[],compulsory:[]}})();e.compulsory.length>0?(V(!1),y().fire({title:"Form Entry Error",icon:"error",text:1==e.compulsory.length?"".concat(e.compulsory[0]," cannot be empty!"):"".concat(e.compulsory.join(", ")," cannot be empty.")})):e.all.length>0?(V(!1),y().fire({title:"Some fields are not provided",icon:"warning",text:1==e.all.length?"No ".concat(e.all[0]," provided! Are you sure you want to create the ").concat((null===t||void 0===t?void 0:t.name)||"item"," without it?"):"Are you sure you want to create the ".concat((null===t||void 0===t?void 0:t.name)||"item"," without providing them? The affected fields are ").concat(e.all.join(", "),"."),showCancelButton:!0,confirmButtonText:"Yes, Contine",cancelButtonText:"No"}).then((e=>{e.isConfirmed&&(V(!0),ze())}))):ze()},rightIcon:R&&!Ue?(0,n.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):null,children:R&&!Ue?"Please wait...":_?"Create ".concat((null===t||void 0===t?void 0:t.name)||"Item"):"Update ".concat((null===t||void 0===t?void 0:t.name)||"Item")}):null,!0!==((null===ue||void 0===ue?void 0:ue.split_on_download)||(null===ue||void 0===ue?void 0:ue.split_on_download_hr))?null:(0,n.jsx)(A.Z,{title:"Select Side",showDownloadFormatOptions:Ze,setShowDownloadFormatOptions:Le,status:te||R?"loading":"warning",outlined:!0,fontStyle:te||R?"italic":"normal",disabled:te||R||ae||!ue||se,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",downloadFormats:[{title:"Front Side",format:(null===ue||void 0===ue?void 0:ue.split_on_download)?"front":"front_hr"},{title:"Back Side",format:(null===ue||void 0===ue?void 0:ue.split_on_download)?"back":"back_hr"}],onDownloadButtonClick:()=>!_||(y().fire({icon:"error",title:"Download error",text:"You're yet to create the ".concat((null===t||void 0===t?void 0:t.name)||"Item",". Create the ").concat((null===t||void 0===t?void 0:t.name)||"Item"," first, then download.")}),!1),onFormatSelected:e=>{Me(e.format),Fe(!0)},rightIcon:(0,n.jsx)(j.ZJh,{}),children:te||R?"Please wait...":"Download ".concat((null===t||void 0===t?void 0:t.name)||"Item")}),(0,n.jsx)(A.Z,{hideButton:!0===((null===ue||void 0===ue?void 0:ue.split_on_download)||(null===ue||void 0===ue?void 0:ue.split_on_download_hr)),showDownloadFormatOptions:Pe,setShowDownloadFormatOptions:Fe,status:te||R?"loading":"warning",outlined:!0,fontStyle:te||R?"italic":"normal",disabled:te||R||ae||!ue||se,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",downloadFormats:[{title:"Download as JPEG image",format:"jpeg"},{title:"Download as PNG image",format:"png"},{title:"Download as PDF",format:"pdf"}],onDownloadButtonClick:()=>!_||(y().fire({icon:"error",title:"Download error",text:"You're yet to create the ".concat((null===t||void 0===t?void 0:t.name)||"Item",". Create the ").concat((null===t||void 0===t?void 0:t.name)||"Item"," first, then download.")}),!1),onFormatSelected:e=>{y().fire({icon:"info",title:"Choose Download Quality",text:'Select "High Quality" if your internet connection is fast and stable. Select "Medium Quality" if your internet connection is slow or unstable',showCancelButton:!0,confirmButtonText:"High Quality",cancelButtonText:"Medium Quality"}).then((t=>{t.isConfirmed?Ke(i,e.format,!0):Ke(i,e.format,!1)}))},rightIcon:(0,n.jsx)(j.ZJh,{}),children:te||R?"Please wait...":"Download ".concat((null===t||void 0===t?void 0:t.name)||"Item")},"formats"),ne?(0,n.jsxs)(S.Z,{status:"success",children:["Check your download folder for the downloaded ",(null===t||void 0===t?void 0:t.name)||"Item","."]}):null,i.is_freemium&&!_?(0,n.jsx)(w.Z,{status:R&&Ue?"loading":"error",fontStyle:R&&Ue?"italic":"normal",disabled:R,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:()=>{(e=>{if(!J)return;V(!0);var o=e?JSON.parse(JSON.stringify(e)):{};o.id&&delete o.id,e.is_freemium||1!=Object.keys(o).length||Ye(!0);const n=!e.is_freemium&&1==Object.keys(o).length;J(!1,e).then((e=>{V(!1),y().fire({icon:"success",title:"Success",text:n?"Watermark successfully removed.":"".concat((null===t||void 0===t?void 0:t.name)||"Item"," successfully updated.")}),Ye(!1)})).catch((e=>{V(!1),Ye(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&y().fire({icon:"error",title:"".concat((null===t||void 0===t?void 0:t.name)||"Item",_?" Creation Error":" Update Error"),text:e.message})}))})({id:i.id,is_freemium:!1})},rightIcon:R&&Ue?(0,n.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):(0,n.jsx)(j.arg,{}),children:R&&Ue?"Please wait...":"Remove Watermark"}):null]})]})})})]})})};const J=()=>({id:I.XA,authorId:"uid",is_freemium:!0}),R={newData:"New Tool",noDataError:"No Tool selected",newTitle:"Tool Type",updateTitle:"Update Cost",updateMessage:"The update will cost you {PRICE}.",freeTitle:"Test Tool(Free).",freeMessage:"The downloaded Tool will have watermark.",paidTitle:"Clean Tool({PRICE})",paidMessage:"The downloaded Tool will be clean with no watermark.",signInMessage:"Please sign in to save your Tool.",signUpMessage:"Please sign up to save your Tool.",createButtonText:"Create Tool",noChatToListMessage:"Your Tool will show here",deleteWarning:"Are you sure you want to permanently delete this already saved tool?",saveSuccess:"New Tool successfully saved.",updateSuccess:"Tool successfully updated."};var V=o(99555),H=o(53348),X=o(63183),Q=o(3683),q=o(45326),G=o(30929);const $={PE2U7P6L77EALVDK69OE:{id:"PE2U7P6L77EALVDK69OE",authorId:"8auVrrMlzXVZux5BOAEhEMJ2yMW2",createdAt:{_seconds:1734305919,_nanoseconds:914e6},name:"Flight Ticket",allow_freemium:!0,create_price:5,update_price:.1,is_static:!1,isActive:!0,is_freemium:!0,description:"Create fake flight ticket with tracking website for content creation or to prank your friends for fun",icon:"PlaneDeparture",message:"ID_TITLE == Booking Reference\nLINK == myskyroute.com\nCONTENT == Tell the person you're pranking to use the booking reference above to track the booking of this flight ticket on the {LINK} website.",editables:"enable_check_in.checkbox",isHidden:!1,templates_url:"https://r2.softbaker.com/templates/templates-wfy4fnex.json?updates=13",updatedAt:{_seconds:1734401814,_nanoseconds:961e6},rank:2,templates:[{id:"59gsmb6h",name:"All Flight Ticket",logo:"https://r2.softbaker.com/templates/templates-wfy4fnex-59gsmb6h-logo.jpeg",data_url:"https://r2.softbaker.com/templates/templates-wfy4fnex-59gsmb6h-data.json?updates=13",is_default:!1,split_on_download:!1,thumbnail:"https://r2.softbaker.com/templates/tools-wfy4fnex-59gsmb6h-thumbnail.jpg?updates=13"}]}},ee=e=>e?$[e]:null;var te=()=>{const e="other_tools_data",{logger:t}=(0,G.Z)(),o=(0,q.Z)(),{toolsById:l,getTool:s,loading:d,error:r}={toolsById:$,getTool:ee,loading:!1,error:null},[c,u]=(0,a.useState)(),[m,p]=(0,a.useState)({}),[f,h]=(0,a.useState)([]),v=(0,Q.Z)(null===m||void 0===m?void 0:m.templates_url,!0),[g,w]=(0,a.useState)();(0,a.useEffect)((()=>{var e;if(null===(e=v.selectedTemplateData)||void 0===e?void 0:e.fields){w(v.selectedTemplateData.fields);const e=[];for(const t of Object.values(v.selectedTemplateData.fields))["image_upload","sign","faceshot"].includes(t.type)&&e.push(t.id);h(e)}}),[v.selectedTemplate]),(0,a.useEffect)((()=>{t("/tool-viewer => url: ".concat(window.location.href," | query: ").concat(JSON.stringify(o||{})),G.j.info)}),[]),(0,a.useEffect)((()=>{o&&o.id,null===o||void 0===o||o.id,(null===o||void 0===o?void 0:o.id)&&u(null===o||void 0===o?void 0:o.id),t("/tool-viewer => query: ".concat(JSON.stringify(o)),G.j.info)}),[o]),(0,a.useEffect)((()=>{var o;if(l&&!d&&c){const o=s(c);o?p({...o,collectionRuleName:e}):t("/tool-viewer => No tool found with the dynamicToolsId, ".concat(c||""),G.j.error)}const n=s(c||"");t("/tool-viewer => hasToolsById: ".concat(l?"yes":"no"," | toolName: ").concat(null===(o=(l||{})[c||""])||void 0===o?void 0:o.name," | toolsLoading: ").concat(d," | toolsLoadError: ").concat(r," | dynamicToolsId: ").concat(c,"} | getTool: ").concat(JSON.stringify(n||{})," | collectionName: ").concat(e),G.j.info)}),[l,d,r,c]),(0,a.useEffect)((()=>{t("/tool-viewer => tool:: ".concat(m?JSON.stringify(m):"Null"),G.j.info)}),[m]);const x=(0,V.Z)(20),{getCurrentTimelineData:_}=x,y=(0,a.useCallback)(J,[]),[T,b]=(0,a.useState)(["is_freemium"]);(0,a.useEffect)((()=>{if((null===m||void 0===m?void 0:m.editables)&&m.editables.length>0){const e=["is_freemium"],t=((null===m||void 0===m?void 0:m.editables)||"").split(",").map((e=>e.trim()));for(const o of t)e.push(o);b(e)}}),[null===m||void 0===m?void 0:m.editables]);const j=(0,H.Z)(50,y,T,f,void 0,void 0,null,c),{selectedIsNew:I,selectedData:D,initData:k}=j,S={...R,newData:"New ".concat((null===m||void 0===m?void 0:m.name)||"item"),noDataError:"No ".concat((null===m||void 0===m?void 0:m.name)||"item"," selected"),newTitle:"".concat((null===m||void 0===m?void 0:m.name)||"Item"," Type"),freeTitle:"Test ".concat((null===m||void 0===m?void 0:m.name)||"Item","(Free)."),freeMessage:"The downloaded ".concat((null===m||void 0===m?void 0:m.name)||"Item"," will have watermark."),paidTitle:"Clean ".concat((null===m||void 0===m?void 0:m.name)||"Item","({PRICE})"),paidMessage:"The downloaded ".concat((null===m||void 0===m?void 0:m.name)||"Item"," will be clean with no watermark."),signInMessage:"Please sign in to save your ".concat((null===m||void 0===m?void 0:m.name)||"Item","."),signUpMessage:"Please sign up to save your ".concat((null===m||void 0===m?void 0:m.name)||"Item","."),createButtonText:"Create ".concat((null===m||void 0===m?void 0:m.name)||"Item"),noChatToListMessage:"Your list of ".concat((null===m||void 0===m?void 0:m.name)||"Item"," will show here"),deleteWarning:"Are you sure you want to permanently delete this already saved ".concat((null===m||void 0===m?void 0:m.name)||"Item","?"),saveSuccess:"New ".concat((null===m||void 0===m?void 0:m.name)||"Item"," successfully saved."),updateSuccess:"".concat((null===m||void 0===m?void 0:m.name)||"Item"," successfully updated.")},E=(0,X.Z)({collectionName:e,fileFields:f,toolId:c,historyProps:x,dataSourceProps:j,publishTexts:S,updatableFields:T}),{savingData:C,setSavingData:N,handleUpdateData:O,handlePublishData:F}=E,Z=(0,a.useMemo)((()=>(0,n.jsx)(z,{tool:m,initData:k,templatesResults:v,publishTexts:S,collectionName:e,isNew:I(),data:D,saving:C,setSaving:N,hasPendingSave:_((null===D||void 0===D?void 0:D.id)||"none").totalUpdates>1||I(),onUpdateData:e=>{O(e)},onPublishData:F})),[m,S,e,D,C,k,v]),L=e=>{var t,o,n;for(const[i,a]of Object.entries(e)){const{name:l,type:s}=(0,U.py)(i),{directive:d}=(0,U.mA)(l||"");if(s&&["text","textarea","text_select"].includes(s),d){const l=(0,U.OL)(i,a,e,g),s="".concat(l||"").trim().replace(/_/g," ");switch(d){case"name":t=s;break;case"desc":o=s;break;case"small":n=s}}}return{title:t,desc:o,small:n}},A=(0,a.useCallback)((e=>"PE2U7P6L77EALVDK69OE"==(null===m||void 0===m?void 0:m.id)?"".concat(e["passenger_given_name.text"]||""," ").concat(e["passenger_first_name.text"]||""):L(e).title||""),[m,g,D,v.selectedTemplateData]),M=(0,a.useCallback)((e=>"PE2U7P6L77EALVDK69OE"==(null===m||void 0===m?void 0:m.id)?e["Class.text"]||"":L(e).desc||""),[m,g,D,v.selectedTemplateData]),W=(0,a.useCallback)((e=>"PE2U7P6L77EALVDK69OE"==(null===m||void 0===m?void 0:m.id)?e["Total_Amount.text"]||"":L(e).small||""),[m,g,D,v.selectedTemplateData]);return m?(0,n.jsx)(i.Z,{tool:m,form:Z,historyProps:x,dataSourceProps:j,dataHandlerProps:E,publishTexts:S,getItemName:A,getItemDescription:M,getItemBadge:W,onOverWriteCopiedData:e=>(e=>{const t={};for(const[o,n]of Object.entries(e)){const{name:e,type:i}=(0,U.py)(o),{directive:a}=(0,U.mA)(e||"");i&&["upload"].includes(i)||a||(t[o]=n)}return{...t,is_freemium:!0}})(e)}):(0,n.jsx)(P.Z,{title:"Loading tool..."})}}},function(e){e.O(0,[400,714,847,646,48,614,630,123,29,596,162,310,908,101,15,687,106,879,774,888,179],(function(){return t=89879,e(e.s=t);var t}));var t=e.O();_N_E=t}]);