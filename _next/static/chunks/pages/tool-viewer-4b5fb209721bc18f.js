(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{89879:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tool-viewer",function(){return o(40030)}])},99020:function(e,t,o){"use strict";var a=o(85893),n=o(55154),l=o(85461),i=o(94345);t.Z=e=>{let{children:t,onDownloadButtonClick:o,downloadFormats:s,onFormatSelected:r,showDownloadFormatOptions:d,setShowDownloadFormatOptions:c,...u}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{rightIcon:(0,a.jsx)(n.ZJh,{}),...u,onClick:()=>{1==s.length?r(s[0]):o()&&c(!0)},children:t}),d?(0,a.jsx)(i.Z,{justifyContent:"flex-start",alignItems:"center",title:"Select Format",isOpen:!0,onClose:()=>{c(!1)},children:s.map(((e,t)=>(0,a.jsx)(l.Z,{mb:"1rem",status:"warning",onClick:()=>{r(e),c(!1)},children:e.title},t)))}):null]})}},40030:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return X}});var a=o(85893),n=o(5397),l=o(67294),i=o(7963),s=o(34292),r=o(71293),d=o(48783),c=o(93717),u=o(57747),m=o(70959),p=o(44461),v=o(24124),h=o(84028),f=o(90889),g=o(67918),w=o(85461),x=o(56691),y=o(86455),T=o.n(y),j=o(53754),S=o(80419),D=o(55154),b=o(11802),I=o(96918),C=o(88627),k=o(33471),_=o(21344),Z=o(41160),E=o(34365),P=o(96331),N=o(62122),F=o(38118),O=o(32033),M=o(9849),W=o(92709),A=o(99020),U=o(33871),B=o(83613);var G=e=>{let{tool:t,templatesResults:o,data:n,isNew:y,onUpdateData:G,onPublishData:L,saving:R,setSaving:Y,hasPendingSave:z,collectionName:H,publishTexts:J}=e;if(!n)return null;const V=(0,i.p)(),{user:X,sdkConfig:K}=(0,P.P)(),[q,Q]=(0,l.useState)(!1),[$,ee]=(0,l.useState)(!1),{templatesLoading:te,templatesError:oe,selectedTemplateLoading:ae,selectedTemplateError:ne,parsingTemplate:le,templates:ie,selectedTemplate:se,selectedTemplateData:re,workingTemplate:de,workingTemplateData:ce,setAsDefaulTemplate:ue,setWorkingTemplate:me,setWorkingTemplateData:pe,selectTemplate:ve,parseTemplateSvg:he,saveTemplate:fe,getDefaultTemplateId:ge}=o||{},{error:we,fonts:xe,setFonts:ye,uploadFonts:Te}=(0,B.Z)(null===se||void 0===se?void 0:se.svg),je=async(e,o)=>{if(console.info("parsedSvg.SVGG1: "),q||!re)return;console.info("parsedSvg.SVGG2: ");await Promise.all([!0]);Q(!0),M.Z.getSvg(e,re,xe,e.is_freemium,1024).then((a=>{console.info("parsedSvg.SVG2: ",a),V({description:"Your ".concat((null===t||void 0===t?void 0:t.name)||"item"," will download shortly."),status:"info",duration:4e3,isClosable:!0}),(0,k.T8)(a,o,"".concat((0,j.yZ)("".concat((null===t||void 0===t?void 0:t.name)||"item","-").concat((e=>{if(!e)return[];const t=[];for(const[o,a]of Object.entries(e)){const{name:e,type:n}=(0,U.py)(o),{directive:l}=(0,U.mA)(e||"");l&&t.push(a)}return t})(e).join("_"))),"-").concat((new Date).toISOString())).then((e=>{console.info("parsedSvg.SVGG3: "),Q(!1),ee(!0),setTimeout((()=>{ee(!1)}),8e3)})).catch((e=>{Q(!1),T().fire({icon:"error",title:"Download Error",text:e.message})}))})).catch((e=>{Q(!1),T().fire({icon:"error",title:"Download Error",text:e.message})}))},[Se,De]=(0,l.useState)(!1),[be,Ie]=(0,l.useState)({}),[Ce,ke]=(0,l.useState)(!0),[_e,Ze]=(0,l.useState)(!1),[Ee,Pe]=(0,l.useState)();(0,l.useEffect)((()=>{se&&G&&G({id:n.id,template_id:se.id})}),[se]),(0,l.useEffect)((()=>{!y&&n&&ie&&(null===se||void 0===se?void 0:se.id)!=n.template_id?ve(n.template_id):y&&ie&&!se&&ve(ge(ie))}),[ie,n,y]);const Ne=()=>{L?L(!1,null).then((e=>{Y(!1),V({description:y?(null===J||void 0===J?void 0:J.saveSuccess)||"New Item successfully saved.":(null===J||void 0===J?void 0:J.updateSuccess)||"Item successfully updated.",status:"success",duration:4e3,isClosable:!0}),Pe(!0)})).catch((e=>{Y(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&T().fire({icon:"error",title:y?"Tool Creation Error":"Tool Update Error",text:e.message})})):Y(!1)},Fe=(0,l.useMemo)((()=>re?(0,a.jsx)(O.Z,{isFieldsEditMode:!1,created:!y,showFieldsErrors:Ce,fields:re.fields,images:re.images,masks:re.masks,data:n,isDragable:!1,onAllFieldsDataChange:e=>{G&&G({id:n.id,...e||{}})},onFieldDataChange:(e,t)=>{G&&G({id:n.id,[e]:t})},fieldDataErrorMessage:be,onSetFieldDataErrorMessage:Ie}):null),[re,y,Ce,G]);return(0,a.jsx)(C.Z,{tool:t,maxHeaderWidth:"100%",children:(0,a.jsxs)(g.Z,{w:"100%",maxW:"100%",h:"auto",children:[n.id!=b.XA?(0,a.jsx)(s.U,{flexWrap:"wrap",justifyContent:"space-between",children:(0,a.jsxs)(s.U,{flexWrap:"wrap",children:[(0,a.jsxs)(r.x,{m:"0px !important",mr:1,display:"none",children:["Tracking No:"," "]}),(0,a.jsx)(S.Z,{display:"none",fontWeight:"bold",m:"0px !important",mr:2,children:n.id})]})}):(0,a.jsxs)(d.g,{alignItems:"flex-start",children:[(0,a.jsxs)(s.U,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",children:[(null===t||void 0===t?void 0:t.icon)?W.Z[t.icon].element():null," ",(0,a.jsx)(r.x,{m:"0px !important",mr:1,children:(null===J||void 0===J?void 0:J.newData)||"New Item"})]}),(0,a.jsxs)(r.x,{as:"div",fontSize:"13px",children:["Click the info icon(",(0,a.jsx)(D.DAO,{style:{display:"inline"}}),") beside each form fields for help on what to enter."]})]}),(0,a.jsx)(c.k,{w:"100%",flexWrap:"wrap",m:"15px auto",children:(0,a.jsx)(u.xu,{w:{base:"100%"},bg:"#dd6b20",p:"1rem",children:(0,a.jsxs)(u.xu,{bg:(0,I.Z)("cardBg.light","cardBg.dark"),minH:"80vh",w:"100%",p:{base:"1rem"},borderRadius:"24px",children:[(0,a.jsxs)(m.m,{isFitted:!0,variant:"enclosed",children:[(0,a.jsxs)(p.t,{mb:"1em",children:[(0,a.jsx)(v.O,{children:"Edit Mode"}),(0,a.jsx)(v.O,{children:"View Mode"})]}),(0,a.jsxs)(h.n,{children:[(0,a.jsxs)(f.x,{children:[y&&ie&&Object.keys(ie).length>1?(0,a.jsx)(N.Z,{w:"100%",id:"Form_".concat(n.id,"_select_template"),title:"".concat((null===t||void 0===t?void 0:t.name)||"Document"," Type"),mb:4,helperText:"Select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),info:"This is where you select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),templates:ie,createdTemplatesKeys:Object.keys(ie),value:de,onChange:e=>{e&&ve(e.id)},onCheckInfo:()=>null,errorMessage:null,contactLink:(null===K||void 0===K?void 0:K.contact_link)?(0,E.e3)(null===K||void 0===K?void 0:K.contact_link,"Hello. I can't find the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," I want on softbaker.")):null},"Form_".concat(n.id,"_select_template")):null,se?(0,a.jsx)(a.Fragment,{children:te||ae?(0,a.jsx)(F.Z,{message:"Loading template assets...",minH:"100px"}):Fe}):null]}),(0,a.jsx)(f.x,{bg:"#dcdcdc",p:"0px",children:(0,a.jsx)(Z.Z,{width:"100%",message:"Drag around to view the whole tool",height:{base:500,md:728,lg:1024},pos:"relative",overflowX:"hidden",overflowY:"hidden",children:(0,a.jsx)(M.Z,{isLoading:q,width:{base:512,md:728,lg:1024},data:n,templateData:ce,showWatermark:!!n.is_freemium})})})]})]}),(0,a.jsxs)(d.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",my:8,children:[y?(0,a.jsx)(w.Z,{status:R&&!Se?"loading":"warning",fontStyle:R&&!Se?"italic":"normal",disabled:R,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:async()=>{if(!L||!fe||!se)return;Y(!0);const e=(()=>{if(Ie({}),null===re||void 0===re?void 0:re.fields){const e={},t=[],o=[],a={text:"provided",sign:"provided",image_upload:"uploaded",faceshot:"uploaded"};for(const l of Object.values(re.fields))if(!n[l.id]&&"gen"!=l.type&&(e[l.id]="No ".concat(l.name," ").concat(a[l.type]||"provided","."),t.push(l.name),o.length<2)){const{name:e,type:t}=(0,U.py)(l.id),{directive:a}=(0,U.mA)(e||"");["name","desc"].includes(a)&&o.push(l.name)}return Ie(e),{all:t,compulsory:o}}return{all:[],compulsory:[]}})();e.compulsory.length>0?(Y(!1),T().fire({title:"Form Entry Error",icon:"error",text:1==e.compulsory.length?"".concat(e.compulsory[0]," cannot be empty!"):"".concat(e.compulsory.join(", ")," cannot be empty.")})):e.all.length>0?(Y(!1),T().fire({title:"Some fields are not provided",icon:"warning",text:1==e.all.length?"No ".concat(e.all[0]," provided! Are you sure you want to create the ").concat((null===t||void 0===t?void 0:t.name)||"item"," without it?"):"Are you sure you want to create the ".concat((null===t||void 0===t?void 0:t.name)||"item"," without providing them? The affected fields are ").concat(e.all.join(", "),"."),showCancelButton:!0,confirmButtonText:"Yes, Contine",cancelButtonText:"No"}).then((e=>{e.isConfirmed&&(Y(!0),Ne())}))):Ne()},rightIcon:R&&!Se?(0,a.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):null,children:R&&!Se?"Please wait...":"Create ".concat((null===t||void 0===t?void 0:t.name)||"Item")}):null,(0,a.jsx)(A.Z,{showDownloadFormatOptions:Ee,setShowDownloadFormatOptions:Pe,status:R?"loading":"warning",outlined:!0,fontStyle:R?"italic":"normal",disabled:R,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",downloadFormats:[{title:"Download as PDF",format:"pdf"},{title:"Download as JPEG",format:"jpeg"},{title:"Download as PNG",format:"png"}],onDownloadButtonClick:()=>!y||(T().fire({icon:"error",title:"Download error",text:"You're yet to create the ".concat((null===t||void 0===t?void 0:t.name)||"Item",". Create the ").concat((null===t||void 0===t?void 0:t.name)||"Item"," first, then download.")}),!1),onFormatSelected:e=>{je(n,e.format)},rightIcon:(0,a.jsx)(D.ZJh,{}),children:R?"Please wait...":"Download ".concat((null===t||void 0===t?void 0:t.name)||"Item")}),$?(0,a.jsxs)(_.Z,{status:"success",children:["Check your download folder for the downloaded ",(null===t||void 0===t?void 0:t.name)||"Item","."]}):null,n.is_freemium&&!y?(0,a.jsx)(w.Z,{status:R&&Se?"loading":"error",fontStyle:R&&Se?"italic":"normal",disabled:R,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:()=>{(e=>{if(!L)return;Y(!0);var o=e?JSON.parse(JSON.stringify(e)):{};o.id&&delete o.id,e.is_freemium||1!=Object.keys(o).length||De(!0);const a=!e.is_freemium&&1==Object.keys(o).length;L(!1,e).then((e=>{Y(!1),T().fire({icon:"success",title:"Success",text:a?"Watermark successfully removed.":"".concat((null===t||void 0===t?void 0:t.name)||"Item"," successfully updated.")}),De(!1)})).catch((e=>{Y(!1),De(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&T().fire({icon:"error",title:"".concat((null===t||void 0===t?void 0:t.name)||"Item",y?" Creation Error":" Update Error"),text:e.message})}))})({id:n.id,is_freemium:!1})},rightIcon:R&&Se?(0,a.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):(0,a.jsx)(D.arg,{}),children:R&&Se?"Please wait...":"Remove Watermark"}):null]})]})})})]})})};const L=()=>({id:b.XA,authorId:"uid",is_freemium:!0}),R={newData:"New Tool",noDataError:"No Tool selected",newTitle:"Tool Type",updateTitle:"Update Cost",updateMessage:"The update will cost you {PRICE}.",freeTitle:"Test Tool(Free).",freeMessage:"The downloaded Tool will have watermark.",paidTitle:"Clean Tool({PRICE})",paidMessage:"The downloaded Tool will be clean with no watermark.",signInMessage:"Please sign in to save your Tool.",signUpMessage:"Please sign up to save your Tool.",createButtonText:"Create Tool",noChatToListMessage:"Your Tool will show here",deleteWarning:"Are you sure you want to permanently delete this already saved tool?",saveSuccess:"New Tool successfully saved.",updateSuccess:"Tool successfully updated."};var Y=o(99555),z=o(53348),H=o(63183),J=o(3683),V=o(45326);var X=()=>{const e="other_tools_data",t=(0,V.Z)(),{sdkConfig:o,getTool:i}=(0,P.P)(),[s,r]=(0,l.useState)(),[d,c]=(0,l.useState)({}),[u,m]=(0,l.useState)([]),p=(0,J.Z)(null===d||void 0===d?void 0:d.templates_url,!0);(0,l.useEffect)((()=>{var e;if(null===(e=p.selectedTemplateData)||void 0===e?void 0:e.fields){const e=[];for(const t of Object.values(p.selectedTemplateData.fields))["image_upload","sign","faceshot"].includes(t.type)&&e.push(t.id);m(e)}}),[p.selectedTemplate]),(0,l.useEffect)((()=>{r(null===t||void 0===t?void 0:t.id)}),[t]),(0,l.useEffect)((()=>{if((null===o||void 0===o?void 0:o.tools)&&s){const t=i(s);t&&c({...t,collectionRuleName:e})}}),[o,s]);const v=(0,Y.Z)(20),{getCurrentTimelineData:h}=v,f=(0,l.useCallback)(L,[]),g=["is_freemium"],w=(0,z.Z)(50,f,g,u,void 0,void 0,null,s),{selectedIsNew:x,selectedData:y}=w,T={...R,newData:"New ".concat((null===d||void 0===d?void 0:d.name)||"item"),noDataError:"No ".concat((null===d||void 0===d?void 0:d.name)||"item"," selected"),newTitle:"".concat((null===d||void 0===d?void 0:d.name)||"Item"," Type"),freeTitle:"Test ".concat((null===d||void 0===d?void 0:d.name)||"Item","(Free)."),freeMessage:"The downloaded ".concat((null===d||void 0===d?void 0:d.name)||"Item"," will have watermark."),paidTitle:"Clean ".concat((null===d||void 0===d?void 0:d.name)||"Item","({PRICE})"),paidMessage:"The downloaded ".concat((null===d||void 0===d?void 0:d.name)||"Item"," will be clean with no watermark."),signInMessage:"Please sign in to save your ".concat((null===d||void 0===d?void 0:d.name)||"Item","."),signUpMessage:"Please sign up to save your ".concat((null===d||void 0===d?void 0:d.name)||"Item","."),createButtonText:"Create ".concat((null===d||void 0===d?void 0:d.name)||"Item"),noChatToListMessage:"Your list of ".concat((null===d||void 0===d?void 0:d.name)||"Item"," will show here"),deleteWarning:"Are you sure you want to permanently delete this already saved ".concat((null===d||void 0===d?void 0:d.name)||"Item","?"),saveSuccess:"New ".concat((null===d||void 0===d?void 0:d.name)||"Item"," successfully saved."),updateSuccess:"".concat((null===d||void 0===d?void 0:d.name)||"Item"," successfully updated.")},j=(0,H.Z)({collectionName:e,fileFields:u,toolId:s,historyProps:v,dataSourceProps:w,publishTexts:T,updatableFields:g}),{savingData:S,setSavingData:D,handleUpdateData:b,handlePublishData:I}=j,C=(0,l.useMemo)((()=>(0,a.jsx)(G,{tool:d,templatesResults:p,publishTexts:T,collectionName:e,isNew:x(),data:y,saving:S,setSaving:D,hasPendingSave:h((null===y||void 0===y?void 0:y.id)||"none").totalUpdates>1||x(),onUpdateData:b,onPublishData:I})),[d,T,e,y,S,p]),k=e=>{var t,o,a;for(const[n,l]of Object.entries(e)){const{name:e,type:i}=(0,U.py)(n),{directive:s}=(0,U.mA)(e||"");if(i&&["text","textarea"].includes(i)&&s)switch(s){case"name":t=l;break;case"desc":o=l;break;case"small":a=l}}return{title:t,desc:o,small:a}};return d?(0,a.jsx)(n.Z,{tool:d,form:C,historyProps:v,dataSourceProps:w,dataHandlerProps:j,publishTexts:T,getItemName:e=>k(e).title||"",getItemDescription:e=>k(e).desc||"",getItemBadge:e=>k(e).small||"",onOverWriteCopiedData:e=>(e=>{const t={is_freemium:!0};for(const[o,a]of Object.entries(e)){const{name:e,type:n}=(0,U.py)(o),{directive:l}=(0,U.mA)(e||"");n&&["upload"].includes(n)||l||(t[o]=a)}return t})(e)}):(0,a.jsx)(F.Z,{title:"Loading tool..."})}}},function(e){e.O(0,[847,214,958,614,630,201,394,493,505,162,506,814,238,666,986,879,687,106,760,774,888,179],(function(){return t=89879,e(e.s=t);var t}));var t=e.O();_N_E=t}]);