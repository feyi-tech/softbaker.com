(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{8398:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/letter",function(){return n(8543)}])},4132:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var a=n(5893),r=n(1857),o=n.n(r),i=n(4292),s=n(1293),l=n(7747),c=n(5970),d=n(6089),m=n(7294),p=n(4345),h=n(5154),g=n(1802),u=n(5461),x=n(3508),f=n(5367);const y=e=>{let{image:t,selected:n,onClick:r,...o}=e;const[i,l]=(0,m.useState)(!0),[c,p]=(0,m.useState)();return(0,a.jsxs)(a.Fragment,{children:[i?(0,a.jsx)(s.x,{as:"div",textAlign:"center",cursor:"pointer",fontStyle:"italic",fontSize:"12px",display:"flex",justifyContent:"center",alignItems:"center",w:"100px",height:"50px",mr:"5px",mb:"5px",border:"4px dashed ".concat(c?"rgb(246, 70, 93)":"#dd6b20"),children:c||"Loading Signature..."}):null,(0,a.jsx)(d.E,{onClick:r,cursor:"pointer",bg:"#cfcfcf",src:t,display:i?"none":"block",w:"100px",h:"auto",mr:"5px",mb:"5px",border:n?"4px ridge #dd6b20":"2px dashed #dd6b20",_hover:{border:"4px ridge #dd6b20"},onLoad:()=>{l(!1),p(void 0)},onError:()=>{l(!1),p("Failed to load signature")}})]})};var w=e=>{let{onClose:t,onImage:n}=e;const[r,o]=(0,m.useState)(),[s,l]=(0,m.useState)(),[c,d]=(0,m.useState)();return(0,a.jsxs)(p.Z,{title:"Select Signature",isOpen:!0,onClose:t,children:[(0,a.jsx)(i.U,{maxHeight:"320px",justifyContent:"flex-start",alignItems:"flex-end",mb:2,flexWrap:"wrap",pos:"relative",overflowY:"auto",children:g.J8.map(((e,t)=>(0,a.jsx)(y,{image:e,selected:e==r,onClick:()=>{c||o(e)}},t)))}),(0,a.jsx)(x.Z,{type:x.Z.TYPES.none,errorMessage:s,mb:1}),(0,a.jsx)(u.Z,{status:c?"loading":"warning",mb:"1rem",onClick:()=>{l(""),r?(d(!0),(0,f.Ic)(r).then((e=>{n(null,e)})).catch((e=>{l(e.message),d(!1)}))):l("Please select a signature to use above.")},children:c?"Please wait...":"Use Signature"})]})},b=n(7963),v=n(7672),k=n(6455),j=n.n(k),S=n(6918);var T=e=>{let{onClose:t,onImage:n}=e;const r=(0,m.useRef)(null),[o,c]=(0,m.useState)(!1),[d,g]=(0,m.useState)(),[x,f]=(0,m.useState)(),y=(0,b.p)(),w=()=>{const e=document.getElementById("signature_track");e?(r.current=new v.Z(e,{penColor:"#000",minWidth:.7,maxWidth:.7}),c(!0)):setTimeout((()=>{w()}),100)};(0,m.useEffect)((()=>{w()}),[]);return(0,a.jsxs)(p.Z,{title:"Draw Signature",isOpen:!0,onClose:()=>t(),children:[o?(0,a.jsx)(s.x,{fontSize:"12px",mb:2,children:"Drag your finger or mouse around, inside the box below to sign."}):(0,a.jsx)(s.x,{fontSize:"12px",mb:2,fontStyle:"italic",children:"Setting up signature pad. Please wait..."}),(0,a.jsx)(l.xu,{as:"canvas",id:"signature_track",mb:0,width:"100%",height:"150px",cursor:"pointer",bg:"#cfcfcf",border:"4px ridge #dd6b20"}),(0,a.jsxs)(i.U,{justifyContent:"space-between",alignItems:"center",mb:1,children:[(0,a.jsx)(u.Z,{status:"warning",mb:"1rem",onClick:()=>{const e=r.current;if(e){const t=e.toData();t.pop(),e.fromData(t)}else y({description:"Signature pad unavailabe. Please try again later.",status:"error",duration:4e3,isClosable:!0})},rightIcon:(0,a.jsx)(h.wXW,{}),children:"Undo"}),(0,a.jsx)(u.Z,{status:"warning",mb:"1rem",onClick:()=>{const e=r.current;e?e.clear():y({description:"Signature pad unavailabe. Please try again later.",status:"error",duration:4e3,isClosable:!0})},rightIcon:(0,a.jsx)(h.Xm5,{}),children:"Clear"})]}),d?(0,a.jsx)(s.x,{fontStyle:"italic",fontSize:"12px",children:"Processing signature..."}):null,x?(0,a.jsx)(s.x,{fontSize:"12px",color:(0,S.Z)("errorColor.light","errorColor.dark"),children:x}):null,(0,a.jsx)(u.Z,{status:"warning",mb:"1rem",onClick:()=>{var e;if(d)return void j().fire({icon:"info",title:"Processing",text:"Your signature is currently being processed. Please try again after processing."});g(!0);const t=(null===(e=r.current)||void 0===e?void 0:e.toDataURL())||"";n(null,t)},children:"Use Signature"})]})},C=n(6708),I=n(351),P=n(9626);const _=e=>{let{icon:t,title:n,...r}=e;return(0,a.jsxs)(i.U,{cursor:"pointer",justifyContent:"flex-start",alignItems:"flex-end",mb:4,...r,children:[(0,a.jsx)(i.U,{w:"35px",h:"35px",justifyContent:"center",alignItems:"center",borderRadius:"5px",border:"1px solid #dfdfdf",children:t}),(0,a.jsx)(s.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:n})]})};var E=e=>{let{title:t,thumbnail:n,onChange:r,disabled:g,errorMessage:u,info:f,helperText:y,...b}=e;const[v,k]=(0,m.useState)(!1),[j,S]=(0,m.useState)(!1),[E,U]=(0,m.useState)(null),M=[{icon:(0,a.jsx)(h.AeW,{}),title:"Select Signature",name:"select"},{icon:(0,a.jsx)(h.mvm,{}),title:"Draw Signature",name:"draw"},{icon:(0,a.jsx)(h.DUB,{}),title:"Upload Signature",name:"upload"}],Z=e=>{S(!0),k(!1),U(null),(0,I.Me)(e).then((t=>{t?(r(null),S(!1)):(0,I.xJ)(e).then((e=>{r(e),S(!1)})).catch((e=>{S(!1)}))})).catch((e=>{S(!1)}))};return(0,a.jsxs)(l.xu,{...b,children:[(0,a.jsxs)(c.NI,{opacity:j||g?.4:1,cursor:j||g?"not-allowed":"pointer",children:[(0,a.jsx)(P.Z,{textTransform:"capitalize",info:f,children:t}),(0,a.jsxs)(i.U,{className:"image-selector-button",onClick:e=>{e.preventDefault(),g||j||(U(null),k(!0))},children:[(0,a.jsx)(l.xu,{width:"auto",height:"40px",bg:"#dfdfdf",children:!j&&n?(0,a.jsx)(d.E,{src:n,width:"auto",h:"40px",objectFit:"cover"}):null}),(0,a.jsx)(s.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontStyle:j?"italic":"normal",children:j?"Please wait...":n?"Click to change":"Click to sign"})]})]}),(0,a.jsx)(x.Z,{type:x.Z.TYPES.none,helperText:y,errorMessage:u}),E?"select"==E?(0,a.jsx)(w,{onImage:(e,t)=>{Z(t)},onClose:()=>{U(null)}}):"draw"==E?(0,a.jsx)(T,{onImage:(e,t)=>{Z(t)},onClose:()=>{U(null)}}):(0,a.jsx)(C.Z,{title:"Upload Signature",message:"Drag and Drop Signature here",hoverMessage:"Drop the Signature here",ruleMessage:"Upload only transparent PNG image",useImageText:"Use Signature",onImage:(e,t)=>{Z(t)},onClose:()=>{U(null)}}):(0,a.jsxs)(p.Z,{title:t,isOpen:v,onClose:()=>{k(!1)},children:[(0,a.jsx)(s.x,{mb:"1rem",children:"Click one of the below signature options to provide a signature."}),(M||[]).map(((e,t)=>(0,a.jsx)(_,{...e,onClick:()=>{e.name&&U(e.name)}},t)))]}),(0,a.jsx)(o(),{id:"95178590041dfe1a",children:".image-selector-button{width:100%;min-width:0px;outline:2px solid transparent;outline-offset:2px;position:relative;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-transition-property:var(--chakra-transition-property-common);-moz-transition-timing-function:var(--chakra-transition-property-common);-o-transition-timing-function:var(--chakra-transition-property-common);transition-property:var(--chakra-transition-property-common);-webkit-transition-duration:var(--chakra-transition-duration-normal);-moz-transition-duration:var(--chakra-transition-duration-normal);-o-transition-duration:var(--chakra-transition-duration-normal);transition-duration:var(--chakra-transition-duration-normal);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);-moz-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-10);-moz-padding-end:var(--chakra-space-10);padding-inline-end:var(--chakra-space-10);height:var(--chakra-sizes-10);-webkit-border-radius:var(--chakra-radii-md);-moz-border-radius:var(--chakra-radii-md);border-radius:var(--chakra-radii-md);border:1px solid;border-color:inherit;background:inherit}"})]})}},8543:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ke}});var a=n(5893),r=n(1802),o=n(5397),i=n(7294),s=n(7963),l=n(4292),c=n(1293),d=n(8783),m=n(3717),p=n(7747),h=n(959),g=n(4461),u=n(4124),x=n(4028),f=n(889),y=n(7918),w=n(3508),b=n(5461),v=n(1303),k=n(6691),j=n(6455),S=n.n(j),T=n(3754),C=n(419),I=n(5154),P=n(6918),_=n(5367),E=n(8303),U=n(351),M=n(4365);const Z=[73,69,119],L=1024,A=1448,N=271.462;var z=n(3471);const D=e=>{let{children:t}=e;return(0,a.jsxs)(l.U,{justifyContent:"flex-start",alignItems:"center",m:"0px !important",mb:"1rem !important",children:[(0,a.jsx)(I.gJy,{color:"#e53e3e"}),"\xa0",(0,a.jsx)(c.x,{as:"div",color:"#e53e3e",children:t})]})},W=e=>(null===e||void 0===e?void 0:e.message)?e.message:e,Y=(e,t)=>e;const F=(e,t,n)=>"".concat(e,"px"),R=e=>{let{width:t,height:n,signatories:a,companyName:r,title:o,senderInfo:i,recipientInfo:s,body:l,logoColor:c,logoUrl:d,stampLogoUrl:m,stampCircleUrl:p,paperTextureUrl:h,approvedStampUrl:g,waterMarkUrl:u,watermarkWithLogo:x,grayScaleWaterMark:f,stampLogo:y,stampApprove:w,hasPaperTexture:b}=e;const v=()=>N+25*(s||"").split("\n").length+60,k=v()+73.667,j=k+374.757;return'<svg id="PAPER" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" \n    width="'.concat(t,'" height="').concat(n,'" viewBox="0 0 1024 1448">\n    <defs>\n      <style>\n        .cls-1, .cls-2, .cls-4, .cls-5 {\n          mix-blend-mode: multiply;\n        }\n  \n        .cls-2 {\n            opacity: 0.15;\n            ').concat(f?"filter: grayscale(100%);":"","\n        }\n  \n        .cls-3 {\n          font-size: ").concat(F(41.667),";\n          fill: #676767;\n        }\n  \n        .cls-3, .cls-9 {\n          text-anchor: middle;\n        }\n  \n        .cls-11, .cls-12, .cls-13, .cls-14, .cls-15, .cls-3, .cls-6, .cls-8, .cls-9 {\n          font-family: Arial;\n        }\n  \n        .cls-4 {\n          fill: ").concat(c||"rgb(127, 127, 127)",";\n        }\n  \n        .cls-4, .cls-7 {\n          fill-rule: evenodd;\n        }\n  \n        .cls-5 {\n          opacity: 0.8;\n        }\n  \n        .cls-6 {\n          font-size: ").concat(F(50.594),";\n        }\n  \n        .cls-11, .cls-12, .cls-13, .cls-14, .cls-15, .cls-6, .cls-8, .cls-9 {\n          fill: #030303;\n        }\n  \n        .cls-7 {\n          fill: #6d6d6d;\n          stroke: #000;\n          stroke-width: 1.72px;\n        }\n  \n        .cls-10, .cls-12, .cls-8 {\n          font-size: ").concat(F(50.472),";\n        }\n  \n        .cls-9 {\n          font-size: ").concat(F(66.667),";\n        }\n  \n        .cls-12, .cls-13, .cls-15, .cls-9 {\n          font-weight: 700;\n        }\n        .cls-11 {\n            font-weight: 500;\n          }\n  \n        .cls-15, .cls-9 {\n          text-decoration: underline;\n        }\n  \n        .cls-12, .cls-13, .cls-9 {\n          text-transform: uppercase;\n        }\n  \n        .cls-14 {\n          font-size: ").concat(F(61.041),";\n        }\n  \n        .cls-14, .cls-15 {\n          text-anchor: end;\n        }\n\n        .cls-8 {\n            white-space: pre-wrap;\n            text-align: justify;\n            text-overflow: ellipsis;\n            width: 190px; /* Adjust the width as needed */\n        }\n  \n        .cls-15 {\n          font-size: ").concat(F(32.949),';\n        }\n        .paper {\n            fill: #fff;\n        }\n        .watermark {\n            opacity: 0.5;\n        }\n      </style>\n    </defs>\n    <rect id="Background" width="').concat(t,'" height="').concat(n,'" class="paper"/>\n    ').concat(h&&b?'<image id="Paper_Texture" data-name="Paper Texture" class="cls-1" width="'.concat(t,'" height="').concat(n,'" xlink:href="').concat(h,'"/>'):"","\n    ").concat(u?'<image id="watermark" width="'.concat(t,'" height="').concat(n,'" class="watermark" xlink:href="').concat(u,'"/>'):"","\n    ").concat(x&&d?'<image id="logo_WaterMark" data-name="logo WaterMark" class="cls-2" \n            x="'.concat((0,M.Qj)(266,t,L,3),'" y="').concat((0,M.Yg)(517,n,A,3),'" width="').concat((0,M.Qj)(505,t,L,3),'" height="').concat((0,M.Yg)(471,n,A,3),'" xlink:href="').concat(d,'"/>'):"","\n    ").concat(d?'<image id="logo" class="cls-5" x="'.concat((0,M.Qj)(69,t,L,3),'" y="').concat((0,M.Yg)(40,n,A,3),'" width="').concat((0,M.Qj)(116,t,L,3),'" height="').concat((0,M.Yg)(108,n,A,3),'" xlink:href="').concat(d,'"/>'):"",'\n    <text id="SAMPLE_COMPAY_NAME" data-name="SAMPLE COMPAY NAME" class="cls-3" transform="').concat((0,M.Iu)(511.839,1403.89,t,L,n,A)," ").concat((0,M.bA)(.413,.413,t,L,n,A),'">\n        <tspan x="').concat((0,M.Qj)(0,t,L,3),'">').concat((0,z.eh)(r),"</tspan>\n    </text>\n    ").concat(i&&i.length>0?'<text id="senderInfo" data-name="senderInfo" class="cls-14" transform="'.concat((0,M.Iu)(954.112,116.139,t,L,n,A)," ").concat((0,M.bA)(.342,.341,t,L,n,A),'">\n            ').concat(i.split("\n").map(((e,n)=>'<tspan id="sender_info_'.concat(n,'" x="').concat((0,M.Qj)(0,t,L,3),'" dy="').concat(0==n?"0":Y(73.249),'">').concat((0,z.eh)(e),"</tspan>"))).join(""),"\n        </text>"):"",'\n    <path class="cls-4" d="M0,').concat((0,M.Yg)(1371.22,n,A,3),"H").concat((0,M.Qj)(1024,t,L,3),"v").concat((0,M.Yg)(7.02,n,A,3),"H0v").concat((0,M.Yg)(-7.02,n,A,3),'Z" />\n    ').concat(s&&s.length>0?'<text id="recipientInfo" data-name="recipientInfo" class="cls-10" transform="'.concat((0,M.Iu)(71.344,N,t,L,n,A)," ").concat((0,M.bA)(.413,.413,t,L,n,A),'">\n            ').concat(s.split("\n").map(((e,n)=>'<tspan id="recipient_info_'.concat(n,'" class="cls-11" x="').concat((0,M.Qj)(0,t,L,3),'" dy="').concat(0==n?"0":Y(60.567),'">').concat((0,z.eh)(e),"</tspan>"))).join(""),"\n        </text>"):"",'\n    <text id="TITTLE" class="cls-9" \n        transform="').concat((0,M.Iu)(507.355,v(),t,L,n,A)," ").concat((0,M.bA)(.413,.413,t,L,n,A),'">\n        <tspan x="').concat((0,M.Qj)(0,t,L,3),'">').concat((0,z.eh)(o),'</tspan>\n    </text>\n    <text id="BODY-2" data-name="BODY" class="cls-8" \n    transform="').concat((0,M.Iu)(70.274,k,t,L,n,A)," ").concat((0,M.bA)(.413,.413,t,L,n,A),'">\n        ').concat(l?((e,t,n,a)=>{const r=function(e,t){const n=e.split("\n\n"),a=[];return n.forEach(((e,r)=>{e.split(/\n+/).forEach((e=>{let n="";e.split(" ").forEach(((e,r)=>{if(e.length>t)for(let o=0;o<e.length;o+=t){const r=e.substring(o,o+t);a.push(n+(n?" ":"")+r),n=""}else n.length+e.length+(n?1:0)>t&&(a.push(n),n=""),n+=(n?" ":"")+e})),n&&a.push(n)})),r<n.length-1&&a.push("")})),a}(e,a);return r.map(((e,t)=>""===e?"":'<tspan x="0" dy="'.concat(0===t?0:Y(""===r[t-1]?84.7931:55.567),'">').concat((0,z.eh)(e),"</tspan>"))).join("")})(l,0,0,91):"","\n    </text>\n    ").concat(a&&a.length>0?"".concat(a.map(((e,a)=>"\n            ".concat(e.base64Url?'<image id="image" \n            x="'.concat((0,M.Qj)(71,t,L,3),'" \n            y="').concat((0,M.Yg)(j+107*a,n,A,3),'" \n            width="').concat((0,M.Qj)(200,t,L,3),'" \n            height="').concat((0,M.Yg)(100,n,A,3),'" xlink:href="').concat(e.base64Url,'" />'):"",'\n            \n            \n            <path id="signatory_').concat(a,'_line" data-name="signatory_').concat(a,'_line" class="cls-7" \n            d="M').concat((0,M.Qj)(71.806,t,L,3),",").concat((0,M.Yg)(j+69.62+107*a,n,A,3),"H").concat((0,M.Yg)(359.639,n,A,3),'"/>\n\n            <g id="signatory_').concat(a,'">\n                <text id="signatory_').concat(a,'_title" data-name="signatory_').concat(a,'_title" class="cls-6" \n                transform="').concat((0,M.Iu)(70.606,j+100.081+107*a,t,L,n,A)," ").concat((0,M.bA)(.413,.412,t,L,n,A),'">\n                    ').concat(e.name&&e.name.length>0?(0,z.eh)(e.name):"").concat(e.title&&e.title.length>0?e.name&&e.name.length>0?"(".concat((0,z.eh)(e.title),")"):(0,z.eh)(e.title):"","\n                </text>\n            </g>"))).join("")):"","\n    ").concat(p&&m&&y?'<g id="Stamp-2" data-name="Stamp">\n            <image id="circle" class="cls-1" width="'.concat(t,'" height="').concat(n,'" xlink:href="').concat(p,'"/>\n            <image id="logo_copy_2" data-name="logo copy 2" class="cls-5" \n            x="').concat((0,M.Qj)(598,t,L,3),'" \n            y="').concat((0,M.Yg)(1191,n,A,3),'" \n            width="').concat((0,M.Qj)(66,t,L,3),'" \n            height="').concat((0,M.Yg)(61,n,A,3),'" xlink:href="').concat(m,'"/>\n        </g>'):"","\n    ").concat(g&&w?'<image id="Approved" class="cls-1" width="'.concat(t,'" height="').concat(n,'" xlink:href="').concat(g,'"/>'):"",'\n    <path class="cls-4" d="M0,').concat((0,M.Yg)(184.921,n,A,3),"H").concat((0,M.Qj)(1024,t,L,3),"v").concat((0,M.Yg)(15.273,n,A,3),"H0V").concat((0,M.Yg)(184.921,n,A,3),'Z"/>\n    <text id="COMPAY_NAME" data-name="COMPAY NAME" class="cls-15" transform="').concat((0,M.Iu)(955.163,70.309,t,L,n,A)," ").concat((0,M.bA)(1.157,1.148,t,L,n,A),'">\n        <tspan x="').concat((0,M.Qj)(0,t,L,3),'">').concat((0,z.eh)(r),"</tspan>\n    </text>\n  </svg>\n  ")},O=e=>{let{isLoading:t,id:n,width:r,height:o,signatories:i,companyName:s,title:c,senderInfo:m,recipientInfo:h,body:g,logoUrl:u,stampCircleUrl:x,paperTextureUrl:f,approvedStampUrl:y,waterMarkUrl:w,watermarkWithLogo:b,grayScaleWaterMark:v,stampLogo:j,stampApprove:S,hasPaperTexture:T}=e;const C=(0,E.S)(r),I=(0,E.S)(o),U=(0,_.xi)(false,u),M=(0,_.j1)(Z,45,u),L=(0,_.T3)((0,_.Vt)(x).value),A=(0,_.T3)((0,_.Vt)(f).value),N=(0,_.T3)((0,_.Vt)(y).value),z=(0,_.T3)((0,_.Vt)(w).value);return(0,a.jsxs)(p.xu,{id:"AirlineDocWrapper",pos:"relative",w:"100%",children:[(0,a.jsx)(p.xu,{w:"100%",h:"100%",dangerouslySetInnerHTML:{__html:R({width:C,height:I,signatories:i,companyName:s,title:c,senderInfo:m,recipientInfo:h,body:g,logoColor:U.color&&U.color.length>2?"rgb(".concat(U.color[0],", ").concat(U.color[1],", ").concat(U.color[2],")"):null,logoUrl:u,stampLogoUrl:null===M||void 0===M?void 0:M.stamp,stampCircleUrl:null===L||void 0===L?void 0:L.base64Url,paperTextureUrl:null===A||void 0===A?void 0:A.base64Url,approvedStampUrl:null===N||void 0===N?void 0:N.base64Url,waterMarkUrl:null===z||void 0===z?void 0:z.base64Url,watermarkWithLogo:b,grayScaleWaterMark:v,stampLogo:j,stampApprove:S,hasPaperTexture:T})}}),(0,a.jsx)(l.U,{pos:"absolute",top:"0",left:"0",right:"0",bottom:"0",zIndex:"${getResponsiveX(1, width, BASE_TEMPLATE_WIDTH, FRACTION_DIGITS)}",bg:"#dfdfdf",opacity:"0.7",justifyContent:"flex-start",pl:{base:"0px",md:"0px"},alignItems:"center",display:t||U.loading||M.loading||L.loading||A.loading||N.loading||z.loading?"flex":"none",w:"100%",h:"100%",children:(0,a.jsx)(k.Z,{type:k.Z.TYPES.grid,color:(0,P.Z)("colorAccent.light","colorAccent.dark"),size:"70px"})}),(0,a.jsxs)(d.g,{pos:"absolute",top:"0",left:"0",right:"0",bottom:"0",zIndex:"${getResponsiveX(1, width, BASE_TEMPLATE_WIDTH, FRACTION_DIGITS)}",bg:"#fff",opacity:"0.7",justifyContent:"center",pl:"1rem",alignItems:"flex-start",display:U.error||M.error||L.error||A.error||N.error||z.error?"flex":"none",w:"100%",h:"100%",children:[U.error?(0,a.jsx)(D,{children:W(U.error)}):null,M.error?(0,a.jsx)(D,{children:W(M.error)}):null,L.error?(0,a.jsx)(D,{children:W(L.error)}):null,A.error?(0,a.jsx)(D,{children:W(A.error)}):null,N.error?(0,a.jsx)(D,{children:W(N.error)}):null,z.error?(0,a.jsx)(D,{children:W(z.error)}):null]})]})};O.downloadSvg=e=>{let{width:t,height:n,signatories:a,companyName:r,title:o,senderInfo:i,recipientInfo:s,body:l,logoUrl:c,stampLogoUrl:d,stampCircleUrl:m,paperTextureUrl:p,approvedStampUrl:h,waterMarkUrl:g,watermarkWithLogo:u,grayScaleWaterMark:x,stampLogo:f,stampApprove:y,hasPaperTexture:w}=e;return new Promise((async(e,b)=>{var v;try{v=await(0,U.jl)(c,false)}catch(k){return b(k)}try{c=await(0,_.Ic)((0,_.Q8)(c))}catch(k){return b(k)}try{d=await(0,U.aD)(c,Z,45)}catch(k){return b(k)}try{m=await(0,_.Ic)((0,_.Q8)(m))}catch(k){return b(k)}try{p=await(0,_.Ic)((0,_.Q8)(p))}catch(k){return b(k)}try{h=await(0,_.Ic)((0,_.Q8)(h))}catch(k){return b(k)}if(g)try{g=await(0,_.Ic)((0,_.Q8)(g))}catch(k){return b(k)}e(R({width:t,height:n,signatories:a,companyName:r,title:o,senderInfo:i,recipientInfo:s,body:l,logoColor:v&&v.length>2?"rgb(".concat(v[0],", ").concat(v[1],", ").concat(v[2],")"):null,logoUrl:c,stampLogoUrl:d,stampCircleUrl:m,paperTextureUrl:p,approvedStampUrl:h,waterMarkUrl:g,watermarkWithLogo:u,grayScaleWaterMark:x,stampLogo:f,stampApprove:y,hasPaperTexture:w}))}))};var Q=O;const q={id:"STAMP_CIRCLE",title:"STAMP_CIRCLE",downloadImage:"/res/tools/letter/1024/circle.png?v=1",thumbnail:"",image:{base:"/res/tools/letter/512/circle.png?v=1",md:"/res/tools/letter/728/circle.png?v=1",lg:"/res/tools/letter/1024/circle.png?v=1"}},B={id:"APPROVE_STAMP",title:"APPROVE_STAMP",downloadImage:"/res/tools/letter/1024/approved.png?v=1",thumbnail:"",image:{base:"/res/tools/letter/512/approved.png?v=1",md:"/res/tools/letter/728/approved.png?v=1",lg:"/res/tools/letter/1024/approved.png?v=1"}},H={id:"PAPER_TEXTURE",title:"PAPER_TEXTURE",downloadImage:"/res/tools/letter/1024/texture.png?v=1",thumbnail:"",image:{base:"/res/tools/letter/512/texture.png?v=1",md:"/res/tools/letter/728/texture.png?v=1",lg:"/res/tools/letter/1024/texture.png?v=1"}},V={id:"WATERMARK",title:"WATERMARK",downloadImage:"/res/tools/letter/1024/watermark.png?v=2",thumbnail:"",image:{base:"/res/tools/letter/512/watermark.png?v=2",md:"/res/tools/letter/728/watermark.png?v=2",lg:"/res/tools/letter/1024/watermark.png?v=2"}};var X=n(8627),J=n(1344),G=n(6201),$=n(1857),K=n.n($),ee=n(6089),te=n(5970),ne=n(4345),ae=n(4132);var re=e=>{let{submitButtonText:t,name:n,title:r,base64Url:o,onClose:s,onChange:l,nameRule:c,titleRule:d,base64ImageRule:m,allowDelete:h}=e;const[g,u]=(0,i.useState)(n),[x,f]=(0,i.useState)(),[y,v]=(0,i.useState)(r),[k,j]=(0,i.useState)(),[C,P]=(0,i.useState)(o),[_,E]=(0,i.useState)(),[M,Z]=(0,i.useState)(!1),[L,A]=(0,i.useState)();return(0,a.jsxs)(ne.Z,{title:h?(0,a.jsx)(b.Z,{rightIcon:(0,a.jsx)(I.Xm5,{}),status:"error",onClick:()=>{S().fire({text:"Are you sure you want to delete this signatory?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then((e=>{e.isConfirmed&&l(null)}))},children:"Delete"}):null,isOpen:!0,onClose:s,height:"95vh",children:[(0,a.jsx)(w.Z,{w:"100%",id:"signatory_editor_name",title:"".concat(c.title).concat(c.required?"":"(optional)"),mb:4,placeholder:"Jenifer Lopez",helperText:"The name of the person to sign",info:"This is the name of the person to sign.",type:w.Z.TYPES.text,value:g,onChange:u,errorMessage:x},"signatory_editor_name"),(0,a.jsx)(w.Z,{w:"100%",id:"signatory_editor_title",title:"".concat(d.title).concat(d.required?"":"(optional)"),mb:4,placeholder:"Miss",helperText:"The title of the person to sign",info:"This is the title of the person to sign.",type:w.Z.TYPES.text,value:y,onChange:v,errorMessage:k},"signatory_editor_title"),(0,a.jsx)(ae.Z,{w:"100%",id:"signatory_editor_image",title:"".concat(m.title).concat(m.required?"":"(optional)"),mb:4,helperText:M?"Processing...":"Provide ".concat(m.title," here"),info:"This is where you provide a signature sign.",thumbnail:C,onChange:e=>{e&&(e=>{E(void 0),Z(!0),(0,U.Me)(e).then((t=>{t?(E("The provided ".concat(m.title," is blank.")),Z(!1)):(0,U.xJ)(e).then((e=>{P(e),Z(!1)})).catch((e=>{E(e.message),Z(!1)}))})).catch((e=>{E(e.message),Z(!1)}))})(e)},errorMessage:_},"signatory_editor_image"),(0,a.jsxs)(p.xu,{mb:"1rem",children:[(0,a.jsx)(b.Z,{status:"warning",mb:"1rem",onClick:()=>{if(M)A("Currently processing ".concat(m.title,". Please try again after the process."));else{f(void 0),j(void 0),E(void 0),A(void 0);var e=!1;c.required&&(!g||(0,T.N4)(g)||g.length<c.minSize||g.length>c.maxSize&&(e=!0,f("".concat(c.title," cannot be greater than ").concat(c.maxSize," characters")))),d.required&&(!y||(0,T.N4)(y)||y.length<d.minSize||y.length>d.maxSize&&(e=!0,j("".concat(d.title," cannot be greater than ").concat(d.maxSize," characters")))),m.required&&(C||(e=!0,E("Please provide ".concat(m.title)))),e||l({name:g,title:y,base64Url:C})}},children:t}),(0,a.jsx)(w.Z,{type:w.Z.TYPES.none,errorMessage:L})]})]})},oe=n(9626);const ie=e=>{let{name:t,title:n,base64Url:r,onClick:o}=e;return(0,a.jsxs)(l.U,{border:"1px dashed #dfdfdf",borderRadius:"4px",p:"4px",onClick:o,children:[(0,a.jsx)(p.xu,{width:"auto",height:"35px",bg:"#dfdfdf",children:r?(0,a.jsx)(ee.E,{src:r,width:"auto",height:"35px",objectFit:"cover"}):null}),(0,a.jsxs)(d.g,{justifyContent:"flex-start",alignItems:"flex-start",gap:"0 !important",children:[(0,a.jsxs)(c.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"14px",mb:"0px !important",fontStyle:"normal",children:[t,n&&n.length>0?"(".concat(n,")"):""]}),(0,a.jsx)(l.U,{w:"100%",justifyContent:"center",children:(0,a.jsx)(c.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center",fontSize:"12px",fontStyle:"normal",children:"Click to edit"})})]})]})};var se=e=>{let{maxSize:t,title:n,value:r,onChange:o,disabled:s,submitButtonText:c,nameRule:d,titleRule:m,base64ImageRule:h,helperText:g,info:u,errorMessage:x,...f}=e;const[y,v]=(0,i.useState)(0);return(0,a.jsxs)(p.xu,{...f,children:[(0,a.jsxs)(te.NI,{opacity:s?.5:1,cursor:s?"not-allowed":"pointer",children:[(0,a.jsx)(oe.Z,{textTransform:"capitalize",info:u,children:n}),(0,a.jsxs)(p.xu,{className:"input-container",children:[r&&r.length>0?(0,a.jsx)(l.U,{className:"image-selector-button",h:"auto !important",p:"0.5rem",justifyContent:"flex-start",alignItems:"flex-start",flexWrap:"wrap",children:r.map(((e,t)=>(0,a.jsx)(ie,{name:e.name,title:e.title,base64Url:e.base64Url,onClick:()=>{s||v(t+1)}})))}):null,(r||[]).length<t&&!s?(0,a.jsx)(b.Z,{iconRight:(0,a.jsx)(I.wEH,{}),my:"0.5rem",status:"warning",onClick:e=>{e.preventDefault(),s||v((r||[]).length+1)},children:r&&r.length>0?"Click to add more ".concat(n):"Click to add ".concat(n)}):null]}),(0,a.jsx)(w.Z,{type:w.Z.TYPES.none,helperText:s?null:g,errorMessage:x})]}),y?(0,a.jsx)(re,{allowDelete:r&&y<=r.length,title:!r||y>r.length?null:r[y-1].title,name:!r||y>r.length?null:r[y-1].name,base64Url:!r||y>r.length?null:r[y-1].base64Url,submitButtonText:c,onClose:()=>{v(0)},onChange:e=>{if(!r||y>r.length){if(e){const t=[...r||[],e];o(t)}}else{const t=[...r];null==e?t.splice(y-1,1):t[y-1]=e,o(t)}v(0)},nameRule:d,titleRule:m,base64ImageRule:h}):null,(0,a.jsx)(K(),{id:"2f583d9501a4b51e",children:".image-selector-button{width:100%;min-width:0px;outline:2px solid transparent;outline-offset:2px;position:relative;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-transition-property:var(--chakra-transition-property-common);-moz-transition-timing-function:var(--chakra-transition-property-common);-o-transition-timing-function:var(--chakra-transition-property-common);transition-property:var(--chakra-transition-property-common);-webkit-transition-duration:var(--chakra-transition-duration-normal);-moz-transition-duration:var(--chakra-transition-duration-normal);-o-transition-duration:var(--chakra-transition-duration-normal);transition-duration:var(--chakra-transition-duration-normal);font-size:var(--chakra-fontSizes-md);-webkit-border-radius:var(--chakra-radii-md);-moz-border-radius:var(--chakra-radii-md);border-radius:var(--chakra-radii-md);border:1px solid;border-color:inherit;background:inherit}.input-container{padding:.5rem;width:100%;min-width:0px;position:relative;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-transition-property:var(--chakra-transition-property-common);-moz-transition-timing-function:var(--chakra-transition-property-common);-o-transition-timing-function:var(--chakra-transition-property-common);transition-property:var(--chakra-transition-property-common);-webkit-transition-duration:var(--chakra-transition-duration-normal);-moz-transition-duration:var(--chakra-transition-duration-normal);-o-transition-duration:var(--chakra-transition-duration-normal);transition-duration:var(--chakra-transition-duration-normal);-webkit-border-radius:var(--chakra-radii-md);-moz-border-radius:var(--chakra-radii-md);border-radius:var(--chakra-radii-md);border:1px solid;border-color:inherit;background:inherit}"})]})},le=n(9020),ce=n(1160),de=n(5948);const me={min:0,max:64,required:!0},pe={min:0,max:64,required:!0},he={min:0,max:200,required:!0},ge={min:0,max:400,required:!1},ue={min:0,max:1400,required:!1};var xe=e=>{let{data:t,isNew:n,onUpdateData:o,onPublishData:j,saving:_,setSaving:E,hasPendingSave:U,collectionName:M}=e;if(!t)return null;const Z=(0,s.p)(),[N,D]=(0,i.useState)(!1),[W,Y]=(0,i.useState)(!1),[F,R]=(0,de.o)(M,t.id,"logo",t.logo),{nameError:O,nameChecker:$}=(0,v.Z)((e=>(0,T.N4)(e)&&me.required?"Enter your company name.":!(0,T.N4)(e)&&e.length<me.min?"The name is too short. It must be up to ".concat(me.min," characters."):e.length>me.max?"The name is too long. It must not be greater than ".concat(me.max," characters."):null),"nameError","nameChecker"),{titleError:K,titleChecker:ee}=(0,v.Z)((e=>(0,T.N4)(e)&&pe.required?"Enter the letter title.":e.length<pe.min?"The title must be up to ".concat(pe.min," characters."):e.length>pe.max?"The title must not be greater than ".concat(pe.max," characters."):null),"titleError","titleChecker"),{senderInfoError:te,senderInfoChecker:ne}=(0,v.Z)((e=>(0,T.N4)(e)&&he.required?"Enter your company info.":e.length<he.min?"Company info must be up to ".concat(he.min," characters."):e.length>he.max?"Company info must not be greater than ".concat(he.max," characters."):null),"senderInfoError","senderInfoChecker"),{recipientInfoError:ae,recipientInfoChecker:re}=(0,v.Z)((e=>(0,T.N4)(e)&&ge.required?"Enter recipient info.":e.length<ge.min?"Recipient info must be up to ".concat(ge.min," characters."):e.length>ge.max?"Recipient info must not be greater than ".concat(ge.max," characters."):null),"recipientInfoChecker","recipientInfoChecker"),{bodyError:oe,bodyChecker:ie}=(0,v.Z)((e=>(0,T.N4)(e)&&ue.required?"Enter the letter body.":e.length<ue.min?"The body must be up to ".concat(ue.min," characters."):e.length>ue.max?"The body must not be greater than ".concat(ue.max," characters."):null),"bodyError","bodyChecker"),{logoError:xe,logoChecker:fe}=(0,v.Z)(((e,n)=>e&&"logo"!=e?"Invalid Company logo":e&&!(0,T.VT)(M,(n||t).id,e)?"Your Company logo was not found on this browser. Please provide the logo again.":null),"logoError","logoChecker"),[ye,we]=(0,i.useState)([]),[be,ve]=(0,i.useState)(),[ke,je]=(0,i.useState)([]),Se=e=>{const t=e.signatures||[],n=[];for(var a=!1,r=0;r<t.length;r++)t[r].length>0&&!(0,T.VT)(M,e.id,"signatures_".concat(r))&&(a=!0,n.push(e.signatoryNames&&e.signatoryNames[r]?"Signature for ".concat(e.signatoryNames[r]," was not found on this browser. Please provide it again."):"Signature was not found on this browser. Please provide it again."));return je(n),{hasError:a,signatureErrors:n}};(0,i.useEffect)((()=>{if(t){const n=t.signatoryNames||[],a=t.signatoryTitles||[],r=t.signatures||[],o=[];for(var e=0;e<n.length;e++)o.push({name:n[e],title:a[e],base64Url:r[e].length>0?(0,T.VT)(M,t.id,"signatures_".concat(e)):null});we(o),je(Se(t).signatureErrors)}}),[t]);const[Te,Ce]=(0,i.useState)(!1);return(0,a.jsx)(X.Z,{tool:r.Tk.letter,maxHeaderWidth:"100%",children:(0,a.jsxs)(y.Z,{w:"100%",maxW:"100%",h:"auto",children:[t.id!=r.XA?(0,a.jsx)(l.U,{flexWrap:"wrap",justifyContent:"space-between",children:(0,a.jsxs)(l.U,{flexWrap:"wrap",children:[(0,a.jsxs)(c.x,{m:"0px !important",mr:1,display:"none",children:["Tracking No:"," "]}),(0,a.jsx)(C.Z,{display:"none",fontWeight:"bold",m:"0px !important",mr:2,children:t.id})]})}):(0,a.jsxs)(d.g,{alignItems:"flex-start",children:[(0,a.jsxs)(l.U,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",children:[(0,a.jsx)(I.dTF,{})," ",(0,a.jsx)(c.x,{m:"0px !important",mr:1,children:"New Letter"})]}),(0,a.jsxs)(c.x,{as:"div",fontSize:"13px",children:["Click the info icon(",(0,a.jsx)(I.DAO,{style:{display:"inline"}}),") beside each form fields for help on what to enter."]})]}),(0,a.jsx)(m.k,{w:"100%",flexWrap:"wrap",m:"15px auto",children:(0,a.jsx)(p.xu,{w:{base:"100%"},bg:"#dd6b20",p:"1rem",children:(0,a.jsxs)(p.xu,{bg:(0,P.Z)("cardBg.light","cardBg.dark"),minH:"80vh",w:"100%",p:{base:"0.4rem",md:"0.5rem",lg:"1rem"},borderRadius:"24px",children:[(0,a.jsxs)(h.m,{isFitted:!0,variant:"enclosed",children:[(0,a.jsxs)(g.t,{mb:"1em",children:[(0,a.jsx)(u.O,{children:"Edit Mode"}),(0,a.jsx)(u.O,{children:"View Mode"})]}),(0,a.jsxs)(x.n,{children:[(0,a.jsxs)(f.x,{p:{base:"0.2rem",md:"0.5rem",lg:"1rem"},children:[(0,a.jsx)(G.Z,{disabled:!n&&null!=F,w:"100%",id:"Form_".concat(t.id,"logo"),title:"Your company logo",mb:4,info:"The logo of your company.",thumbnail:F,message:"Drag and Drop logo here",hoverMessage:"Drop the logo here",ruleMessage:"Upload 512 by 512 transparent PNG image for the best result.",useImageText:"Use Logo",maxFileSize:204800,onChange:(e,n)=>{o&&(o({id:t.id,logo:n}),R())},onCheckInfo:fe,errorMessage:xe},"Form_".concat(t.id,"logo")),(0,a.jsx)(w.Z,{disabled:!n,w:"100%",id:"Form_".concat(t.id,"_name"),title:"Your company name",mb:4,placeholder:"Amazon Inc",info:"This is the registered name of your company.",type:w.Z.TYPES.text,value:t.companyName,onChange:e=>{o&&o({id:t.id,companyName:e})},onCheckInfo:$,errorMessage:O},"Form_".concat(t.id,"_name")),(0,a.jsx)(w.Z,{disabled:!n,w:"100%",minH:"110px",id:"Form_".concat(t.id,"_sender"),title:"Your company info",mb:4,placeholder:"",info:"This is your company information such as address, email, phone number. Use the enter or send key/button to enter each info in a new line.",helperText:"Your company address, email, phone number,... Hit enter key to enter new line.",type:w.Z.TYPES.textarea,value:t.senderInfo,onChange:e=>{o&&o({id:t.id,senderInfo:e})},onCheckInfo:ne,errorMessage:te},"Form_".concat(t.id,"_sender")),(0,a.jsx)(w.Z,{disabled:!n,w:"100%",minH:"110px",id:"Form_".concat(t.id,"_recipient"),title:"Recipient info",mb:4,placeholder:"",info:"This is the information of the entity you're writing to; such as customer or company name, address, email, phone number. Use the enter or send key/button to enter each info in a new line.",helperText:"The information of the entity you're writing to. Hit enter key to enter new line.",type:w.Z.TYPES.textarea,value:t.recipientInfo,onChange:e=>{o&&o({id:t.id,recipientInfo:e})},onCheckInfo:re,errorMessage:ae},"Form_".concat(t.id,"_recipient")),(0,a.jsx)(w.Z,{disabled:!n,w:"100%",id:"Form_".concat(t.id,"_title"),title:"Letter Title",mb:4,placeholder:"123456789",info:"This is the title of the letter you're writing.",type:w.Z.TYPES.text,value:t.title,onChange:e=>{o&&o({id:t.id,title:e})},onCheckInfo:ee,errorMessage:K},"Form_".concat(t.id,"_title")),(0,a.jsx)(w.Z,{disabled:!n,w:"100%",minH:"150px",id:"Form_".concat(t.id,"body"),title:"Letter body",mb:4,info:"The body of the letter. Hit enter/send key to enter a new line.",type:w.Z.TYPES.textarea,value:t.body,onChange:e=>{o&&o({id:t.id,body:e})},onCheckInfo:ie,errorMessage:oe},"Form_".concat(t.id,"body")),(0,a.jsx)(se,{disabled:!n&&0==ke.length,w:"100%",id:"Form_".concat(t.id,"signatories"),title:"Signatories",mb:4,helperText:"Provide the person or people to sign the letter.",info:"This is where you provide the name(s), title(s), and signature(s) to put on the letter.",type:w.Z.TYPES.textarea,submitButtonText:"Submit Signatory",maxSize:3,nameRule:{title:"signatory name",required:!0,minSize:0,maxSize:64},titleRule:{title:"signatory title",required:!1,minSize:0,maxSize:64},base64ImageRule:{title:"signature",required:!1,minSize:0,maxSize:64},value:ye,onChange:e=>{(e=>{if(we(e),o){const n=[],a=[],r=[];for(const t of e)n.push(t.name?t.name:""),a.push(t.title?t.title:""),r.push(t.base64Url?t.base64Url:"");o({id:t.id,signatoryNames:n,signatoryTitles:a,signatures:r})}})(e)},onCheckInfo:ie,errorMessage:ke.join(", ")},"Form_".concat(t.id,"signatories")),(0,a.jsx)(w.Z,{disabled:!n,w:"100%",id:"Form_".concat(t.id,"hasPaperTexture"),title:"Creased paper effect",mb:4,info:"Enabling this makes the letter look like a crumpled paper.",type:w.Z.TYPES.checkbox,value:t.hasPaperTexture,onChange:e=>{o&&o({id:t.id,hasPaperTexture:e})}},"Form_".concat(t.id,"hasPaperTexture")),(0,a.jsx)(w.Z,{disabled:!n,w:"100%",id:"Form_".concat(t.id,"waterMarkWithLogo"),title:"Watermark your logo",mb:4,info:"Enabling this adds your logo as a watermark to the letter background.",type:w.Z.TYPES.checkbox,value:t.waterMarkWithLogo,onChange:e=>{o&&o({id:t.id,waterMarkWithLogo:e})}},"Form_".concat(t.id,"waterMarkWithLogo")),t.waterMarkWithLogo?(0,a.jsx)(w.Z,{disabled:!n,w:"100%",id:"Form_".concat(t.id,"grayScaleWaterMark"),title:"Grayscale watermark",mb:4,info:"Enabling this makes your logo watermark looks gray instead of colorful.",type:w.Z.TYPES.checkbox,value:t.grayScaleWaterMark,onChange:e=>{o&&o({id:t.id,grayScaleWaterMark:e})}},"Form_".concat(t.id,"grayScaleWaterMark")):null,(0,a.jsx)(w.Z,{disabled:!n,w:"100%",id:"Form_".concat(t.id,"stampLogo"),title:"Stamp your logo",mb:4,info:"Enabling this adds a stamp with your logo in it.",type:w.Z.TYPES.checkbox,value:t.stampLogo,onChange:e=>{o&&o({id:t.id,stampLogo:e})}},"Form_".concat(t.id,"stampLogo")),(0,a.jsx)(w.Z,{disabled:!n,w:"100%",id:"Form_".concat(t.id,"stampApprove"),title:"Add approve Stamp",mb:4,info:"Enabling this adds an approval stamp to your letter.",type:w.Z.TYPES.checkbox,value:t.stampApprove,onChange:e=>{o&&o({id:t.id,stampApprove:e})}},"Form_".concat(t.id,"stampApprove"))]}),(0,a.jsx)(f.x,{bg:"#dcdcdc",p:"0px",children:(0,a.jsx)(ce.Z,{width:"100%",message:"Drag around to view the whole letter",height:{base:500,md:728,lg:1024},pos:"relative",overflowX:"hidden",overflowY:"hidden",children:(0,a.jsx)(Q,{isLoading:N,width:{base:728,lg:1024},height:{base:1031,lg:1448},companyName:t.companyName,title:t.title,senderInfo:t.senderInfo,recipientInfo:t.recipientInfo,signatories:ye,body:t.body,logoUrl:F,watermarkWithLogo:t.waterMarkWithLogo,grayScaleWaterMark:t.grayScaleWaterMark,stampCircleUrl:q.image,approvedStampUrl:B.image,paperTextureUrl:H.image,waterMarkUrl:t.is_freemium?V.image:null,stampLogo:t.stampLogo,stampApprove:t.stampApprove,hasPaperTexture:t.hasPaperTexture})})})]})]}),(0,a.jsxs)(d.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",my:8,children:[n?(0,a.jsx)(b.Z,{status:_&&!Te?"loading":"warning",fontStyle:_&&!Te?"italic":"normal",disabled:_||!U,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:async()=>{if(!j)return;E(!0);const e=[$().checker(t.companyName),ee().checker(t.title),ne().checker(t.senderInfo),re().checker(t.recipientInfo),fe().checker(t.logo)];(await Promise.all(e)).includes(!1)?(E(!1),R(),S().fire({title:"Form Error",icon:"error",text:"You have some errors in your form. Please check the error message(s) at the input(s) and try again."})):(E(!1),j().then((e=>{E(!1),R(),Z({description:n?"New Letter successfully saved.":"Letter successfully updated.",status:"success",duration:4e3,isClosable:!0}),ve(!0)})).catch((e=>{E(!1),R(),((null===e||void 0===e?void 0:e.message)||"").length>0&&S().fire({icon:"error",title:n?"Letter Creation Error":"Letter Update Error",text:e.message})})))},rightIcon:_&&!Te?(0,a.jsx)(k.Z,{size:"1rem",color:"#fff",type:k.Z.TYPES.threeDots}):null,children:_&&!Te?"Please wait...":"Create Letter"}):null,(0,a.jsx)(le.Z,{showDownloadFormatOptions:be,setShowDownloadFormatOptions:ve,status:_?"loading":"warning",outlined:!0,fontStyle:_?"italic":"normal",disabled:_,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",downloadFormats:[{title:"Download as PDF",format:"pdf"},{title:"Download as JPEG",format:"jpeg"},{title:"Download as PNG",format:"png"}],onDownloadButtonClick:()=>!n||(S().fire({icon:"error",title:"Download error",text:"You're yet to create the Letter. Create Letter first, then download."}),!1),onFormatSelected:e=>{(async(e,t)=>{if(N)return;const n=[fe().checker(e.logo,e)],a=await Promise.all(n),r=Se(e);if(a.includes(!1)||r.hasError)return R(),void S().fire({title:"Download Error",text:"Check your upload fields to fix some missing files affecting your download.",icon:"error"});D(!0),Q.downloadSvg({width:L,height:A,companyName:e.companyName,title:e.title,senderInfo:e.senderInfo,recipientInfo:e.recipientInfo,signatories:ye,body:e.body,logoUrl:(0,T.VT)(M,e.id,"logo"),watermarkWithLogo:e.waterMarkWithLogo,grayScaleWaterMark:e.grayScaleWaterMark,stampCircleUrl:q.downloadImage,approvedStampUrl:B.downloadImage,paperTextureUrl:H.downloadImage,stampLogo:e.stampLogo,stampApprove:e.stampApprove,hasPaperTexture:e.hasPaperTexture,waterMarkUrl:e.is_freemium?V.downloadImage:null}).then((n=>{Z({description:"Your letter will download shortly.",status:"info",duration:4e3,isClosable:!0}),(0,z.T8)(n,t,"".concat((0,T.yZ)(e.title||e.companyName||""),"-").concat((new Date).toISOString(),"-letter")).then((e=>{D(!1),Y(!0),R(),setTimeout((()=>{Y(!1)}),8e3)})).catch((e=>{D(!1),R(),S().fire({icon:"error",title:"Download Error",text:e.message})}))})).catch((e=>{D(!1),R(),S().fire({icon:"error",title:"Download Error",text:e.message})}))})(t,e.format)},rightIcon:(0,a.jsx)(I.ZJh,{}),children:_?"Please wait...":"Download Letter"}),W?(0,a.jsx)(J.Z,{status:"success",children:"Check your download folder for the downloaded Letter."}):null,t.is_freemium&&!n?(0,a.jsx)(b.Z,{status:_&&Te?"loading":"error",fontStyle:_&&Te?"italic":"normal",disabled:_,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:()=>{(e=>{if(j){E(!0);var t=e?JSON.parse(JSON.stringify(e)):{};t.id&&delete t.id,e.is_freemium||1!=Object.keys(t).length||Ce(!0),j(!1,e).then((e=>{E(!1),S().fire({icon:"success",title:"Success",text:Te?"Watermark successfully removed.":"Letter successfully updated."}),Ce(!1)})).catch((e=>{E(!1),Ce(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&S().fire({icon:"error",title:n?"Shipping Creation Error":"Shipping Update Error",text:e.message})}))}})({id:t.id,is_freemium:!1})},rightIcon:_&&Te?(0,a.jsx)(k.Z,{size:"1rem",color:"#fff",type:k.Z.TYPES.threeDots}):(0,a.jsx)(I.arg,{}),children:_&&Te?"Please wait...":"Remove Watermark"}):null]})]})})})]})})};const fe=()=>({id:r.XA,authorId:"uid",hasPaperTexture:!1,waterMarkWithLogo:!0,grayScaleWaterMark:!0,stampLogo:!0,stampApprove:!0,signatoryNames:[],signatoryTitles:[],signatures:[],companyName:"Amazon Inc",title:"Letter for Loan Repayment",senderInfo:"123 Main Street, Cityville, State, 12345, USA\nceo@mycompany.com\n+1 (555) 123-4567",recipientInfo:"Full Name: John Doe\nAddress: 456 Oak Avenue, Townsville, State, 54321, USA\nEmail: john.doe@email.com\nPhone Number: +1 (555) 987-6543",body:"Dear Mrs Jessica,\n\nWe are writing to you regarding your outstanding loan payment of $200 to Miss McDonald's\nRebecca. As per your previous agreement, this payment was due on September 1st, 2023.\nHowever, we have not received any payment as of today, November 11, 2023.\n\nIn accordance with the terms of your loan agreement, a late payment fee of $150 has been\nadded to your outstanding balance. This brings your total outstanding balance to $350.\n\nWe kindly request that you make full payment of $350 by December 1st, 2023. Failure to do\nso will result in further legal action, including the possibility of arrest.\n\nSincerely,\nAmanda, Sales representative.",is_freemium:!0}),ye={newData:"New Letter",noDataError:"No Letter selected",newTitle:"Letter Type",updateTitle:"Update Cost",updateMessage:"The update will cost you {PRICE}.",freeTitle:"Test Letter(Free).",freeMessage:"The downloaded Letter will have watermark.",paidTitle:"Clean Letter({PRICE})",paidMessage:"The downloaded Letter will be clean with no watermark.",signInMessage:"Please sign in to save your Letter.",signUpMessage:"Please sign up to save your Letter.",createButtonText:"Create Letter",noChatToListMessage:"Your Letters will show here",deleteWarning:"Are you sure you want to permanently delete this already saved letter?"};var we=n(9555),be=n(3348),ve=n(3183);var ke=()=>{const e=r.Tk.letter.collectionRuleName,t=r.Tk.letter.toolVersionCode,n=(0,we.Z)(20),{getCurrentTimelineData:s}=n,l=["signatures","logo"],c=["is_freemium"],d=(0,be.Z)(e,50,fe,c,l),{selectedIsNew:m,selectedData:p}=d,h=(0,ve.Z)({collectionName:e,fileFields:l,toolVersionCode:t,historyProps:n,dataSourceProps:d,publishTexts:ye,updatableFields:c}),{savingData:g,setSavingData:u,handleUpdateData:x,handlePublishData:f}=h,y=(0,i.useMemo)((()=>(0,a.jsx)(xe,{collectionName:e,isNew:m(),data:p,saving:g,setSaving:u,hasPendingSave:s((null===p||void 0===p?void 0:p.id)||"none").totalUpdates>1||m(),onUpdateData:x,onPublishData:f})),[m,p,g,u,s,x,f,e]);return(0,a.jsx)(o.Z,{tool:r.Tk.letter,form:y,historyProps:n,dataSourceProps:d,dataHandlerProps:h,publishTexts:ye,getItemName:e=>e.companyName||"No Company Name",getItemBadge:e=>{const t=e;return(0,T.bh)(t.title||"No Title",12)},getItemDescription:e=>e.date,onOverWriteCopiedData:e=>({...e,signatoryNames:[],signatoryTiles:[],signatures:[],logo:null,is_freemium:!0})})}}},function(e){e.O(0,[847,201,394,493,162,814,238,590,986,910,774,888,179],(function(){return t=8398,e(e.s=t);var t}));var t=e.O();_N_E=t}]);