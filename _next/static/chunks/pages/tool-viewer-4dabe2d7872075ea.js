(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{89879:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tool-viewer",function(){return o(40030)}])},99020:function(e,t,o){"use strict";var n=o(85893),a=o(55154),l=o(85461),i=o(94345),s=o(48783),d=o(59501);t.Z=e=>{let{title:t,children:o,onDownloadButtonClick:r,downloadFormats:c,onFormatSelected:u,showDownloadFormatOptions:m,setShowDownloadFormatOptions:p,hideButton:v,...f}=e;return(0,n.jsxs)(n.Fragment,{children:[v?null:(0,n.jsx)(l.Z,{rightIcon:(0,n.jsx)(a.ZJh,{}),...f,onClick:()=>{1==c.length?u(c[0]):r()&&p(!0)},children:o}),m?(0,n.jsx)(i.Z,{justifyContent:"flex-start",alignItems:"center",title:t||"Select Format",isOpen:!0,onClose:()=>{p(!1)},children:(0,n.jsx)(s.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",children:c.map(((e,t)=>(0,n.jsx)(d.Z,{w:"100%",mb:2,status:"warning",onClick:()=>{u(e),p(!1)},children:e.title},t)))})}):null]})}},40030:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return K}});var n=o(85893),a=o(5397),l=o(67294),i=o(7963),s=o(34292),d=o(71293),r=o(48783),c=o(93717),u=o(57747),m=o(70959),p=o(44461),v=o(24124),f=o(84028),h=o(90889),g=o(67918),w=o(85461),x=o(56691),y=o(86455),T=o.n(y),j=o(53754),D=o(80419),S=o(55154),I=o(11802),_=o(96918),b=o(88627),C=o(33471),k=o(21344),Z=o(41160),E=o(34365),P=o(39461),F=o(62122),N=o(38118),O=o(32033),W=o(9849),M=o(92709),B=o(99020),A=o(33871),U=o(83613),Y=o(74054);var L=e=>{let{tool:t,templatesResults:o,data:a,isNew:y,onUpdateData:L,onPublishData:R,saving:z,setSaving:J,hasPendingSave:H,collectionName:X,publishTexts:G,initData:V}=e;if(!a)return null;const K=(0,i.p)(),{user:q,sdkConfig:Q}=(0,P.P)(),[$,ee]=(0,l.useState)(!1),[te,oe]=(0,l.useState)(!1),{templatesLoading:ne,templatesError:ae,selectedTemplateLoading:le,selectedTemplateError:ie,parsingTemplate:se,templates:de,selectedTemplate:re,selectedTemplateData:ce,workingTemplate:ue,workingTemplateData:me,setAsDefaulTemplate:pe,setWorkingTemplate:ve,setWorkingTemplateData:fe,selectTemplate:he,parseTemplateSvg:ge,saveTemplate:we,getDefaultTemplateId:xe,currentTemplateId:ye}=o||{},{error:Te,fonts:je,setFonts:De,uploadFonts:Se}=(0,U.Z)(null===ce||void 0===ce?void 0:ce.svg),[Ie,_e]=(0,l.useState)({}),[be,Ce]=(0,l.useState)(!0),[ke,Ze]=(0,l.useState)(!1),[Ee,Pe]=(0,l.useState)(),[Fe,Ne]=(0,l.useState)(),[Oe,We]=(0,l.useState)("front");(0,Y.Z)(a,(e=>{y&&V&&V(e)}),null===ce||void 0===ce?void 0:ce.fields,ye),(0,l.useEffect)((()=>{}),[re]);const Me=e=>e.includes("faceshot")?"passport photograph.":e.includes("sign")?"signature":"image",Be=(e,t,o)=>new Promise(((n,a)=>{if(t)if((0,j.VT)("other_tools_data",o,e))_e({...Ie,[e]:""}),n(null);else{const t=Me(e);n("".concat(e,":The ").concat(t," was not found on this browser. Please provide the ").concat(t," again."))}else{n("".concat(e,":Invalid ").concat(Me(e)))}})),Ae=async(e,o)=>{if($||!ce)return;const n=[];for(const t of Object.keys(e))(t.endsWith(".sign")||t.endsWith(".faceshot"))&&n.push(Be(t,e[t],e.id));const a=(await Promise.all(n)).filter((e=>null!=e));if(a.length>0){const e={};for(const t of a){const o=t.split(":");e[o[0]]=o[1]}return _e({...Ie,...e}),void T().fire({title:"Download Error",text:"Check your upload fields to fix some missing files affecting your download.",icon:"error"})}ee(!0);const l=!0!==(null===re||void 0===re?void 0:re.split_on_download)||e.is_freemium?1024:2048;W.Z.getSvg(e,ce,je,e.is_freemium,l).then((n=>{K({description:"Your ".concat((null===t||void 0===t?void 0:t.name)||"item"," will download shortly."),status:"info",duration:4e3,isClosable:!0}),(0,C.T8)(n,o,"".concat((0,j.yZ)("".concat((null===t||void 0===t?void 0:t.name)||"item","-").concat((e=>{if(!e)return[];const t=[];for(const[o,n]of Object.entries(e)){const{name:e,type:a}=(0,A.py)(o),{directive:l}=(0,A.mA)(e||"");l&&t.push(n)}return t})(e).join("_"))),"-").concat((new Date).toISOString()),(null===re||void 0===re?void 0:re.split_on_download)&&Oe?Oe:void 0).then((e=>{ee(!1),oe(!0),setTimeout((()=>{oe(!1)}),8e3)})).catch((e=>{ee(!1),T().fire({icon:"error",title:"Download Error",text:e.message})}))})).catch((e=>{ee(!1),T().fire({icon:"error",title:"Download Error",text:e.message})}))},[Ue,Ye]=(0,l.useState)(!1);(0,l.useEffect)((()=>{}),[re]),(0,l.useEffect)((()=>{!y&&a&&de&&(null===re||void 0===re?void 0:re.id)!=a.template_id?he(a.template_id):y&&de&&!re&&he(xe(de))}),[de,a,y]);const Le=()=>{if(R){const e=a.template_id?void 0:{template_id:null===re||void 0===re?void 0:re.id};R(!1,null,e).then((e=>{J(!1),K({description:y?(null===G||void 0===G?void 0:G.saveSuccess)||"New Item successfully saved.":(null===G||void 0===G?void 0:G.updateSuccess)||"Item successfully updated.",status:"success",duration:4e3,isClosable:!0}),!0===(null===re||void 0===re?void 0:re.split_on_download)?Ne(!0):Pe(!0)})).catch((e=>{J(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&T().fire({icon:"error",title:y?"Tool Creation Error":"Tool Update Error",text:e.message})}))}else J(!1)},Re=(0,l.useMemo)((()=>ce?(0,n.jsx)(O.Z,{isFieldsEditMode:!1,created:!y,showFieldsErrors:be,fields:ce.fields,images:ce.images,masks:ce.masks,data:a,isDragable:!1,onAllFieldsDataChange:e=>{L&&L({...e||{}})},onFieldDataChange:(e,t)=>{L&&L({id:a.id,[e]:t})},fieldDataErrorMessage:Ie,onSetFieldDataErrorMessage:_e}):null),[ce,y,be,a,L]);return(0,n.jsx)(b.Z,{tool:t,maxHeaderWidth:"100%",children:(0,n.jsxs)(g.Z,{w:"100%",maxW:"100%",h:"auto",children:[a.id!=I.XA?(0,n.jsx)(s.U,{flexWrap:"wrap",justifyContent:"space-between",children:(0,n.jsxs)(s.U,{flexWrap:"wrap",children:[(0,n.jsxs)(d.x,{m:"0px !important",mr:1,display:"none",children:["Tracking No:"," "]}),(0,n.jsx)(D.Z,{display:"none",fontWeight:"bold",m:"0px !important",mr:2,children:a.id})]})}):(0,n.jsxs)(r.g,{alignItems:"flex-start",children:[(0,n.jsxs)(s.U,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",children:[(null===t||void 0===t?void 0:t.icon)&&M.Z[t.icon]?M.Z[t.icon].element():(0,n.jsx)(S.sYB,{})," ",(0,n.jsx)(d.x,{m:"0px !important",mr:1,children:(null===G||void 0===G?void 0:G.newData)||"New Item"})]}),(0,n.jsxs)(d.x,{as:"div",fontSize:"13px",children:["Click the info icon(",(0,n.jsx)(S.DAO,{style:{display:"inline"}}),") beside each form fields for help on what to enter."]})]}),(0,n.jsx)(c.k,{w:"100%",flexWrap:"wrap",m:"15px auto",children:(0,n.jsx)(u.xu,{w:{base:"100%"},bg:"#dd6b20",p:"1rem",children:(0,n.jsxs)(u.xu,{bg:(0,_.Z)("cardBg.light","cardBg.dark"),minH:"80vh",w:"100%",p:{base:"1rem"},borderRadius:"24px",children:[(0,n.jsxs)(m.m,{isFitted:!0,variant:"enclosed",children:[(0,n.jsxs)(p.t,{mb:"1em",children:[(0,n.jsx)(v.O,{children:"Edit Mode"}),(0,n.jsx)(v.O,{children:"View Mode"})]}),(0,n.jsxs)(f.n,{children:[(0,n.jsxs)(h.x,{children:[y&&de&&!ne&&re&&!le?(0,n.jsx)(F.Z,{w:"100%",id:"Form_".concat(a.id,"_select_template"),title:"".concat((null===t||void 0===t?void 0:t.name)||"Document"," Type"),mb:4,helperText:"Select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),info:"This is where you select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),templates:de,createdTemplatesKeys:Object.keys(de),value:ue,onChange:e=>{e&&he(e.id)},onCheckInfo:()=>null,errorMessage:null,contactLink:(null===Q||void 0===Q?void 0:Q.contact_link)?(0,E.e3)(null===Q||void 0===Q?void 0:Q.contact_link,"Hello. I can't find the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," I want on softbaker.")):null},"Form_".concat(a.id,"_select_template")):null,ne||!re||le?(0,n.jsx)(N.Z,{message:"Loading template assets. Please wait...",minH:"100px"}):(0,n.jsx)(n.Fragment,{children:Re})]}),(0,n.jsx)(h.x,{bg:"#dcdcdc",p:"0px",children:(0,n.jsx)(Z.Z,{width:"100%",message:"Drag around to view the whole tool",height:{base:500,md:728,lg:1024},pos:"relative",overflowX:"hidden",overflowY:"hidden",children:(0,n.jsx)(W.Z,{fonts:je,isLoading:$,width:{base:512,md:728,lg:1024},data:a,templateData:me,showWatermark:!!a.is_freemium})})})]})]}),(0,n.jsxs)(r.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",my:8,children:[y?(0,n.jsx)(w.Z,{status:z&&!Ue?"loading":"warning",fontStyle:z&&!Ue?"italic":"normal",disabled:z||ne||!re||le,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:async()=>{if(!R||!we||!re)return;J(!0);const e=(()=>{if(_e({}),null===ce||void 0===ce?void 0:ce.fields){const e={},t=[],o=[],n={text:"provided",sign:"provided",image_upload:"uploaded",faceshot:"uploaded"};for(const l of Object.values(ce.fields))if(!a[l.id]&&"gen"!=l.type&&(e[l.id]="No ".concat(l.name," ").concat(n[l.type]||"provided","."),t.push(l.name),o.length<2)){const{name:e,type:t}=(0,A.py)(l.id),{directive:n}=(0,A.mA)(e||"");["name","desc"].includes(n)&&o.push(l.name)}return _e(e),{all:t,compulsory:o}}return{all:[],compulsory:[]}})();e.compulsory.length>0?(J(!1),T().fire({title:"Form Entry Error",icon:"error",text:1==e.compulsory.length?"".concat(e.compulsory[0]," cannot be empty!"):"".concat(e.compulsory.join(", ")," cannot be empty.")})):e.all.length>0?(J(!1),T().fire({title:"Some fields are not provided",icon:"warning",text:1==e.all.length?"No ".concat(e.all[0]," provided! Are you sure you want to create the ").concat((null===t||void 0===t?void 0:t.name)||"item"," without it?"):"Are you sure you want to create the ".concat((null===t||void 0===t?void 0:t.name)||"item"," without providing them? The affected fields are ").concat(e.all.join(", "),"."),showCancelButton:!0,confirmButtonText:"Yes, Contine",cancelButtonText:"No"}).then((e=>{e.isConfirmed&&(J(!0),Le())}))):Le()},rightIcon:z&&!Ue?(0,n.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):null,children:z&&!Ue?"Please wait...":"Create ".concat((null===t||void 0===t?void 0:t.name)||"Item")}):null,!0!==(null===re||void 0===re?void 0:re.split_on_download)?null:(0,n.jsx)(B.Z,{title:"Select Side",showDownloadFormatOptions:Fe,setShowDownloadFormatOptions:Ne,status:z?"loading":"warning",outlined:!0,fontStyle:z?"italic":"normal",disabled:z||ne||!re||le,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",downloadFormats:[{title:"Front Side",format:"front"},{title:"Back Side",format:"back"}],onDownloadButtonClick:()=>!y||(T().fire({icon:"error",title:"Download error",text:"You're yet to create the ".concat((null===t||void 0===t?void 0:t.name)||"Item",". Create the ").concat((null===t||void 0===t?void 0:t.name)||"Item"," first, then download.")}),!1),onFormatSelected:e=>{We(e.format),Pe(!0)},rightIcon:(0,n.jsx)(S.ZJh,{}),children:z?"Please wait...":"Download ".concat((null===t||void 0===t?void 0:t.name)||"Item")}),(0,n.jsx)(B.Z,{hideButton:!0===(null===re||void 0===re?void 0:re.split_on_download),showDownloadFormatOptions:Ee,setShowDownloadFormatOptions:Pe,status:z?"loading":"warning",outlined:!0,fontStyle:z?"italic":"normal",disabled:z||ne||!re||le,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",downloadFormats:[{title:"Download as PDF",format:"pdf"},{title:"Download as JPEG",format:"jpeg"},{title:"Download as PNG",format:"png"}],onDownloadButtonClick:()=>!y||(T().fire({icon:"error",title:"Download error",text:"You're yet to create the ".concat((null===t||void 0===t?void 0:t.name)||"Item",". Create the ").concat((null===t||void 0===t?void 0:t.name)||"Item"," first, then download.")}),!1),onFormatSelected:e=>{Ae(a,e.format)},rightIcon:(0,n.jsx)(S.ZJh,{}),children:z?"Please wait...":"Download ".concat((null===t||void 0===t?void 0:t.name)||"Item")},"formats"),te?(0,n.jsxs)(k.Z,{status:"success",children:["Check your download folder for the downloaded ",(null===t||void 0===t?void 0:t.name)||"Item","."]}):null,a.is_freemium&&!y?(0,n.jsx)(w.Z,{status:z&&Ue?"loading":"error",fontStyle:z&&Ue?"italic":"normal",disabled:z,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:()=>{(e=>{if(!R)return;J(!0);var o=e?JSON.parse(JSON.stringify(e)):{};o.id&&delete o.id,e.is_freemium||1!=Object.keys(o).length||Ye(!0);const n=!e.is_freemium&&1==Object.keys(o).length;R(!1,e).then((e=>{J(!1),T().fire({icon:"success",title:"Success",text:n?"Watermark successfully removed.":"".concat((null===t||void 0===t?void 0:t.name)||"Item"," successfully updated.")}),Ye(!1)})).catch((e=>{J(!1),Ye(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&T().fire({icon:"error",title:"".concat((null===t||void 0===t?void 0:t.name)||"Item",y?" Creation Error":" Update Error"),text:e.message})}))})({id:a.id,is_freemium:!1})},rightIcon:z&&Ue?(0,n.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):(0,n.jsx)(S.arg,{}),children:z&&Ue?"Please wait...":"Remove Watermark"}):null]})]})})})]})})};const R=()=>({id:I.XA,authorId:"uid",is_freemium:!0}),z={newData:"New Tool",noDataError:"No Tool selected",newTitle:"Tool Type",updateTitle:"Update Cost",updateMessage:"The update will cost you {PRICE}.",freeTitle:"Test Tool(Free).",freeMessage:"The downloaded Tool will have watermark.",paidTitle:"Clean Tool({PRICE})",paidMessage:"The downloaded Tool will be clean with no watermark.",signInMessage:"Please sign in to save your Tool.",signUpMessage:"Please sign up to save your Tool.",createButtonText:"Create Tool",noChatToListMessage:"Your Tool will show here",deleteWarning:"Are you sure you want to permanently delete this already saved tool?",saveSuccess:"New Tool successfully saved.",updateSuccess:"Tool successfully updated."};var J=o(99555),H=o(53348),X=o(63183),G=o(3683),V=o(45326);var K=()=>{const e="other_tools_data",t=(0,V.Z)(),{sdkConfig:o,getTool:i}=(0,P.P)(),[s,d]=(0,l.useState)(),[r,c]=(0,l.useState)({}),[u,m]=(0,l.useState)([]),p=(0,G.Z)(null===r||void 0===r?void 0:r.templates_url,!0);(0,l.useEffect)((()=>{var e;if(null===(e=p.selectedTemplateData)||void 0===e?void 0:e.fields){const e=[];for(const t of Object.values(p.selectedTemplateData.fields))["image_upload","sign","faceshot"].includes(t.type)&&e.push(t.id);m(e)}}),[p.selectedTemplate]),(0,l.useEffect)((()=>{d(null===t||void 0===t?void 0:t.id)}),[t]),(0,l.useEffect)((()=>{if((null===o||void 0===o?void 0:o.tools)&&s){const t=i(s);t&&c({...t,collectionRuleName:e})}}),[o,s]);const v=(0,J.Z)(20),{getCurrentTimelineData:f}=v,h=(0,l.useCallback)(R,[]),g=["is_freemium"],w=(0,H.Z)(50,h,g,u,void 0,void 0,null,s),{selectedIsNew:x,selectedData:y,initData:T}=w,j={...z,newData:"New ".concat((null===r||void 0===r?void 0:r.name)||"item"),noDataError:"No ".concat((null===r||void 0===r?void 0:r.name)||"item"," selected"),newTitle:"".concat((null===r||void 0===r?void 0:r.name)||"Item"," Type"),freeTitle:"Test ".concat((null===r||void 0===r?void 0:r.name)||"Item","(Free)."),freeMessage:"The downloaded ".concat((null===r||void 0===r?void 0:r.name)||"Item"," will have watermark."),paidTitle:"Clean ".concat((null===r||void 0===r?void 0:r.name)||"Item","({PRICE})"),paidMessage:"The downloaded ".concat((null===r||void 0===r?void 0:r.name)||"Item"," will be clean with no watermark."),signInMessage:"Please sign in to save your ".concat((null===r||void 0===r?void 0:r.name)||"Item","."),signUpMessage:"Please sign up to save your ".concat((null===r||void 0===r?void 0:r.name)||"Item","."),createButtonText:"Create ".concat((null===r||void 0===r?void 0:r.name)||"Item"),noChatToListMessage:"Your list of ".concat((null===r||void 0===r?void 0:r.name)||"Item"," will show here"),deleteWarning:"Are you sure you want to permanently delete this already saved ".concat((null===r||void 0===r?void 0:r.name)||"Item","?"),saveSuccess:"New ".concat((null===r||void 0===r?void 0:r.name)||"Item"," successfully saved."),updateSuccess:"".concat((null===r||void 0===r?void 0:r.name)||"Item"," successfully updated.")},D=(0,X.Z)({collectionName:e,fileFields:u,toolId:s,historyProps:v,dataSourceProps:w,publishTexts:j,updatableFields:g}),{savingData:S,setSavingData:I,handleUpdateData:_,handlePublishData:b}=D,C=(0,l.useMemo)((()=>(0,n.jsx)(L,{tool:r,initData:T,templatesResults:p,publishTexts:j,collectionName:e,isNew:x(),data:y,saving:S,setSaving:I,hasPendingSave:f((null===y||void 0===y?void 0:y.id)||"none").totalUpdates>1||x(),onUpdateData:_,onPublishData:b})),[r,j,e,y,S,T,p]),k=e=>{var t,o,n;for(const[a,l]of Object.entries(e)){const{name:e,type:i}=(0,A.py)(a),{directive:s}=(0,A.mA)(e||"");if(i&&["text","textarea"].includes(i)&&s)switch(s){case"name":t=l;break;case"desc":o=l;break;case"small":n=l}}return{title:t,desc:o,small:n}};return r?(0,n.jsx)(a.Z,{tool:r,form:C,historyProps:v,dataSourceProps:w,dataHandlerProps:D,publishTexts:j,getItemName:e=>k(e).title||"",getItemDescription:e=>k(e).desc||"",getItemBadge:e=>k(e).small||"",onOverWriteCopiedData:e=>(e=>{const t={};for(const[o,n]of Object.entries(e)){const{name:e,type:a}=(0,A.py)(o),{directive:l}=(0,A.mA)(e||"");a&&["upload"].includes(a)||l||(t[o]=n)}return{...t,is_freemium:!0}})(e)}):(0,n.jsx)(N.Z,{title:"Loading tool..."})}}},function(e){e.O(0,[847,214,958,614,630,201,939,493,505,162,506,814,238,666,986,879,687,106,393,774,888,179],(function(){return t=89879,e(e.s=t);var t}));var t=e.O();_N_E=t}]);