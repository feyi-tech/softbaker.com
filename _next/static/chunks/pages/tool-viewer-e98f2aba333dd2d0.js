(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{89879:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tool-viewer",function(){return a(40030)}])},34365:function(e,t,a){"use strict";a.d(t,{Iu:function(){return l},Qj:function(){return o},Yg:function(){return n},bA:function(){return s},e3:function(){return r},h$:function(){return i}});const o=(e,t,a,o)=>0==e?0:(e=e*t/a,o?parseFloat(e.toFixed(o)):Math.ceil(e)),n=(e,t,a,o)=>0==e?0:(e=e*t/a,o?parseFloat(e.toFixed(o)):Math.ceil(e)),l=(e,t,a,l,s,i)=>"translate(".concat(o(e,a,l,3)," ").concat(n(t,s,i,3),") "),s=(e,t,a,l,s,i)=>"scale(".concat(o(e,a,l,3)," ").concat(n(t,s,i,3),") ");const i=e=>e?Array.isArray(e)?e:"object"==typeof e?function(e){const t=[];return Object.keys(e).sort(((e,t)=>parseInt("".concat(e))-parseInt("".concat(t)))).forEach((a=>{t.push(e[a])})),t}(e):[]:[],r=(e,t)=>{if(!t)return e;var a="".concat(t.replace(/\n/g,"%0A")).replace(/[ ]/g,"%20");return e.split("?")[0]+"?text=".concat(a)}},99020:function(e,t,a){"use strict";var o=a(85893),n=a(55154),l=a(85461),s=a(94345);t.Z=e=>{let{children:t,onDownloadButtonClick:a,downloadFormats:i,onFormatSelected:r,showDownloadFormatOptions:d,setShowDownloadFormatOptions:c,...u}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.Z,{rightIcon:(0,o.jsx)(n.ZJh,{}),...u,onClick:()=>{1==i.length?r(i[0]):a()&&c(!0)},children:t}),d?(0,o.jsx)(s.Z,{justifyContent:"flex-start",alignItems:"center",title:"Select Format",isOpen:!0,onClose:()=>{c(!1)},children:i.map(((e,t)=>(0,o.jsx)(l.Z,{mb:"1rem",status:"warning",onClick:()=>{r(e),c(!1)},children:e.title},t)))}):null]})}},40030:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return G}});var o=a(85893),n=a(5397),l=a(67294),s=a(7963),i=a(34292),r=a(71293),d=a(48783),c=a(93717),u=a(57747),m=a(70959),p=a(44461),h=a(24124),f=a(84028),v=a(90889),g=a(67918),w=a(85461),x=a(56691),T=a(86455),y=a.n(T),j=a(53754),D=a(80419),b=a(55154),S=a(11802),I=a(96918),k=a(88627),C=a(33471),_=a(21344),E=a(41160),Z=a(34365),P=a(16344),F=a(62122),N=a(38118),M=a(7809),O=a(4623),W=a(92709),A=a(99020);var U=e=>{let{tool:t,templatesResults:a,data:n,isNew:T,onUpdateData:U,onPublishData:z,saving:R,setSaving:B,hasPendingSave:L,collectionName:Y,publishTexts:H}=e;if(!n)return null;const J=(0,s.p)(),{user:X,sdkConfig:G}=(0,P.P)(),[Q,V]=(0,l.useState)(!1),[q,K]=(0,l.useState)(!1),[$,ee]=(0,l.useState)(!1),{templatesLoading:te,templatesError:ae,selectedTemplateLoading:oe,selectedTemplateError:ne,parsingTemplate:le,templates:se,selectedTemplate:ie,selectedTemplateData:re,workingTemplate:de,workingTemplateData:ce,setAsDefaulTemplate:ue,setWorkingTemplate:me,setWorkingTemplateData:pe,selectTemplate:he,parseTemplateSvg:fe,saveTemplate:ve,deleteTemplate:ge}=a||{},[we,xe]=(0,l.useState)({}),[Te,ye]=(0,l.useState)(!1),[je,De]=(0,l.useState)(!1),[be,Se]=(0,l.useState)();(0,l.useEffect)((()=>{ie&&U&&U({id:n.id,template_id:ie.id})}),[ie]),(0,l.useEffect)((()=>{!T&&n&&se&&he(n.template_id)}),[se,n,T]);return(0,o.jsx)(k.Z,{tool:t,maxHeaderWidth:"100%",children:(0,o.jsxs)(g.Z,{w:"100%",maxW:"100%",h:"auto",children:[n.id!=S.XA?(0,o.jsx)(i.U,{flexWrap:"wrap",justifyContent:"space-between",children:(0,o.jsxs)(i.U,{flexWrap:"wrap",children:[(0,o.jsxs)(r.x,{m:"0px !important",mr:1,display:"none",children:["Tracking No:"," "]}),(0,o.jsx)(D.Z,{display:"none",fontWeight:"bold",m:"0px !important",mr:2,children:n.id})]})}):(0,o.jsxs)(d.g,{alignItems:"flex-start",children:[(0,o.jsxs)(i.U,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",children:[(null===t||void 0===t?void 0:t.icon)?W.Z[t.icon].element():null," ",(0,o.jsx)(r.x,{m:"0px !important",mr:1,children:(null===H||void 0===H?void 0:H.newData)||"New Item"})]}),(0,o.jsxs)(r.x,{as:"div",fontSize:"13px",children:["Click the info icon(",(0,o.jsx)(b.DAO,{style:{display:"inline"}}),") beside each form fields for help on what to enter."]})]}),(0,o.jsx)(c.k,{w:"100%",flexWrap:"wrap",m:"15px auto",children:(0,o.jsx)(u.xu,{w:{base:"100%"},bg:"#dd6b20",p:"1rem",children:(0,o.jsxs)(u.xu,{bg:(0,I.Z)("cardBg.light","cardBg.dark"),minH:"80vh",w:"100%",p:{base:"1rem"},borderRadius:"24px",children:[(0,o.jsxs)(m.m,{isFitted:!0,variant:"enclosed",children:[(0,o.jsxs)(p.t,{mb:"1em",children:[(0,o.jsx)(h.O,{children:"Edit Mode"}),(0,o.jsx)(h.O,{children:"View Mode"})]}),(0,o.jsxs)(f.n,{children:[(0,o.jsxs)(v.x,{children:[!T&&se&&Object.keys(se).length>1?(0,o.jsx)(F.Z,{w:"100%",id:"Form_".concat(n.id,"_select_template"),title:"".concat((null===t||void 0===t?void 0:t.name)||"Document"," Type"),mb:4,helperText:"Select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),info:"This is where you select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),templates:se,createdTemplatesKeys:Object.keys(se),value:de,onChange:e=>{e&&he(e.id)},onCheckInfo:()=>null,errorMessage:null,contactLink:(null===G||void 0===G?void 0:G.contact_link)?(0,Z.e3)(null===G||void 0===G?void 0:G.contact_link,"Hello. I can't find the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," I want on softbaker.")):null},"Form_".concat(n.id,"_select_template")):null,ie?(0,o.jsx)(o.Fragment,{children:te||oe?(0,o.jsx)(N.Z,{message:"Loading template assets...",minH:"100px"}):re?(0,o.jsx)(M.Z,{isFieldsEditMode:!1,created:je,showFieldsErrors:Te,fields:re.fields,images:re.images,masks:re.masks,data:n,isDragable:!1,onAllFieldsDataChange:e=>{U&&U({id:n.id,...e||{}})},onFieldDataChange:(e,t)=>{U&&U({id:n.id,[e]:t})},fieldDataErrorMessage:we,onSetFieldDataErrorMessage:xe}):null}):null]}),(0,o.jsx)(v.x,{bg:"#dcdcdc",p:"0px",children:(0,o.jsx)(E.Z,{width:"100%",message:"Drag around to view the whole tool",height:{base:500,md:728,lg:1024},pos:"relative",overflowX:"hidden",overflowY:"hidden",children:(0,o.jsx)(O.Z,{isLoading:Q,width:{base:512,md:728,lg:1024},data:n,templateData:ce,showWatermark:!!n.is_freemium})})})]})]}),(0,o.jsxs)(d.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",my:8,children:[T?(0,o.jsx)(w.Z,{status:R&&!$?"loading":"warning",fontStyle:R&&!$?"italic":"normal",disabled:R,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:async()=>{z&&ve&&ie&&(B(!0),ve().then((e=>{B(!1),console.info("parsedSvg:templatesUrl",e),z(!1,null).then((e=>{B(!1),J({description:T?(null===H||void 0===H?void 0:H.saveSuccess)||"New Item successfully saved.":(null===H||void 0===H?void 0:H.updateSuccess)||"Item successfully updated.",status:"success",duration:4e3,isClosable:!0}),Se(!0)})).catch((e=>{B(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&y().fire({icon:"error",title:T?"Tool Creation Error":"Tool Update Error",text:e.message})}))})).catch((e=>{B(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&y().fire({icon:"error",title:T?"Tool Creation Error":"Tool Update Error",text:e.message})})))},rightIcon:R&&!$?(0,o.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):null,children:R&&!$?"Please wait...":"Create ".concat((null===t||void 0===t?void 0:t.name)||"Item")}):null,(0,o.jsx)(A.Z,{showDownloadFormatOptions:be,setShowDownloadFormatOptions:Se,status:R?"loading":"warning",outlined:!0,fontStyle:R?"italic":"normal",disabled:R,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",downloadFormats:[{title:"Download as PDF",format:"pdf"},{title:"Download as JPEG",format:"jpeg"},{title:"Download as PNG",format:"png"}],onDownloadButtonClick:()=>!T||(y().fire({icon:"error",title:"Download error",text:"You're yet to create the ".concat((null===t||void 0===t?void 0:t.name)||"Item",". Create the ").concat((null===t||void 0===t?void 0:t.name)||"Item"," first, then download.")}),!1),onFormatSelected:e=>{(async(e,t)=>{if(Q||!re)return;await Promise.all([!0]),V(!0),O.Z.getSvg(e,re,!e.is_freemium,1024).then((a=>{J({description:"Your invoice will download shortly.",status:"info",duration:4e3,isClosable:!0}),(0,C.T8)(a,t,"".concat((0,j.yZ)("".concat(e.companyName,"_").concat(e.customerName)),"-").concat((new Date).toISOString(),"-invoice-").concat(e.invoiceNumber)).then((e=>{V(!1),K(!0),setTimeout((()=>{K(!1)}),8e3)})).catch((e=>{V(!1),y().fire({icon:"error",title:"Download Error",text:e.message})}))})).catch((e=>{V(!1),y().fire({icon:"error",title:"Download Error",text:e.message})}))})(n,e.format)},rightIcon:(0,o.jsx)(b.ZJh,{}),children:R?"Please wait...":"Download ".concat((null===t||void 0===t?void 0:t.name)||"Item")}),q?(0,o.jsxs)(_.Z,{status:"success",children:["Check your download folder for the downloaded ",(null===t||void 0===t?void 0:t.name)||"Item","."]}):null,n.is_freemium&&!T?(0,o.jsx)(w.Z,{status:R&&$?"loading":"error",fontStyle:R&&$?"italic":"normal",disabled:R,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:()=>{(e=>{if(z){B(!0);var t=e?JSON.parse(JSON.stringify(e)):{};t.id&&delete t.id,e.is_freemium||1!=Object.keys(t).length||ee(!0),z(!1,e).then((e=>{B(!1),y().fire({icon:"success",title:"Success",text:$?"Watermark successfully removed.":"Invoice successfully updated."}),ee(!1)})).catch((e=>{B(!1),ee(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&y().fire({icon:"error",title:T?"Shipping Creation Error":"Shipping Update Error",text:e.message})}))}})({id:n.id,is_freemium:!1})},rightIcon:R&&$?(0,o.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):(0,o.jsx)(b.arg,{}),children:R&&$?"Please wait...":"Remove Watermark"}):null]})]})})})]})})};const z=()=>({id:S.XA,authorId:"uid",is_freemium:!0}),R={newData:"New Tool",noDataError:"No Tool selected",newTitle:"Tool Type",updateTitle:"Update Cost",updateMessage:"The update will cost you {PRICE}.",freeTitle:"Test Tool(Free).",freeMessage:"The downloaded Tool will have watermark.",paidTitle:"Clean Tool({PRICE})",paidMessage:"The downloaded Tool will be clean with no watermark.",signInMessage:"Please sign in to save your Tool.",signUpMessage:"Please sign up to save your Tool.",createButtonText:"Create Tool",noChatToListMessage:"Your Tool will show here",deleteWarning:"Are you sure you want to permanently delete this already saved tool?",saveSuccess:"New Tool successfully saved.",updateSuccess:"Tool successfully updated."};var B=a(99555),L=a(53348),Y=a(63183),H=a(3683),J=a(45326),X=a(94713);var G=()=>{const e="other_tools_data",t=(0,J.Z)(),{sdkConfig:a,getTool:s}=(0,P.P)(),[i,r]=(0,l.useState)(),[d,c]=(0,l.useState)({allow_freemium:!0,authorId:"aoA3dBRQfvVbGztZorPw8t1zr2q2",create_price:13,createdAt:"2024-06-30T17:52:08+01:00",description:"Create fake Passport to prank your friends for fun.",icon:"penAlt",isActive:!0,isHidden:!0,is_freemium:!1,is_static:!1,name:"International Passport",templates_url:"https://r2.softbaker.com/templates/templates-rma8fzif.json?updates=1",update_price:.9999999999999999,updatedAt:"2024-07-08T19:58:49+01:00",youtube:"https://youtube.com/watch?v=9pFp-N5ySm0"}),[u,m]=(0,l.useState)([]),p=(0,H.Z)(null===d||void 0===d?void 0:d.templates_url);(0,l.useEffect)((()=>{var e;if(null===(e=p.selectedTemplateData)||void 0===e?void 0:e.fields){const e=[];for(const t of Object.values(p.selectedTemplateData.fields))["image_upload","sign"].includes(t.type)&&e.push(t.id);m(e)}}),[p.selectedTemplate]),(0,l.useEffect)((()=>{r(null===t||void 0===t?void 0:t.id)}),[t]),(0,l.useEffect)((()=>{if((null===a||void 0===a?void 0:a.tools)&&i){const t=s(i);t&&c({...t,collectionRuleName:e})}}),[a,i]);const h=(0,B.Z)(20),{getCurrentTimelineData:f}=h,v=(0,l.useCallback)(z,[]),g=["is_freemium"],w=(0,L.Z)(50,v,g,u,void 0,void 0,null,i),{selectedIsNew:x,selectedData:T}=w,y={...R,newData:"New ".concat((null===d||void 0===d?void 0:d.name)||"item"),noDataError:"No ".concat((null===d||void 0===d?void 0:d.name)||"item"," selected"),newTitle:"".concat((null===d||void 0===d?void 0:d.name)||"Item"," Type"),freeTitle:"Test ".concat((null===d||void 0===d?void 0:d.name)||"Item","(Free)."),freeMessage:"The downloaded ".concat((null===d||void 0===d?void 0:d.name)||"Item"," will have watermark."),paidTitle:"Clean ".concat((null===d||void 0===d?void 0:d.name)||"Item","({PRICE})"),paidMessage:"The downloaded ".concat((null===d||void 0===d?void 0:d.name)||"Item"," will be clean with no watermark."),signInMessage:"Please sign in to save your ".concat((null===d||void 0===d?void 0:d.name)||"Item","."),signUpMessage:"Please sign up to save your ".concat((null===d||void 0===d?void 0:d.name)||"Item","."),createButtonText:"Create ".concat((null===d||void 0===d?void 0:d.name)||"Item"),noChatToListMessage:"Your list of ".concat((null===d||void 0===d?void 0:d.name)||"Item"," will show here"),deleteWarning:"Are you sure you want to permanently delete this already saved ".concat((null===d||void 0===d?void 0:d.name)||"Item","?"),saveSuccess:"New ".concat((null===d||void 0===d?void 0:d.name)||"Item"," successfully saved."),updateSuccess:"".concat((null===d||void 0===d?void 0:d.name)||"Item"," successfully updated.")},j=(0,Y.Z)({collectionName:e,fileFields:u,toolId:i,historyProps:h,dataSourceProps:w,publishTexts:y,updatableFields:g}),{savingData:D,setSavingData:b,handleUpdateData:S,handlePublishData:I}=j,k=(0,l.useMemo)((()=>(0,o.jsx)(U,{tool:d,templatesResults:p,publishTexts:y,collectionName:e,isNew:x(),data:T,saving:D,setSaving:b,hasPendingSave:f((null===T||void 0===T?void 0:T.id)||"none").totalUpdates>1||x(),onUpdateData:S,onPublishData:I})),[d,y,e,T,D,p]),C=e=>{var t,a,o;for(const[n,l]of Object.entries(e)){const{name:e,type:s}=(0,X.py)(n),{directive:i}=(0,X.mA)(e||"");if(s&&["text","textarea"].includes(s)&&i&&i)switch(i){case"name":t=l;break;case"desc":a=l;break;case"small":o=l}}return{title:t,desc:a,small:o}};return d?(0,o.jsx)(n.Z,{tool:d,form:k,historyProps:h,dataSourceProps:w,dataHandlerProps:j,publishTexts:y,getItemName:e=>C(e).title||"",getItemDescription:e=>C(e).desc||"",getItemBadge:e=>C(e).desc||"",onOverWriteCopiedData:e=>({...e,is_freemium:!0})}):(0,o.jsx)(N.Z,{title:"Loading tool..."})}}},function(e){e.O(0,[847,630,201,394,493,162,986,814,238,226,46,372,106,862,774,888,179],(function(){return t=89879,e(e.s=t);var t}));var t=e.O();_N_E=t}]);