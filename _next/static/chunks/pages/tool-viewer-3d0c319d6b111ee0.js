(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{89879:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tool-viewer",function(){return o(40030)}])},34365:function(e,t,o){"use strict";o.d(t,{Iu:function(){return l},Qj:function(){return a},Yg:function(){return n},bA:function(){return i},e3:function(){return r},h$:function(){return s}});const a=(e,t,o,a)=>0==e?0:(e=e*t/o,a?parseFloat(e.toFixed(a)):Math.ceil(e)),n=(e,t,o,a)=>0==e?0:(e=e*t/o,a?parseFloat(e.toFixed(a)):Math.ceil(e)),l=(e,t,o,l,i,s)=>"translate(".concat(a(e,o,l,3)," ").concat(n(t,i,s,3),") "),i=(e,t,o,l,i,s)=>"scale(".concat(a(e,o,l,3)," ").concat(n(t,i,s,3),") ");const s=e=>e?Array.isArray(e)?e:"object"==typeof e?function(e){const t=[];return Object.keys(e).sort(((e,t)=>parseInt("".concat(e))-parseInt("".concat(t)))).forEach((o=>{t.push(e[o])})),t}(e):[]:[],r=(e,t)=>{if(!t)return e;var o="".concat(t.replace(/\n/g,"%0A")).replace(/[ ]/g,"%20");return e.split("?")[0]+"?text=".concat(o)}},99020:function(e,t,o){"use strict";var a=o(85893),n=o(55154),l=o(85461),i=o(94345);t.Z=e=>{let{children:t,onDownloadButtonClick:o,downloadFormats:s,onFormatSelected:r,showDownloadFormatOptions:d,setShowDownloadFormatOptions:c,...u}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{rightIcon:(0,a.jsx)(n.ZJh,{}),...u,onClick:()=>{1==s.length?r(s[0]):o()&&c(!0)},children:t}),d?(0,a.jsx)(i.Z,{justifyContent:"flex-start",alignItems:"center",title:"Select Format",isOpen:!0,onClose:()=>{c(!1)},children:s.map(((e,t)=>(0,a.jsx)(l.Z,{mb:"1rem",status:"warning",onClick:()=>{r(e),c(!1)},children:e.title},t)))}):null]})}},40030:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return V}});var a=o(85893),n=o(5397),l=o(67294),i=o(7963),s=o(34292),r=o(71293),d=o(48783),c=o(93717),u=o(57747),m=o(70959),p=o(44461),h=o(24124),v=o(84028),f=o(90889),g=o(67918),w=o(85461),x=o(56691),y=o(86455),T=o.n(y),j=o(53754),S=o(80419),D=o(55154),b=o(11802),I=o(96918),k=o(88627),C=o(33471),_=o(21344),E=o(41160),Z=o(34365),P=o(16344),F=o(62122),N=o(38118),O=o(32033),M=o(4623),W=o(92709),A=o(99020),U=o(94713);var B=e=>{let{tool:t,templatesResults:o,data:n,isNew:y,onUpdateData:B,onPublishData:G,saving:Y,setSaving:L,hasPendingSave:R,collectionName:z,publishTexts:H}=e;if(!n)return null;const J=(0,i.p)(),{user:V,sdkConfig:X}=(0,P.P)(),[K,Q]=(0,l.useState)(!1),[$,q]=(0,l.useState)(!1),ee=async(e,o)=>{if(console.info("parsedSvg.SVGG1: "),K||!ce)return;console.info("parsedSvg.SVGG2: ");await Promise.all([!0]);Q(!0),M.Z.getSvg(e,ce,e.is_freemium,1024).then((a=>{console.info("parsedSvg.SVG2: ",a),J({description:"Your ".concat((null===t||void 0===t?void 0:t.name)||"item"," will download shortly."),status:"info",duration:4e3,isClosable:!0}),(0,C.T8)(a,o,"".concat((0,j.yZ)("".concat((null===t||void 0===t?void 0:t.name)||"item","-").concat((e=>{if(!e)return[];const t=[];for(const[o,a]of Object.entries(e)){const{name:e,type:n}=(0,U.py)(o),{directive:l}=(0,U.mA)(e||"");l&&t.push(a)}return t})(e).join("_"))),"-").concat((new Date).toISOString())).then((e=>{console.info("parsedSvg.SVGG3: "),Q(!1),q(!0),setTimeout((()=>{q(!1)}),8e3)})).catch((e=>{Q(!1),T().fire({icon:"error",title:"Download Error",text:e.message})}))})).catch((e=>{Q(!1),T().fire({icon:"error",title:"Download Error",text:e.message})}))},[te,oe]=(0,l.useState)(!1),{templatesLoading:ae,templatesError:ne,selectedTemplateLoading:le,selectedTemplateError:ie,parsingTemplate:se,templates:re,selectedTemplate:de,selectedTemplateData:ce,workingTemplate:ue,workingTemplateData:me,setAsDefaulTemplate:pe,setWorkingTemplate:he,setWorkingTemplateData:ve,selectTemplate:fe,parseTemplateSvg:ge,saveTemplate:we,getDefaultTemplateId:xe}=o||{},[ye,Te]=(0,l.useState)({}),[je,Se]=(0,l.useState)(!0),[De,be]=(0,l.useState)(!1),[Ie,ke]=(0,l.useState)();(0,l.useEffect)((()=>{de&&B&&B({id:n.id,template_id:de.id})}),[de]),(0,l.useEffect)((()=>{!y&&n&&re&&(null===de||void 0===de?void 0:de.id)!=n.template_id?fe(n.template_id):y&&re&&!de&&fe(xe(re))}),[re,n,y]);const Ce=()=>{G?G(!1,null).then((e=>{L(!1),J({description:y?(null===H||void 0===H?void 0:H.saveSuccess)||"New Item successfully saved.":(null===H||void 0===H?void 0:H.updateSuccess)||"Item successfully updated.",status:"success",duration:4e3,isClosable:!0}),ke(!0)})).catch((e=>{L(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&T().fire({icon:"error",title:y?"Tool Creation Error":"Tool Update Error",text:e.message})})):L(!1)},_e=(0,l.useMemo)((()=>ce?(0,a.jsx)(O.Z,{isFieldsEditMode:!1,created:!y,showFieldsErrors:je,fields:ce.fields,images:ce.images,masks:ce.masks,data:n,isDragable:!1,onAllFieldsDataChange:e=>{B&&B({id:n.id,...e||{}})},onFieldDataChange:(e,t)=>{B&&B({id:n.id,[e]:t})},fieldDataErrorMessage:ye,onSetFieldDataErrorMessage:Te}):null),[ce,y,je,B]);return(0,a.jsx)(k.Z,{tool:t,maxHeaderWidth:"100%",children:(0,a.jsxs)(g.Z,{w:"100%",maxW:"100%",h:"auto",children:[n.id!=b.XA?(0,a.jsx)(s.U,{flexWrap:"wrap",justifyContent:"space-between",children:(0,a.jsxs)(s.U,{flexWrap:"wrap",children:[(0,a.jsxs)(r.x,{m:"0px !important",mr:1,display:"none",children:["Tracking No:"," "]}),(0,a.jsx)(S.Z,{display:"none",fontWeight:"bold",m:"0px !important",mr:2,children:n.id})]})}):(0,a.jsxs)(d.g,{alignItems:"flex-start",children:[(0,a.jsxs)(s.U,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",children:[(null===t||void 0===t?void 0:t.icon)?W.Z[t.icon].element():null," ",(0,a.jsx)(r.x,{m:"0px !important",mr:1,children:(null===H||void 0===H?void 0:H.newData)||"New Item"})]}),(0,a.jsxs)(r.x,{as:"div",fontSize:"13px",children:["Click the info icon(",(0,a.jsx)(D.DAO,{style:{display:"inline"}}),") beside each form fields for help on what to enter."]})]}),(0,a.jsx)(c.k,{w:"100%",flexWrap:"wrap",m:"15px auto",children:(0,a.jsx)(u.xu,{w:{base:"100%"},bg:"#dd6b20",p:"1rem",children:(0,a.jsxs)(u.xu,{bg:(0,I.Z)("cardBg.light","cardBg.dark"),minH:"80vh",w:"100%",p:{base:"1rem"},borderRadius:"24px",children:[(0,a.jsxs)(m.m,{isFitted:!0,variant:"enclosed",children:[(0,a.jsxs)(p.t,{mb:"1em",children:[(0,a.jsx)(h.O,{children:"Edit Mode"}),(0,a.jsx)(h.O,{children:"View Mode"})]}),(0,a.jsxs)(v.n,{children:[(0,a.jsxs)(f.x,{children:[y&&re&&Object.keys(re).length>1?(0,a.jsx)(F.Z,{w:"100%",id:"Form_".concat(n.id,"_select_template"),title:"".concat((null===t||void 0===t?void 0:t.name)||"Document"," Type"),mb:4,helperText:"Select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),info:"This is where you select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),templates:re,createdTemplatesKeys:Object.keys(re),value:ue,onChange:e=>{e&&fe(e.id)},onCheckInfo:()=>null,errorMessage:null,contactLink:(null===X||void 0===X?void 0:X.contact_link)?(0,Z.e3)(null===X||void 0===X?void 0:X.contact_link,"Hello. I can't find the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," I want on softbaker.")):null},"Form_".concat(n.id,"_select_template")):null,de?(0,a.jsx)(a.Fragment,{children:ae||le?(0,a.jsx)(N.Z,{message:"Loading template assets...",minH:"100px"}):_e}):null]}),(0,a.jsx)(f.x,{bg:"#dcdcdc",p:"0px",children:(0,a.jsx)(E.Z,{width:"100%",message:"Drag around to view the whole tool",height:{base:500,md:728,lg:1024},pos:"relative",overflowX:"hidden",overflowY:"hidden",children:(0,a.jsx)(M.Z,{isLoading:K,width:{base:512,md:728,lg:1024},data:n,templateData:me,showWatermark:!!n.is_freemium})})})]})]}),(0,a.jsxs)(d.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",my:8,children:[y?(0,a.jsx)(w.Z,{status:Y&&!te?"loading":"warning",fontStyle:Y&&!te?"italic":"normal",disabled:Y,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:async()=>{if(!G||!we||!de)return;L(!0);const e=(()=>{if(Te({}),null===ce||void 0===ce?void 0:ce.fields){const e={},t=[],o=[],a={text:"provided",sign:"provided",image_upload:"uploaded"};for(const l of Object.values(ce.fields))if(!n[l.id]&&"gen"!=l.type&&(e[l.id]="No ".concat(l.name," ").concat(a[l.type]||"provided","."),t.push(l.name),o.length<2)){const{name:e,type:t}=(0,U.py)(l.id),{directive:a}=(0,U.mA)(e||"");["name","desc"].includes(a)&&o.push(l.name)}return Te(e),{all:t,compulsory:o}}return{all:[],compulsory:[]}})();e.compulsory.length>0?(L(!1),T().fire({title:"Form Entry Error",icon:"error",text:1==e.compulsory.length?"".concat(e.compulsory[0]," cannot be empty!"):"".concat(e.compulsory.join(", ")," cannot be empty.")})):e.all.length>0?(L(!1),T().fire({title:"Some fields are not provided",icon:"warning",text:1==e.all.length?"No ".concat(e.all[0]," provided! Are you sure you want to create the ").concat((null===t||void 0===t?void 0:t.name)||"item"," without it?"):"Are you sure you want to create the ".concat((null===t||void 0===t?void 0:t.name)||"item"," without providing them? The affected fields are ").concat(e.all.join(", "),"."),showCancelButton:!0,confirmButtonText:"Yes, Contine",cancelButtonText:"No"}).then((e=>{e.isConfirmed&&(L(!0),Ce())}))):Ce()},rightIcon:Y&&!te?(0,a.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):null,children:Y&&!te?"Please wait...":"Create ".concat((null===t||void 0===t?void 0:t.name)||"Item")}):null,(0,a.jsx)(A.Z,{showDownloadFormatOptions:Ie,setShowDownloadFormatOptions:ke,status:Y?"loading":"warning",outlined:!0,fontStyle:Y?"italic":"normal",disabled:Y,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",downloadFormats:[{title:"Download as PDF",format:"pdf"},{title:"Download as JPEG",format:"jpeg"},{title:"Download as PNG",format:"png"}],onDownloadButtonClick:()=>!y||(T().fire({icon:"error",title:"Download error",text:"You're yet to create the ".concat((null===t||void 0===t?void 0:t.name)||"Item",". Create the ").concat((null===t||void 0===t?void 0:t.name)||"Item"," first, then download.")}),!1),onFormatSelected:e=>{ee(n,e.format)},rightIcon:(0,a.jsx)(D.ZJh,{}),children:Y?"Please wait...":"Download ".concat((null===t||void 0===t?void 0:t.name)||"Item")}),$?(0,a.jsxs)(_.Z,{status:"success",children:["Check your download folder for the downloaded ",(null===t||void 0===t?void 0:t.name)||"Item","."]}):null,n.is_freemium&&!y?(0,a.jsx)(w.Z,{status:Y&&te?"loading":"error",fontStyle:Y&&te?"italic":"normal",disabled:Y,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:()=>{(e=>{if(!G)return;L(!0);var o=e?JSON.parse(JSON.stringify(e)):{};o.id&&delete o.id,e.is_freemium||1!=Object.keys(o).length||oe(!0);const a=!e.is_freemium&&1==Object.keys(o).length;G(!1,e).then((e=>{L(!1),T().fire({icon:"success",title:"Success",text:a?"Watermark successfully removed.":"".concat((null===t||void 0===t?void 0:t.name)||"Item"," successfully updated.")}),oe(!1)})).catch((e=>{L(!1),oe(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&T().fire({icon:"error",title:"".concat((null===t||void 0===t?void 0:t.name)||"Item",y?" Creation Error":" Update Error"),text:e.message})}))})({id:n.id,is_freemium:!1})},rightIcon:Y&&te?(0,a.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):(0,a.jsx)(D.arg,{}),children:Y&&te?"Please wait...":"Remove Watermark"}):null]})]})})})]})})};const G=()=>({id:b.XA,authorId:"uid",is_freemium:!0}),Y={newData:"New Tool",noDataError:"No Tool selected",newTitle:"Tool Type",updateTitle:"Update Cost",updateMessage:"The update will cost you {PRICE}.",freeTitle:"Test Tool(Free).",freeMessage:"The downloaded Tool will have watermark.",paidTitle:"Clean Tool({PRICE})",paidMessage:"The downloaded Tool will be clean with no watermark.",signInMessage:"Please sign in to save your Tool.",signUpMessage:"Please sign up to save your Tool.",createButtonText:"Create Tool",noChatToListMessage:"Your Tool will show here",deleteWarning:"Are you sure you want to permanently delete this already saved tool?",saveSuccess:"New Tool successfully saved.",updateSuccess:"Tool successfully updated."};var L=o(99555),R=o(53348),z=o(63183),H=o(3683),J=o(45326);var V=()=>{const e="other_tools_data",t=(0,J.Z)(),{sdkConfig:o,getTool:i}=(0,P.P)(),[s,r]=(0,l.useState)(),[d,c]=(0,l.useState)({}),[u,m]=(0,l.useState)([]),p=(0,H.Z)(null===d||void 0===d?void 0:d.templates_url,!0);(0,l.useEffect)((()=>{var e;if(null===(e=p.selectedTemplateData)||void 0===e?void 0:e.fields){const e=[];for(const t of Object.values(p.selectedTemplateData.fields))["image_upload","sign"].includes(t.type)&&e.push(t.id);m(e)}}),[p.selectedTemplate]),(0,l.useEffect)((()=>{r(null===t||void 0===t?void 0:t.id)}),[t]),(0,l.useEffect)((()=>{if((null===o||void 0===o?void 0:o.tools)&&s){const t=i(s);t&&c({...t,collectionRuleName:e})}}),[o,s]);const h=(0,L.Z)(20),{getCurrentTimelineData:v}=h,f=(0,l.useCallback)(G,[]),g=["is_freemium"],w=(0,R.Z)(50,f,g,u,void 0,void 0,null,s),{selectedIsNew:x,selectedData:y}=w,T={...Y,newData:"New ".concat((null===d||void 0===d?void 0:d.name)||"item"),noDataError:"No ".concat((null===d||void 0===d?void 0:d.name)||"item"," selected"),newTitle:"".concat((null===d||void 0===d?void 0:d.name)||"Item"," Type"),freeTitle:"Test ".concat((null===d||void 0===d?void 0:d.name)||"Item","(Free)."),freeMessage:"The downloaded ".concat((null===d||void 0===d?void 0:d.name)||"Item"," will have watermark."),paidTitle:"Clean ".concat((null===d||void 0===d?void 0:d.name)||"Item","({PRICE})"),paidMessage:"The downloaded ".concat((null===d||void 0===d?void 0:d.name)||"Item"," will be clean with no watermark."),signInMessage:"Please sign in to save your ".concat((null===d||void 0===d?void 0:d.name)||"Item","."),signUpMessage:"Please sign up to save your ".concat((null===d||void 0===d?void 0:d.name)||"Item","."),createButtonText:"Create ".concat((null===d||void 0===d?void 0:d.name)||"Item"),noChatToListMessage:"Your list of ".concat((null===d||void 0===d?void 0:d.name)||"Item"," will show here"),deleteWarning:"Are you sure you want to permanently delete this already saved ".concat((null===d||void 0===d?void 0:d.name)||"Item","?"),saveSuccess:"New ".concat((null===d||void 0===d?void 0:d.name)||"Item"," successfully saved."),updateSuccess:"".concat((null===d||void 0===d?void 0:d.name)||"Item"," successfully updated.")},j=(0,z.Z)({collectionName:e,fileFields:u,toolId:s,historyProps:h,dataSourceProps:w,publishTexts:T,updatableFields:g}),{savingData:S,setSavingData:D,handleUpdateData:b,handlePublishData:I}=j,k=(0,l.useMemo)((()=>(0,a.jsx)(B,{tool:d,templatesResults:p,publishTexts:T,collectionName:e,isNew:x(),data:y,saving:S,setSaving:D,hasPendingSave:v((null===y||void 0===y?void 0:y.id)||"none").totalUpdates>1||x(),onUpdateData:b,onPublishData:I})),[d,T,e,y,S,p]),C=e=>{var t,o,a;for(const[n,l]of Object.entries(e)){const{name:e,type:i}=(0,U.py)(n),{directive:s}=(0,U.mA)(e||"");if(i&&["text","textarea"].includes(i)&&s)switch(s){case"name":t=l;break;case"desc":o=l;break;case"small":a=l}}return{title:t,desc:o,small:a}};return d?(0,a.jsx)(n.Z,{tool:d,form:k,historyProps:h,dataSourceProps:w,dataHandlerProps:j,publishTexts:T,getItemName:e=>C(e).title||"",getItemDescription:e=>C(e).desc||"",getItemBadge:e=>C(e).small||"",onOverWriteCopiedData:e=>(e=>{const t={is_freemium:!0};for(const[o,a]of Object.entries(e)){const{name:e,type:n}=(0,U.py)(o),{directive:l}=(0,U.mA)(e||"");n&&["upload"].includes(n)||l||(t[o]=a)}return t})(e)}):(0,a.jsx)(N.Z,{title:"Loading tool..."})}}},function(e){e.O(0,[847,630,201,394,493,162,506,814,238,226,986,372,106,265,774,888,179],(function(){return t=89879,e(e.s=t);var t}));var t=e.O();_N_E=t}]);