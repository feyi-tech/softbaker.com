(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[808],{13553:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/genfill",function(){return a(29047)}])},29047:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var n=a(85893),o=(a(5397),a(26935)),l=a(44669),r=a(67294),i=a(77626),s=a(99555),c=a(53348),d=a(63183),u=(a(53754),a(34365),a(73391)),g=a(55154),p=a(7963),h=a(48783),f=a(71293),m=a(33090),v=a(34292),w=a(14225),x=a(81136);var b=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(null),[a,o]=(0,r.useState)(""),[l,i]=(0,r.useState)(!1),s=(0,p.p)(),{image:c,handleImageUpload:d}=function(e){const[t,a]=(0,r.useState)(null);return{image:t,handleImageUpload:t=>{var n;const o=null===(n=t.target.files)||void 0===n?void 0:n[0];if(!o)return;const l=new FileReader;l.onload=t=>{var n;if(!(null===(n=t.target)||void 0===n?void 0:n.result))return;const o=new Image;o.onload=()=>{a(o);const t=e.current;if(t){t.width=o.width,t.height=o.height;const e=t.getContext("2d");e&&e.drawImage(o,0,0)}},o.src=t.target.result},l.readAsDataURL(o)}}}(e),{startDrawing:u,stopDrawing:g,drawMask:b,clearMask:D}=function(e){const[t,a]=(0,r.useState)(!1);return{startDrawing:()=>a(!0),stopDrawing:()=>a(!1),drawMask:a=>{if(!t||!e.current)return;const n=e.current.getBoundingClientRect(),o=a.clientX-n.left,l=a.clientY-n.top,r=e.current.getContext("2d");r&&(r.fillStyle="red",r.globalAlpha=.8,r.beginPath(),r.arc(o,l,15,0,2*Math.PI),r.fill())},clearMask:()=>{if(!e.current)return;const t=e.current.getContext("2d");t&&t.clearRect(0,0,e.current.width,e.current.height)}}}(t);return(0,n.jsxs)(h.g,{spacing:4,p:4,maxW:"700px",mx:"auto",children:[(0,n.jsx)(f.x,{fontSize:"2xl",fontWeight:"bold",children:"AI-Powered Generative Fill"}),(0,n.jsx)(m.I,{type:"file",accept:"image/*",onChange:d}),c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(v.U,{spacing:4,children:[(0,n.jsx)("canvas",{ref:e,className:"border"}),(0,n.jsx)("canvas",{ref:t,className:"border",onMouseDown:u,onMouseUp:g,onMouseMove:b})]}),(0,n.jsx)(m.I,{placeholder:"Describe the fill (e.g., 'A cute cat')",value:a,onChange:e=>o(e.target.value)}),(0,n.jsxs)(v.U,{children:[(0,n.jsx)(w.z,{colorScheme:"blue",onClick:async()=>{if(c&&a.trim()){i(!0);try{var n,o;const r=new FormData;null===(n=e.current)||void 0===n||n.toBlob((e=>{e&&r.append("image",e,"image.png")}),"image/png"),null===(o=t.current)||void 0===o||o.toBlob((e=>{e&&r.append("mask",e,"mask.png")}),"image/png"),r.append("prompt",a);const i=await fetch("http://localhost:8000/inpaint",{method:"POST",body:r}),s=await i.json();if(s.image){var l;const t=new Image;t.src="data:image/png;base64,"+s.image;const a=null===(l=e.current)||void 0===l?void 0:l.getContext("2d");a&&a.drawImage(t,0,0)}}catch(r){console.error("Error applying AI fill:",r),s({title:"Failed to apply AI fill",status:"error",duration:3e3})}i(!1)}else s({title:"Please upload an image and enter a prompt!",status:"warning",duration:3e3})},isDisabled:l,children:l?(0,n.jsx)(x.$,{}):"Apply AI Fill"}),(0,n.jsx)(w.z,{colorScheme:"gray",onClick:D,children:"Clear Mask"})]})]})]})};var D=()=>{const e="5vCsgJJVsFYhV4dZYQdI",t="invoices",{sdkConfig:a,getTool:p}=(0,u.P)(),[h,f]=(0,r.useState)();(0,r.useEffect)((()=>{if(null===a||void 0===a?void 0:a.tools){const a=p(e);f(a?{...a,icon:(0,n.jsx)(g.RcD,{size:"100%"}),collectionRuleName:t}:null)}else f(null)}),[a]);const m=(0,s.Z)(20),{getCurrentTimelineData:v}=m,w=["logo"],x=["is_freemium"],D=(0,c.Z)(50,l.V,x,w,void 0,void 0,t),{selectedIsNew:j,selectedData:I}=D,C=(0,d.Z)({collectionName:t,fileFields:w,toolId:e,historyProps:m,dataSourceProps:D,publishTexts:i.m,updatableFields:x}),{savingData:k,setSavingData:S,handleUpdateData:P,handlePublishData:_}=C;(0,r.useMemo)((()=>(0,n.jsx)(o.Z,{tool:h,collectionName:t,isNew:j(),data:I,saving:k,setSaving:S,hasPendingSave:v((null===I||void 0===I?void 0:I.id)||"none").totalUpdates>1||j(),onUpdateData:P,onPublishData:_})),[I,k,h,t]);return(0,n.jsx)(b,{})}}},function(e){e.O(0,[847,646,48,614,302,287,505,731,494,382,15,52,687,218,774,888,179],(function(){return t=13553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);