(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{89879:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tool-viewer",function(){return o(49254)}])},34365:function(e,t,o){"use strict";o.d(t,{Iu:function(){return i},Qj:function(){return n},Yg:function(){return a},bA:function(){return l},e3:function(){return s},h$:function(){return r}});const n=(e,t,o,n)=>0==e?0:(e=e*t/o,n?parseFloat(e.toFixed(n)):Math.ceil(e)),a=(e,t,o,n)=>0==e?0:(e=e*t/o,n?parseFloat(e.toFixed(n)):Math.ceil(e)),i=(e,t,o,i,l,r)=>"translate(".concat(n(e,o,i,3)," ").concat(a(t,l,r,3),") "),l=(e,t,o,i,l,r)=>"scale(".concat(n(e,o,i,3)," ").concat(a(t,l,r,3),") ");const r=e=>e?Array.isArray(e)?e:"object"==typeof e?function(e){const t=[];return Object.keys(e).sort(((e,t)=>parseInt("".concat(e))-parseInt("".concat(t)))).forEach((o=>{t.push(e[o])})),t}(e):[]:[],s=(e,t)=>{if(!t)return e;var o="".concat(t.replace(/\n/g,"%0A")).replace(/[ ]/g,"%20");return e.split("?")[0]+"?text=".concat(o)}},99020:function(e,t,o){"use strict";var n=o(85893),a=o(55154),i=o(85461),l=o(94345),r=o(48783),s=o(59501);t.Z=e=>{let{title:t,children:o,onDownloadButtonClick:d,downloadFormats:c,onFormatSelected:u,showDownloadFormatOptions:h,setShowDownloadFormatOptions:p,hideButton:m,...f}=e;return(0,n.jsxs)(n.Fragment,{children:[m?null:(0,n.jsx)(i.Z,{rightIcon:(0,n.jsx)(a.ZJh,{}),...f,onClick:()=>{1==c.length?u(c[0]):d()&&p(!0)},children:o}),h?(0,n.jsx)(l.Z,{justifyContent:"flex-start",alignItems:"center",title:t||"Select Format",isOpen:!0,onClose:()=>{p(!1)},children:(0,n.jsx)(r.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",children:c.map(((e,t)=>(0,n.jsx)(s.Z,{w:"100%",mb:2,status:"warning",onClick:()=>{u(e),p(!1)},children:e.title},t)))})}):null]})}},75863:function(e,t,o){"use strict";var n=o(85893),a=o(51857),i=o.n(a),l=o(34292),r=o(57747),s=o(71293),d=o(85970),c=o(5418),u=o(6089),h=o(67294),p=o(94345),m=o(53754),f=o(49626);const g=e=>{let{id:t,link:o,downloadImage:a,title:i,image:d,thumbnail:c,...u}=e;return(0,n.jsxs)(l.U,{cursor:"pointer",justifyContent:"flex-start",alignItems:"flex-end",mb:4,...u,children:[(0,n.jsx)(r.xu,{as:"image",w:"40px",h:"40px",backgroundColor:"#dfdfdf",style:{backgroundImage:"url(".concat(c,")")},backgroundRepeat:"no-repeat",backgroundSize:"cover"}),(0,n.jsx)(s.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:i})]})};t.Z=e=>{let{title:t,helperText:o,info:a,textTransform:v,labelEndIcon:x,image:w,thumbnail:y,imageTitle:b,options:j,onChange:S,disabled:T,...k}=e;const[C,_]=(0,h.useState)(!1);return(0,n.jsxs)(r.xu,{...k,children:[(0,n.jsxs)(d.NI,{opacity:T?.4:1,cursor:T?"not-allowed":"pointer",children:[(0,n.jsxs)(l.U,{w:"100%",justifyContent:"space-between",alignItems:"center",children:[!t||(0,m.N4)(a)||T?(0,n.jsx)(c.l,{textTransform:v||"capitalize",mb:"0px",children:t}):(0,n.jsx)(f.Z,{as:c.l,info:a,textTransform:v||"capitalize",children:t}),x||null]}),(0,n.jsxs)(l.U,{className:"image-selector-button",onClick:e=>{e.preventDefault(),T||_(!0)},children:[(0,n.jsx)(r.xu,{width:"auto",height:"40px",maxWidth:"50px",bg:"#dfdfdf",children:y?(0,n.jsx)(u.E,{src:y,width:"auto",h:"40px",objectFit:"cover"}):null}),(0,n.jsx)(s.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:b})]}),(0,m.N4)(o)||T?null:(0,n.jsx)(d.Q6,{children:o})]}),(0,n.jsx)(p.Z,{title:t,isOpen:C,onClose:()=>{_(!1)},overflowY:"auto",children:(j||[]).map(((e,t)=>(0,n.jsx)(g,{...e,onClick:()=>{S(e),_(!1)}},t)))}),(0,n.jsx)(i(),{id:"95178590041dfe1a",children:".image-selector-button{width:100%;min-width:0px;outline:2px solid transparent;outline-offset:2px;position:relative;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-transition-property:var(--chakra-transition-property-common);-moz-transition-timing-function:var(--chakra-transition-property-common);-o-transition-timing-function:var(--chakra-transition-property-common);transition-property:var(--chakra-transition-property-common);-webkit-transition-duration:var(--chakra-transition-duration-normal);-moz-transition-duration:var(--chakra-transition-duration-normal);-o-transition-duration:var(--chakra-transition-duration-normal);transition-duration:var(--chakra-transition-duration-normal);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);-moz-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-10);-moz-padding-end:var(--chakra-space-10);padding-inline-end:var(--chakra-space-10);height:var(--chakra-sizes-10);-webkit-border-radius:var(--chakra-radii-md);-moz-border-radius:var(--chakra-radii-md);border-radius:var(--chakra-radii-md);border:1px solid;border-color:inherit;background:inherit}"})]})}},49254:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Ze}});var n=o(85893),a=o(11802),i=o(5397),l=o(67294),r=o(71293),s=o(7963),d=o(48783),c=o(34292),u=o(57747),h=o(93717),p=o(70959),m=o(44461),f=o(24124),g=o(84028),v=o(90889),x=o(67918),w=o(85461),y=o(56691),b=o(86455),j=o.n(b),S=o(53754),T=o(80419),k=o(55154),C=o(96918),_=o(73386),I=o(21344),D=o(41160),E=o(34365),O=o(33775),Z=o(51857),F=o.n(Z),M=o(6089),N=o(85970),P=o(49626),L=o(3804),z=o(94345),A=o(98687);const Y=e=>{let{id:t,name:o,logo:a,onDelete:i,...l}=e;return(0,n.jsxs)(c.U,{cursor:"pointer",justifyContent:"space-between",alignItems:"flex-end",mb:1,mx:"0.5rem",...l,children:[(0,n.jsxs)(c.U,{justifyContent:"flex-start",alignItems:"flex-end",children:[(0,n.jsx)(M.E,{src:a||"/res/svg-icon.png",w:"35px",h:"35px",borderRadius:"5px",border:"1px solid #dfdfdf"}),(0,n.jsx)(r.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:o||"No name yet"})]}),i?(0,n.jsx)(u.xu,{p:"0.5rem",onClick:()=>{i(t)},children:(0,n.jsx)(k.Xm5,{color:"#e53e3e"})}):null]})};var U=e=>{let{id:t,title:o,templates:a,createdTemplatesKeys:i,value:s,onChange:d,onNewTemplateSvgUploaded:h,disabled:p,errorMessage:m,info:f,helperText:g,onDelete:v,contactLink:x,...w}=e;const[y,b]=(0,l.useState)(!1),[j,S]=(0,l.useState)(),[T,k]=(0,l.useState)([]);return(0,l.useEffect)((()=>{s&&S(s)}),[s]),(0,n.jsxs)(u.xu,{...w,children:[(0,n.jsxs)(N.NI,{opacity:p?.4:1,cursor:p?"not-allowed":"pointer",children:[(0,n.jsx)(P.Z,{textTransform:"capitalize",info:f,children:o}),(0,n.jsxs)(c.U,{className:"image-selector-button",onClick:e=>{e.preventDefault(),p||b(!0)},children:[j?(0,n.jsx)(M.E,{src:j.logo||"/res/svg-icon.png",w:"35px",h:"35px",borderRadius:"5px",border:"1px solid #dfdfdf"}):null,(0,n.jsx)(r.x,{as:"div",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:j?j.name||"No name yet":"Select Template"})]})]}),(0,n.jsx)(L.Z,{type:L.Z.TYPES.none,helperText:g,errorMessage:m}),y?(0,n.jsxs)(z.Z,{title:o,isOpen:!0,onClose:()=>{b(!1)},children:[h?(0,n.jsx)(c.U,{children:(0,n.jsx)(A.Z,{showAsButton:!0,isOtherFiles:!0,w:"100%",id:"Form_".concat(t,"logo"),title:"Add Template",mb:4,info:"This is where you upload your SVG file to generate a template from.",helperText:"Click to select upload an SVG file to use as a template.",message:"Drag and Drop file here",hoverMessage:"Drop the file here",ruleMessage:"Make sure you're uploading a .svg file.",useImageText:"Use File",onChange:(e,t)=>{b(!1),h(e,t)}},"Form_".concat(t,"logo"))}):null,(0,n.jsxs)(u.xu,{height:"50vh",pos:"relative",overflowY:"auto",children:[Object.values(a).map(((e,t)=>(0,n.jsx)(Y,{...e,onClick:()=>{b(!1),d(e)},border:s&&s.id===(null===e||void 0===e?void 0:e.id)?"1px dashed":"none",borderRadius:s&&s.id===(null===e||void 0===e?void 0:e.id)?"5px":"0px",_hover:{opacity:"0.4"},onDelete:i&&i.length>0&&!i.includes(e.id)?v:null},t))),!h&&x?(0,n.jsxs)(u.xu,{w:"100%",textAlign:"center",fontSize:"14px",pb:"0.5rem",children:[(0,n.jsx)(r.x,{as:"div",children:"Can't find the type you want?"}),(0,n.jsx)(r.x,{as:"a",href:x,target:"_blank",color:"#38a169",textDecoration:"underline",children:"Click here to tell us what you want."})]}):null]})]}):null,(0,n.jsx)(F(),{id:"42ccd62b5c30613c",children:".image-selector-button{width:100%;min-width:0px;outline:2px solid transparent;outline-offset:2px;position:relative;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-transition-property:var(--chakra-transition-property-common);-moz-transition-timing-function:var(--chakra-transition-property-common);-o-transition-timing-function:var(--chakra-transition-property-common);transition-property:var(--chakra-transition-property-common);-webkit-transition-duration:var(--chakra-transition-duration-normal);-moz-transition-duration:var(--chakra-transition-duration-normal);-o-transition-duration:var(--chakra-transition-duration-normal);transition-duration:var(--chakra-transition-duration-normal);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);-moz-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-10);-moz-padding-end:var(--chakra-space-10);padding-inline-end:var(--chakra-space-10);height:var(--chakra-sizes-10);-webkit-border-radius:var(--chakra-radii-md);-moz-border-radius:var(--chakra-radii-md);border-radius:var(--chakra-radii-md);border:1px solid;border-color:inherit;background:inherit}"})]})},B=o(38118),W=o(15948),J=o(75863),R=o(14132),H=o(33471),K=o(73804);var V=e=>{let{textAreaData:t,delimiter:o,value:a,onChange:i,suggestions:s,onSuggestionSelected:c,...h}=e;const[p,m]=(0,l.useState)(a||""),[f,g]=(0,l.useState)([]),[v,x]=(0,l.useState)(!1),[w,y]=(0,l.useState)(0);(0,l.useEffect)((()=>{m(a||"")}),[a]);const b=e=>{((e,t)=>{if(null==e||void 0==e)return;m(e),y(t);const n=e.slice(0,t).lastIndexOf(o),a=e.slice(n+o.length,t),l=["id",...s];if(-1===n||!/^[a-zA-Z]*$/.test(a)&&0!==a.length)x(!1);else{let e;e=0===a.length?l:l.filter((e=>e.toLowerCase().startsWith(a.toLowerCase()))),g(e),x(e.length>0)}i&&i(e)})(e.target.value,e.target.selectionStart||0)};return(0,n.jsxs)(u.xu,{w:"100%",overflowX:"hidden",...h,children:[(0,n.jsx)(L.Z,{w:"100%",value:p,onChange:(e,t)=>b(t),onClick:e=>b(e),onKeyUp:e=>b(e),...t}),v&&(0,n.jsx)(d.g,{position:"absolute",zIndex:"5",w:"100%",boxShadow:"md",borderRadius:"md",height:"120px",width:"100%",overflowY:"auto",overflowX:"hidden",bg:(0,C.Z)("dropDownBg.light","dropDownBg.dark"),children:(0,n.jsx)(K.aV,{w:"100%",overflowX:"hidden",children:f.map(((e,t)=>(0,n.jsx)(K.HC,{overflowX:"hidden",p:"2",cursor:"pointer",_hover:{border:"1px solid",borderRadius:"3px"},onClick:()=>(e=>{const t=p.slice(0,w).lastIndexOf(o),n=p.slice(0,t+o.length)+e+p.slice(w);m(n),x(!1),o.length,e.length,c(e,t+o.length,n)})(e),children:(0,n.jsx)(r.x,{as:"div",children:e})},t)))})})]})};"The update will cost you ".concat(a.oq,"{PRICE}."),"Clean Tool(".concat(a.oq,"{PRICE})");const q=["text","textarea","text_select","gen","defgen","checkbox","date"],X=[...q,"image_select","faceshot","qrcode"],G="FIELDS_SETTINGS",Q=()=>{const e=localStorage.getItem(G);let t={};try{e&&(t=JSON.parse(e))}catch(o){}return t};var $=e=>{let{fields:t,field:o,images:a,submitButtonText:i,onSettingsUpdated:s,onDelete:d}=e;const[h,p]=(0,l.useState)({}),[m,f]=(0,l.useState)({}),[g,v]=(0,l.useState)(null),[x,y]=(0,l.useState)(!1);(0,l.useEffect)((()=>{if(o){var e,t,n,a,i,l;const r={...o};let s=Q();!r.helperText&&(null===(e=s[o.id])||void 0===e?void 0:e.helperText)&&(r.helperText=s[o.id].helperText),!r.info&&(null===(t=s[o.id])||void 0===t?void 0:t.info)&&(r.info=s[o.id].info),!r.ruleMessage&&(null===(n=s[o.id])||void 0===n?void 0:n.ruleMessage)&&(r.ruleMessage=s[o.id].ruleMessage),!r.placeholder&&(null===(a=s[o.id])||void 0===a?void 0:a.placeholder)&&(r.placeholder=s[o.id].placeholder),!r.name&&(null===(i=s[o.id])||void 0===i?void 0:i.name)&&(r.name=s[o.id].name),!r.optional&&(null===(l=s[o.id])||void 0===l?void 0:l.optional)&&(r.optional=s[o.id].optional),p(r)}}),[o]),(0,l.useEffect)((()=>{}),[h]);const[b,S]=(0,l.useState)(!1),T=e=>{if(o.id){if(Object.values(e).length>0){const t=Object.values(e)[0];if(!("string"===typeof t&&0==t.length)){let t=Q();t[o.id]={...t[o.id]||{},...e},localStorage.setItem(G,JSON.stringify(t))}}p({...h,...e})}},C=e=>{const t={},o=e.split(",");for(const n of o){const e=n,[o,a]=e.split(":").map((e=>e));if(console.log("mapifyList:0",n,o,a),void 0!=a){t[o.trim().toLowerCase().replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")]={name:o,value:a}}else{t[o.trim().toLowerCase().replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")]={name:o,value:o}}}return console.log("mapifyList",t),t};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.U,{children:[(0,n.jsx)(u.xu,{onClick:()=>{S(!0)},cursor:"pointer",mr:4,children:(0,n.jsx)(k.rU2,{size:"1.5rem",color:["gen","defgen","date"].includes(o.type)?"#dd6b20":"text_select"==o.type?"#3182ce":"#38a169"})}),(0,n.jsx)(u.xu,{onClick:d,cursor:"pointer",justifyContent:"flex-start",alignItems:"center",children:(0,n.jsx)(k.Xm5,{size:"1.2rem",color:"#e53e3e"})})]}),b?(0,n.jsxs)(z.Z,{title:"".concat(o.name||""," settings"),isOpen:!0,onClose:()=>{S(!1)},dontCloseOnOverlayClick:x,children:[(0,n.jsxs)(u.xu,{height:"50vh",pos:"relative",overflowY:"auto",overflowX:"hidden",px:"0.5rem",children:[(0,n.jsx)(r.x,{as:"div",display:"none",children:o.type}),(0,n.jsx)(L.Z,{w:"100%",mb:4,title:"Field Type",placeholder:"Select Field Type",helperText:"Select the type you want for this field.",value:null===h||void 0===h?void 0:h.type,type:L.Z.TYPES.select,options:X,onOptionValue:e=>e,onOptionName:e=>e,onChange:e=>{e&&p({...h,type:e})},errorMessage:m.type}),["gen","defgen","date"].includes(null===h||void 0===h?void 0:h.type)?(0,n.jsx)(V,{w:"100%",textAreaData:{id:"gen",key:"gen",title:"Text Generation Code",helperText:"".concat((0,H.VH)(o.placeholder||""),"."),info:"This is where you enter the code for the text generation: ".concat((0,H.VH)(o.placeholder||""),"."),type:L.Z.TYPES.textarea,value:null===h||void 0===h?void 0:h.code,onChange:e=>{e&&p({...h,code:e})},errorMessage:m.code},mb:4,delimiter:"{",suggestions:Object.keys(t),onSuggestionSelected:(e,t,o)=>{o&&p({...h,code:o})}}):null,["text_select"].includes(null===h||void 0===h?void 0:h.type)?(0,n.jsx)(L.Z,{w:"100%",id:"selections",title:"Options",mb:4,helperText:"Separate the options you want to list with commas. Exaple: 'Blue:BLU, Green'",info:"This is where you list the options you want to show by separating them with commas.",type:L.Z.TYPES.textarea,value:(e=>{const t=[];for(const o in e){const{name:n,value:a}=e[o];n===a?t.push(n):t.push("".concat(n,":").concat(a))}return t.join(",")})((null===h||void 0===h?void 0:h.selections)||{}),onChange:e=>{e&&T({selections:C(e)})},errorMessage:m.selections},"selections"):null,["image_upload","faceshot"].includes(null===h||void 0===h?void 0:h.type)?(0,n.jsx)(L.Z,{w:"100%",id:"upload",title:"File Rule",mb:4,helperText:'Enter the rule of the file. e.g "For best result, upload a 300x300 image."',info:'This is where you enter the rule of the file. e.g "For best result, upload a 300x300 image."',type:L.Z.TYPES.text,value:null===h||void 0===h?void 0:h.ruleMessage,onChange:e=>{e&&T({ruleMessage:e})},errorMessage:m.ruleMessage},"upload"):null,(0,n.jsx)(L.Z,{w:"100%",id:"name",title:"Name",mb:4,helperText:"Enter the text that will show as the name of the field.",info:"This is where you enter the text that will show as the name of the field.",type:L.Z.TYPES.text,value:null===h||void 0===h?void 0:h.name,onChange:e=>{if(e)if("image_select"!=h.type)T({name:e});else{const t=h.options||{},o={};for(const[n,a]of Object.entries(t))o[n]={...a,name:((null===a||void 0===a?void 0:a.name)||"").replace(h.name,e)};T({name:e,options:o})}},errorMessage:m.name},"name"),["text","textarea","defgen","text_select","date"].includes(null===h||void 0===h?void 0:h.type)?(0,n.jsx)(L.Z,{w:"100%",id:"placeholder",title:"Placeholder",mb:4,helperText:"Enter the text that will show behind the text field as an example input.",info:"This is where you enter the text that will show behind the text field as an example input.",type:L.Z.TYPES.textarea,value:null===h||void 0===h?void 0:h.placeholder,onChange:e=>{e&&T({placeholder:e})},errorMessage:m.placeholder},"placeholder"):null,"textarea"==(null===h||void 0===h?void 0:h.type)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L.Z,{w:"100%",id:"maxCharsPerLine",title:"Max Chars Per Line",mb:4,helperText:"Enter the maximum number of characters per line.",info:"This is where you enter the maximum number of characters per line.",type:L.Z.TYPES.number,value:null===h||void 0===h?void 0:h.maxCharsPerLine,onChange:e=>{e&&T({maxCharsPerLine:e})},errorMessage:m.maxCharsPerLine,numberDecimals:0},"maxCharsPerLine"),(0,n.jsx)(L.Z,{w:"100%",id:"maxChars",title:"Max Chars",mb:4,helperText:"Enter the maximum number of total characters.",info:"This is where you enter the maximum number of total characters per line.",type:L.Z.TYPES.number,value:null===h||void 0===h?void 0:h.maxChars,onChange:e=>{e&&T({maxChars:e})},errorMessage:m.maxChars,numberDecimals:0},"maxChars")]}):null,["text","textarea","defgen"].includes(null===h||void 0===h?void 0:h.type)?(0,n.jsx)(L.Z,{w:"100%",id:"maxCharsBeforeScale",title:"Font Scale-Down Max Chars",mb:4,helperText:"Enter the maximum number of total characters before the font size is scaled down.",info:"This is where you enter the maximum number of total characters the font size is scaled down.",type:L.Z.TYPES.number,value:null===h||void 0===h?void 0:h.maxTextBeforeScaleDown,onChange:e=>{e&&T({maxTextBeforeScaleDown:e})},errorMessage:m.maxTextBeforeScaleDown,numberDecimals:0},"maxCharsBeforeScale"):null,"gen"!==(null===h||void 0===h?void 0:h.type)?(0,n.jsx)(L.Z,{w:"100%",id:"helper_text",title:"Helper Text",mb:4,helperText:"Enter the text that will show below this field just like this.",info:"This is where you enter the text that will show below this field.",type:L.Z.TYPES.text,value:null===h||void 0===h?void 0:h.helperText,onChange:e=>{e&&T({helperText:e})},errorMessage:m.helperText},"helper_text"):null,["qrcode","checkbox","gen"].includes(null===h||void 0===h?void 0:h.type)?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L.Z,{w:"100%",id:"info",title:"Info Text",mb:4,helperText:"Enter the text that will show when the user clicks the info icon on this field.",info:"This is where you enter the text that will show when the user clicks the info icon on this field just like this.",type:L.Z.TYPES.textarea,value:null===h||void 0===h?void 0:h.info,onChange:e=>{e&&T({info:e})},errorMessage:m.info},"info"),(0,n.jsx)(L.Z,{w:"100%",id:"optional",title:"Make Optional",mb:4,helperText:"Enable this if you want this field to be optional.",type:L.Z.TYPES.checkbox,value:null===h||void 0===h?void 0:h.optional,onChange:e=>{T({optional:e})},errorMessage:m.optional},"optional")]}),(0,n.jsx)(V,{w:"100%",textAreaData:{id:"visibility",key:"visibility",title:(0,n.jsxs)(r.x,{as:"div",children:["Visibility Anchor",(0,n.jsx)("br",{}),"(CompareCodeResult == ToThis)"]}),helperText:"Enter the field comparison conditional visibility code",info:"This is where you enter the field comparison conditional visibility code.",type:L.Z.TYPES.textarea,value:null===h||void 0===h?void 0:h.visibility_code,onChange:e=>{e&&p({...h,visibility_code:e})},errorMessage:m.code},mb:4,delimiter:"{",suggestions:Object.keys(t),onSuggestionSelected:(e,t,o)=>{o&&p({...h,visibility_code:o})}})]}),(0,n.jsx)(u.xu,{mb:"1rem",children:(0,n.jsx)(w.Z,{status:"warning",mb:"1rem",onClick:()=>{x||((null===h||void 0===h?void 0:h.type)!=(null===o||void 0===o?void 0:o.type)?j().fire({icon:"warning",title:"Field Change Warning!!",text:"You're about to change this field type from ".concat(null===o||void 0===o?void 0:o.type," to ").concat(null===h||void 0===h?void 0:h.type,"! Changing field type without properly understanding how it affects the users can cause a bad user experience and might require deleting the tool and then re-uploading disruptively to fix."),confirmButtonText:"I Understand, Continue",cancelButtonText:"Cancel",showConfirmButton:!0,showCancelButton:!0}).then((e=>{S(!1),e.isConfirmed?s(h,null):s({...h,type:null===o||void 0===o?void 0:o.type},null)})):(S(!1),s(h,null)))},disabled:x,children:x?"Please wait...":i||"Submit Settings"})})]}):null]})},ee=o(36024),te=o(5555);class oe{random(){const e=1e4*Math.sin(this.seed++);return e-Math.floor(e)}randomInt(e,t){return Math.floor(this.random()*(t-e+1))+e}constructor(e){this.seed=e}}function ne(e,t,o,n){if(!e||!t)return"";function a(n,a,i){const l=o?function(e,t,o,n){if(null===e||void 0===e||null===o||void 0===o||null===t||void 0===t||null===n||void 0===n)return 0;const a=(e+Object.keys(o).filter((e=>n(e))).map((e=>o[e].toString().replace(/\s+/g,""))).join("")+t.toString()).toLowerCase();let i=0;for(let l=0;l<a.length;l++)i=(i<<5)-i+a.charCodeAt(l),i|=0;return i}(e,i,t,o):1e6*Math.random(),r=new oe(l),s=e=>"string"===typeof e&&e.endsWith("d"),d=e=>!isNaN(e)&&!s("".concat(e));if(d(n)&&d(a))return r.randomInt(parseInt(n),parseInt(a)).toString();if(s(n)&&s(a)){const e=parseInt(n),t=parseInt(a);let o="",i=0;const l=r.randomInt(e,t);for(;i<l;){o+=r.randomInt(1,9).toString(),i=o.length}return o}if(s(n)){const e=parseInt(n);let t=r.randomInt(1,9).toString();for(let o=1;o<e;o++){t+=r.randomInt(0,9).toString()}return t}return d(n)?Math.round(r.random()*parseInt(n)).toString():"Invalid arguments for randomNumber function: "+"Min: ".concat(n," - ").concat(typeof n," | Max: ").concat(a," - ").concat(typeof a)}function i(e){if(!t)return"";const o=(e=e.replace(/[{}]+/g,"")).match(/(.+)\[w(\d+)\]/);if(o){const[,e,a]=o,i=n?n(e,t[e]||""):t[e];return(i||"").split(" ")[parseInt(a)-1]||""}if(e in t){return n?n(e,t[e]||""):t[e]}return""}function l(e,t,o){var n=parseInt(t),a=parseInt(o||"");return isNaN(a)?e.substring(n-1):e.substring(n-1,a)}function r(e,t,o){var n=null;switch(t){case"cut":if(o&&[1,2].includes(o.length))try{n=l(e,o[0],o[1])}catch(i){}break;case"df":if(o&&[1,2,3].includes(o.length))try{var a=o[0];n=function(e,t){const o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=["January","February","March","April","May","June","July","August","September","October","November","December"];return{YYYY:e.getFullYear().toString(),YY:String(e.getFullYear()).slice(-2),MMMM:n[e.getMonth()],MMM:n[e.getMonth()].slice(0,3),MM:String(e.getMonth()+1).padStart(2,"0"),M:(e.getMonth()+1).toString(),DD:String(e.getDate()).padStart(2,"0"),D:e.getDate().toString(),dddd:o[e.getDay()],ddd:o[e.getDay()].slice(0,3),HH:String(e.getHours()).padStart(2,"0"),H:e.getHours().toString(),hh:String(e.getHours()%12||12).padStart(2,"0"),h:(e.getHours()%12||12).toString(),mm:String(e.getMinutes()).padStart(2,"0"),m:e.getMinutes().toString(),ss:String(e.getSeconds()).padStart(2,"0"),s:e.getSeconds().toString(),A:e.getHours()<12?"AM":"PM",a:e.getHours()<12?"am":"pm"}[t]||""}("_"==e?new Date:(0,te.Ft)(e),a),o.length>1&&(n=l(n,o[1],o[2]))}catch(i){console.log(i)}}return n}const s=[];let d=0,c=e.replace(/\(([^()]*)\)/g,((e,t)=>{if(t.startsWith("rn[")){const[e,o]=t.slice(3,-1).split(",");return a(e,o,d++)}if(t.match(/^([^*]+)(\*{1,2})(\d+)$/)){const[,e,o,n]=t.match(/^([^*]+)(\*{1,2})(\d+)$/)||[],a=parseInt(n);if("*"==o)return e.repeat(a);{const t="<".concat(Math.floor(1e9*Math.random()),">");return s.push({id:t,char:e,count:a}),t}}if(t.includes("{")&&t.includes("}")){var o=function(e){const t=/{([^{}]+?)}(\.\w+\[(.*?)\])?/g,o=[];let n;for(;null!==(n=t.exec(e));){const e=n[1],t=n[2]?n[2].split("[")[0].slice(1):null,a=n[3]?n[3].split(",").map((e=>e.trim())):[],i=n.index,l=n.index+n[0].length-1,r={varKey:e,varFunc:t||void 0,varFuncArgs:a.length?a:void 0,replacementStart:i,replacementEnd:l};o.push(r)}return o}(t);o.sort(((e,t)=>t.replacementStart-e.replacementStart));for(const e of o){var n=i(e.varKey);if(e.varFunc&&(n=r(n,e.varFunc,e.varFuncArgs)),!(n&&t.length>0)){t="";break}l=t,c=n,u=e.replacementStart,h=e.replacementEnd,t=l.slice(0,u)+c+l.slice(h+1)}return t}return t;var l,c,u,h}));for(const u of s){const e=c.length-u.id.length;if(e>=u.count)break;const t=u.char.repeat(u.count-e);c=c.replace(u.id,t)}return c}var ae=o(57369),ie=o(20967);var le=e=>{let{onAdd:t,...o}=e;const{isOpen:a,onOpen:i,onClose:r}=(0,ie.q)(),[s,d]=(0,l.useState)(),[h,p]=(0,l.useState)(),[m,f]=(0,l.useState)(),[g,v]=(0,l.useState)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.U,{justifyContent:"flex-end",alignItems:"center",...o,children:(0,n.jsx)(w.Z,{leftIcon:(0,n.jsx)(k.wEH,{}),status:"warning",onClick:i,children:"Add Field"})}),a?(0,n.jsxs)(z.Z,{title:"Ad Field",isOpen:!0,onClose:r,children:[(0,n.jsxs)(u.xu,{height:"50vh",pos:"relative",overflowY:"auto",overflowX:"hidden",px:"0.5rem",children:[(0,n.jsx)(L.Z,{w:"100%",mb:4,name:"Field Type",placeholder:"Select Field Type",helperText:"Select the type of the field to add.",value:s,type:L.Z.TYPES.select,options:q,onOptionValue:e=>e,onOptionName:e=>e,onChange:d,errorMessage:m}),(0,n.jsx)(L.Z,{w:"100%",id:"name",title:"Field Name",mb:4,helperText:"Enter the text that will show as the name of the field.",info:"This is where you enter the text that will show as the name of the field.",type:L.Z.TYPES.text,value:h,onChange:p,errorMessage:g},"name")]}),(0,n.jsx)(u.xu,{mb:"1rem",children:(0,n.jsx)(w.Z,{status:"warning",mb:"1rem",onClick:()=>{f(""),v("");var e,o=!1;s?q.includes(s)||(o=!0,f("Invalid field type.")):(o=!0,f("Please select a field type.")),h&&0!=h.length||(o=!0,v("Please enter the field name.")),o||(r(),t({type:s,name:h,id:"".concat((e=h,e.trim().toLowerCase().replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")),".").concat(s)}))},children:"Submit Field"})})]}):null]})},re=o(98170);var se=e=>{let{created:t,showFieldsErrors:o,fields:a,images:i,masks:r,data:s,isFieldsEditMode:p,isDragable:m,onDragged:f,onFieldDataChange:g,onAllFieldsDataChange:v,fieldDataErrorMessage:x,onSetFieldDataErrorMessage:w,minSignatureWidth:y,maxSignatureWidth:b,editableFields:T}=e;const{logger:C}=(0,re.Z)(),[_,I]=(0,l.useState)(Object.values(a)),[D,E]=(0,l.useState)(!1);(0,l.useEffect)((()=>{I(Object.values(a));const e={...s};for(const t of Object.values(a))"image_select"==t.type&&t.options&&!e[t.id]&&(e[t.id]=Object.keys(t.options)[0]);Object.keys(e).length>0&&JSON.stringify(e)!=JSON.stringify(s)&&v(e)}),[a,s]);const O=(e,t)=>{let o=null;return e.maxChars&&"".concat(t).length>e.maxChars&&(o="".concat(e.name," should not be greater than ").concat(e.maxChars," characters.")),w({...x,[e.id]:o}),o};return _&&0!=_.length?(0,n.jsxs)(u.xu,{as:W.Z5,onDragEnd:e=>{if(!e.destination||!f)return;const t=Array.from(_),[o]=t.splice(e.source.index,1);t.splice(e.destination.index,0,o);const n=t.reduce(((e,t,o)=>(e[t.id]={...t,index:o},e)),{});console.info("parsedSvg:updatedFields",n),f(n)},p:"0px !important",children:[p?(0,n.jsx)(le,{my:4,onAdd:e=>{if(a[e.id])j().fire({icon:"error",title:"Field Error",text:"Duplicate field error!"});else{if(!f)return;const t=[e,..._].reduce(((e,t,o)=>(e[t.id]={...t,index:o},e)),{});console.info("parsedSvg:updatedFields",t),f(t)}}}):null,(0,n.jsx)(W.bK,{droppableId:"fields",children:e=>(0,n.jsxs)(d.g,{w:"100%",ref:e.innerRef,...e.droppableProps,children:[_.map(((e,l)=>(0,n.jsx)(W._l,{draggableId:e.id,index:l,isDragDisabled:!m,children:l=>{const d=(e=>{const l={key:e.id,id:e.id,disabled:t&&!(T||[]).includes(e.id),title:"".concat(e.name||"").concat(e.optional?"(Optional)":""),helperText:e.helperText||"",info:e.info||"",placeholder:(0,H.VH)(e.placeholder||e.name||""),onChange:t=>{O(e,t),g(e.id,t)},errorMessage:o?x[e.id]:null,labelEndIcon:p?(0,n.jsx)($,{fields:a,field:e,images:i,onDelete:()=>{j().fire({icon:"warning",title:"Delete field",text:"Are you sure you want to delete this field?",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Yes, Delete",cancelButtonText:"No!"}).then((t=>{if(t.isConfirmed){const t={...a};if(delete t[e.id],!f)return;const o=Object.values(t).reduce(((e,t,o)=>(e[t.id]={...t,index:o},e)),{});f(o)}}))},onSettingsUpdated:(t,o)=>{const n={...a,[t.id]:{...e,...t}},i=o?{...r||{},...o}:null;f&&f(n,i),console.info("onSettingsUpdated.updated",n,i)}}):null,message:"Drag and Drop image here",hoverMessage:"Drop the image here",ruleMessage:e.ruleMessage||"Make sure you're uploading an image file.",useImageText:"Use Image"};if(!(0,ee.LV)(e,a,s))return p?(0,n.jsx)(L.Z,{width:"100%",...l,value:s[e.id]||"",type:L.Z.TYPES.none}):null;switch(e.type){case"image_upload":case"faceshot":return(0,n.jsx)(A.Z,{galleryKey:"faceshot"==e.type?ae.ht.faceshot:void 0,width:"100%",...l,disabled:!1,thumbnail:s[e.id]&&!(0,ee.zI)(s[e.id])?(0,S.VT)("other_tools_data",s.id,e.id):s[e.id]&&(0,ee.zI)(s[e.id])?s[e.id]:void 0,maxFileSize:1048576,removeBackground:"faceshot"==e.type,imageCropArg:"faceshot"==e.type?{message:"Make sure the image is cropped from the top of the head to above the chests with the shoulders visible as shown in the sample image.",sampleImage:"/res/sample-image-crop.png"}:void 0,onChange:(t,o)=>{if(o)try{if(C("faceshot.base64String.size: ".concat(o.length),re.j.info),"faceshot"==e.type)try{(0,ae.OL)(o),C("faceshot.saved.ok",re.j.info)}catch(n){C("faceshot.save.error: ".concat(null===n||void 0===n?void 0:n.message),re.j.error)}try{O(e,o),C("faceshot.onFieldDataCheckInfo.ok",re.j.info)}catch(n){C("faceshot.onFieldDataCheckInfo.error: ".concat(null===n||void 0===n?void 0:n.message),re.j.error)}try{g(e.id,o),C("faceshot.onFieldDataChange.ok",re.j.info)}catch(n){C("faceshot.onFieldDataChange.error: ".concat(null===n||void 0===n?void 0:n.message),re.j.error)}}catch(n){C("faceshot.x.error: ".concat(null===n||void 0===n?void 0:n.message),re.j.error)}else C("faceshot.base64String.empty",re.j.warning)}});case"sign":return(0,n.jsx)(R.Z,{width:"100%",...l,disabled:!1,minSignatureWidth:y||1,maxSignatureWidth:b||1,thumbnail:s[e.id]&&!(0,ee.zI)(s[e.id])?(0,S.VT)("other_tools_data",s.id,e.id):s[e.id]&&(0,ee.zI)(s[e.id])?s[e.id]:void 0});case"image_select":var d;const t=Object.values(e.options||{}).map((t=>({id:t.id,title:(0,ee.Ok)(e.name,t.name),thumbnail:(0,ee.gJ)(t.id,i,"_thumbnail"),image:{base:(0,ee.gJ)(t.id,i,"_512"),md:(0,ee.gJ)(t.id,i,"_728"),lg:(0,ee.gJ)(t.id,i)}})))||[];return(0,n.jsx)(J.Z,{width:"100%",...l,thumbnail:(0,ee.gJ)(s[e.id],i,"_thumbnail"),imageTitle:(0,ee.Ok)(e.name,e.options?null===(d=e.options[s[e.id]])||void 0===d?void 0:d.name:""),onChange:t=>{const o=t;O(e,o.id),g(e.id,o.id)},options:t});case"text":case"textarea":return(0,n.jsx)(L.Z,{width:"100%",...l,value:s[e.id]||"",type:e.type,maxTextLimit:e.maxChars?e.maxChars:void 0});case"date":return(0,n.jsx)(L.Z,{width:"100%",...l,value:(0,te.Ft)(s[e.id]),title:p?"".concat(l.title," (").concat((0,H.VH)(e.placeholder||""),")"):l.title,type:e.type,onChange:t=>{O(e,(0,te.SG)(t)),g(e.id,(0,te.SG)(t))}});case"text_select":return(0,n.jsx)(L.Z,{w:"100%",...l,placeholder:"-- Select ".concat((0,S.kC)(e.name||"")," --"),value:s[e.id]||"",type:L.Z.TYPES.select,options:Object.keys(e.selections||{}),onOptionValue:e=>e,onOptionName:t=>{var o,n;const a=((null===(o=(e.selections||{})[t]||"")||void 0===o?void 0:o.name)||"").trim(),i=((null===(n=(e.selections||{})[t]||"")||void 0===n?void 0:n.value)||"").trim();var l=p&&a!=i?"(".concat(i,")"):"";return"".concat(a).concat(l)}});case"defgen":return(0,n.jsx)(L.Z,{width:"100%",...l,type:L.Z.TYPES.text,value:s[e.id]||""});case"gen":return p?(0,n.jsx)(L.Z,{width:"100%",...l,type:L.Z.TYPES.viewonly,placeholder:"",helperText:(0,H.VH)(e.placeholder||""),value:ne(e.code,s,ee.oh,((e,t)=>{var o,n;return"text_select"==(null===(o=a[e])||void 0===o?void 0:o.type)?((null===(n=(a[e].selections||{})[t])||void 0===n?void 0:n.value)||"").trim():t}))}):null;case"checkbox":return(0,n.jsx)(L.Z,{...l,type:e.type,value:s[e.id]||!1});case"qrcode":return p?(0,n.jsxs)(u.xu,{w:"100%",h:"40px",border:"1px solid #dfdfdf",children:["QR CODE | ",l.title]}):null;default:return null}})(e);return d?(0,n.jsx)("div",{ref:l.innerRef,...l.draggableProps,...l.dragHandleProps,style:{...l.draggableProps.style,width:"100%"},children:(0,n.jsxs)(c.U,{w:"100%",justifyContent:"center",alignItems:e.helperText||["gen"].includes(e.type)&&e.placeholder?"center":"flex-end",mb:4,children:[(0,n.jsx)(u.xu,{width:{base:"100%",md:m?"90%":"100%"},children:d}),(0,n.jsxs)(h.k,{display:{base:"none",md:m?"flex":"none"},w:"40px",h:"40px",border:"1px dashed",pos:"relative",justifyContent:"center",alignItems:"center",children:[(0,n.jsx)(u.xu,{as:k.ZTc,position:"absolute",mb:"25px",size:"10px"}),(0,n.jsx)(u.xu,{as:k.NWQ,position:"absolute",mt:"25px",size:"10px"})]})]})}):(0,n.jsx)("div",{ref:l.innerRef,...l.draggableProps,...l.dragHandleProps,style:{display:"none"}})}},e.id))),e.placeholder]})})]}):(0,n.jsx)(B.Z,{message:"Loading template assets...",minH:"100px"})},de=o(98303),ce=o(87066),ue=o(77181),he=o(91819);const pe=e=>{let{children:t}=e;return(0,n.jsxs)(c.U,{justifyContent:"flex-start",alignItems:"center",m:"0px !important",mb:"1rem !important",children:[(0,n.jsx)(k.gJy,{color:"#e53e3e"}),"\xa0",(0,n.jsx)(r.x,{as:"div",color:"#e53e3e",children:t})]})};const me=e=>{let{fonts:t,isLoading:o,data:i,templateData:r,showWatermark:s,width:h,onFiltersUpdated:p,filterEnabled:m}=e;const f=(0,l.useRef)(null),g=(0,de.S)(h||{base:0}),[v,x]=(0,l.useState)(),[w,b]=(0,l.useState)(),[j,S]=(0,l.useState)(),[T,k]=(0,l.useState)(null);return(0,l.useEffect)((()=>{}),[v]),(0,l.useEffect)((()=>{i&&r?(b(!0),S(void 0),(0,ee.d1)(a.tJ,i,r,t,s,g,T).then((e=>{b(!1),x(e)})).catch((e=>{b(!1),S(e.message)}))):r||(b(!0),x(""))}),[i,r,s,g,T,t]),(0,n.jsx)(D.Z,{disableDrag:null!=T,width:"100%",message:"Drag around to view the whole tool",height:{base:500,md:728,lg:1024},children:(0,n.jsxs)(u.xu,{id:"AirlineDocWrapper",pos:"relative",w:"100%",children:[v?(0,n.jsx)(u.xu,{ref:f,w:"100%",h:"100%",dangerouslySetInnerHTML:{__html:v}}):null,T?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.U,{pos:"absolute",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1",bg:"#dfdfdf",opacity:"0.7",justifyContent:"flex-start",pl:{base:"0px",md:"0px"},alignItems:"center",display:w||o?"flex":"none",w:"100%",h:"100%",children:(0,n.jsx)(y.Z,{type:y.Z.TYPES.grid,color:(0,C.Z)("colorAccent.light","colorAccent.dark"),size:"70px"})}),(0,n.jsx)(d.g,{pos:"absolute",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1",bg:"#fff",opacity:"0.7",justifyContent:"center",pl:"1rem",alignItems:"flex-start",display:j?"flex":"none",w:"100%",h:"100%",children:j?(0,n.jsx)(pe,{children:(_=j,(null===_||void 0===_?void 0:_.message)?_.message:_)}):null})]})]})});var _};me.getSvg=ee.d1,me.downloadSvgResultFromServer=(e,t,o,n,i,l,r)=>new Promise((async(s,d)=>{const c=await(async(e,t,o)=>{const n={};for(const[a,i]of Object.entries(o))if("string"===typeof i&&/\.(faceshot|upload|sign)$/.test(i)){const o=(0,ee.VT)(e,t,a);o&&(n[a]=(await(0,ue.t)((0,ee.Ll)(a,o),204800)).base64)}return n})(n,t.id,t);console.log("downloadSvgResultFromServer:",t,r,c),e.getIdToken().then((e=>{const n=a.Lu;ce.Z.post("".concat(n,"/download_svg_result"),{id:t.id,selectedSide:l,user_uploads:c},{headers:{Authorization:e},responseType:"arraybuffer"}).then((async e=>{const t=e.headers["content-type"]||"image/jpeg",n=btoa(new Uint8Array(e.data).reduce(((e,t)=>e+String.fromCharCode(t)),""));let a="data:".concat(t,";base64,").concat(n);const r=l?"".concat(l.toUpperCase(),"_").concat(i,".").concat(o):"".concat(i,".").concat(o);if("pdf"===o)(async(e,t,o,n)=>{const a=await(0,ee.gP)(e),i=new he.ZP({unit:"px",format:[a.width,a.height]});i.addImage(e,"JPEG",0,0,a.width,a.height),i.save(t),o(e)})(a,r,s);else{"png"==o&&(a=await(d=a,new Promise(((e,t)=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{const n=document.createElement("canvas");n.width=o.width,n.height=o.height;const a=n.getContext("2d");if(!a)return t(new Error("Failed to get canvas context"));a.drawImage(o,0,0);const i=n.toDataURL("image/png");e(i)},o.onerror=e=>{t(new Error("Failed to load JPEG image"))},o.src=d}))));const e=document.createElement("a");e.href=a,e.download=r,e.click(),s(a)}var d})).catch((e=>{var t,o;console.log("downloadSvgResultFromServer.post.error:",null===e||void 0===e?void 0:e.message,null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data),d((null===e||void 0===e||null===(o=e.response)||void 0===o?void 0:o.data)||{error:null===e||void 0===e?void 0:e.message})}))}))}));var fe=me,ge=o(92709),ve=o(99020),xe=o(25723);var we=e=>{const[t,o]=(0,l.useState)(),[n,i]=(0,l.useState)(),[r,s]=(0,l.useState)(),{user:d}=(0,O.Pd)(),[c,u]=(0,l.useState)(!0);return(0,l.useEffect)((()=>{e&&(0,ee.fY)(e).then((async e=>{s(e)})).catch((e=>{o(e.message)}))}),[e]),(0,l.useEffect)((()=>{r&&(0,ee.Xx)(a.tJ,r,["ttf","otf","woff","woff2","eot","svg"]).then((e=>{i({...n,...e}),u(!1)})).catch((e=>{o(e.message),u(!1)}))}),[r]),{loadingFonts:c,error:t,fonts:n,setFonts:i,uploadFonts:e=>new Promise((async(t,o)=>{if(n){e&&e("Preparing fonts for upload...");const a=[];for(const e of Object.values(n))!e.url&&e.file&&a.push({id:e.id,file:e.file,fileName:"".concat((0,ee.vq)(e.id),".").concat(e.ext),dir:"fonts"});if(a.length>0){if(!d)return e&&e("Sign In Requred..."),o(new Error("Please sign in"));e&&e("Uploading fonts..."),(0,xe.dq)(d,a,"https://r2.softbaker.com/").then((l=>{const r={...n},s={};l.forEach((e=>{if((0,ee.N4)(e.error))r[e.id].url=e.url;else{const t=new Error(e.error);r[e.id].readError=t.message,s[e.id]=t.message}})),Object.keys(s).length==a.length?(e&&e('Fonts upload failed with the error, "'.concat(JSON.stringify(s),'"...')),o(new Error("The font(s) failed to upload: ".concat(JSON.stringify(s))))):Object.keys(s).length>0?(i(r),e&&e('Fonts upload failed with the error, "'.concat(JSON.stringify(s),'"...')),o(new Error("Some or all fonts failed to upload: ".concat(JSON.stringify(s))))):(i(r),e&&e("Fonts uploaded..."),t(n))})).catch((t=>{e&&e('Fonts upload failed with the error, "'.concat(t.message,'"...')),o(t)}))}else e&&e("No font to Prepare for upload..."),t({})}else e&&e("No fonts to upload..."),t(null)}))}};var ye=(e,t,o,n)=>{const[a,i]=(0,l.useState)(),[r,s]=(0,l.useState)();(0,l.useEffect)((()=>{const{newFieldString:l,newCurrentTemplateId:d,defaultFieldsData:c}=(0,ee.yO)(e,o,n,a,r);l&&i(l),d&&s(d),c&&t&&t(c)}),[o,e,t,n])},be=o(81058),je=o(65380);const Se=(e,t)=>{if(!e)return[];const o=[];for(const[n,a]of Object.entries(e)){const{name:i,type:l}=(0,ee.py)(n),{directive:r}=(0,ee.mA)(i||"");r&&o.push((0,ee.OL)(n,a,e,t))}return o};var Te=e=>{let{tool:t,templatesResults:o,data:i,isNew:b,onUpdateData:Z,onPublishData:F,saving:M,setSaving:N,hasPendingSave:P,collectionName:L,publishTexts:z,initData:A}=e;if(!i)return null;const Y=(0,s.p)(),{user:W,sdkConfig:J}=(0,O.Pd)(),[R,H]=(0,l.useState)(!1),[K,V]=(0,l.useState)(!1),{templatesLoading:q,templatesError:X,selectedTemplateLoading:G,selectedTemplateError:Q,parsingTemplate:$,templates:te,selectedTemplate:oe,selectedTemplateData:ne,workingTemplate:ae,workingTemplateData:ie,setAsDefaulTemplate:le,setWorkingTemplate:re,setWorkingTemplateData:de,selectTemplate:ce,getDefaultTemplateId:ue,currentTemplateId:he}=o||{},{error:pe,fonts:me,setFonts:xe,uploadFonts:Te}=we(null===ne||void 0===ne?void 0:ne.svg),[ke,Ce]=(0,l.useState)({}),[_e,Ie]=(0,l.useState)(!0),[De,Ee]=(0,l.useState)(!1),[Oe,Ze]=(0,l.useState)(),[Fe,Me]=(0,l.useState)(),[Ne,Pe]=(0,l.useState)();(0,l.useEffect)((()=>{(null===oe||void 0===oe?void 0:oe.split_on_download)&&!Ne?Pe("front"):(null===oe||void 0===oe?void 0:oe.split_on_download_hr)&&!Ne&&Pe("front_hr")}),[null===oe||void 0===oe?void 0:oe.split_on_download,null===oe||void 0===oe?void 0:oe.split_on_download_hr]);ye(i,(e=>{b&&A&&A(e)}),null===ne||void 0===ne?void 0:ne.fields,he),(0,l.useEffect)((()=>{}),[i]);const Le=e=>e.includes("faceshot")?"passport photograph.":e.includes("sign")?"signature":"image",ze=(e,t,o)=>new Promise(((n,a)=>{if(t)if((0,S.VT)("other_tools_data",o,e))Ce({...ke,[e]:""}),n(null);else{const t=Le(e);n("".concat(e,":The ").concat(t," was not found on this browser. Please provide the ").concat(t," again."))}else{n("".concat(e,":Invalid ").concat(Le(e)))}})),Ae=async(e,o,n)=>{if(R||!ne)return;if(!W)return;const i=[];for(const t of Object.keys(e))(t.endsWith(".sign")||t.endsWith(".faceshot"))&&i.push(ze(t,e[t],e.id));const l=(await Promise.all(i)).filter((e=>null!=e));if(l.length>0){const e={};for(const t of l){const o=t.split(":");e[o[0]]=o[1]}return Ce({...ke,...e}),void j().fire({title:"Download Error",text:"Check your upload fields to fix some missing files affecting your download.",icon:"error"})}H(!0);const r=!0===((null===oe||void 0===oe?void 0:oe.split_on_download)||(null===oe||void 0===oe?void 0:oe.split_on_download_hr)),s=(n=n&&!e.is_freemium)?r?2048:1024:r?1024:728;fe.getSvg(a.tJ,e,ne,me,e.is_freemium,s).then((n=>{Y({description:"Your ".concat((null===t||void 0===t?void 0:t.name)||"item"," will download shortly."),status:"info",duration:4e3,isClosable:!0}),(0,ee.T8)(n,o,"".concat((0,S.yZ)("".concat((null===t||void 0===t?void 0:t.name)||"item","-").concat(Se(e,null===ne||void 0===ne?void 0:ne.fields).join("_"))),"-").concat((new Date).toISOString()),((null===oe||void 0===oe?void 0:oe.split_on_download)||(null===oe||void 0===oe?void 0:oe.split_on_download_hr))&&Ne?Ne:void 0).then((e=>{H(!1),V(!0),setTimeout((()=>{V(!1)}),8e3)})).catch((e=>{H(!1),j().fire({icon:"error",title:"Download Error",text:e.message})}))})).catch((n=>{fe.downloadSvgResultFromServer(W,e,o,"other_tools_data","".concat((0,S.yZ)("".concat((null===t||void 0===t?void 0:t.name)||"item","-").concat(Se(e,null===ne||void 0===ne?void 0:ne.fields).join("_"))),"-").concat((new Date).toISOString()),((null===oe||void 0===oe?void 0:oe.split_on_download)||(null===oe||void 0===oe?void 0:oe.split_on_download_hr))&&Ne?Ne:void 0,s).then((e=>{Y({description:"Your ".concat((null===t||void 0===t?void 0:t.name)||"item"," will download shortly."),status:"info",duration:4e3,isClosable:!0}),H(!1),V(!0),setTimeout((()=>{V(!1)}),8e3)})).catch((e=>{H(!1),j().fire({icon:"error",title:"Download Error",text:e.message})}))}))},[Ye,Ue]=(0,l.useState)(!1);(0,l.useEffect)((()=>{}),[oe]),(0,l.useEffect)((()=>{!b&&i&&te&&(null===oe||void 0===oe?void 0:oe.id)!=i.template_id?ce(i.template_id):b&&te&&!oe&&ce(ue(te))}),[te,i,b]);const Be=()=>{if(F){const e=i.template_id?void 0:{template_id:null===oe||void 0===oe?void 0:oe.id};F(!1,null,e).then((e=>{N(!1),Y({description:b?(null===z||void 0===z?void 0:z.saveSuccess)||"New Item successfully saved.":(null===z||void 0===z?void 0:z.updateSuccess)||"Item successfully updated.",status:"success",duration:4e3,isClosable:!0}),!0===((null===oe||void 0===oe?void 0:oe.split_on_download)||(null===oe||void 0===oe?void 0:oe.split_on_download_hr))?Me(!0):Ze(!0)})).catch((e=>{N(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&j().fire({icon:"error",title:b?"Tool Creation Error":"Tool Update Error",text:e.message})}))}else N(!1)},We=(0,l.useMemo)((()=>ne?(0,n.jsx)(se,{isFieldsEditMode:!1,created:!b,editableFields:((null===t||void 0===t?void 0:t.editables)||"").split(",").map((e=>e.trim())),showFieldsErrors:_e,fields:ne.fields,images:ne.images,masks:ne.masks,data:i,isDragable:!1,onAllFieldsDataChange:e=>{Z&&Z({...e||{}})},onFieldDataChange:(e,t)=>{console.log("onSettingsUpdated.3.onFieldDataChange",e,t),Z&&Z({id:i.id,[e]:t})},fieldDataErrorMessage:ke,onSetFieldDataErrorMessage:Ce}):null),[ne,b,_e,i,Z]),Je=(0,l.useMemo)((()=>{if((null===t||void 0===t?void 0:t.message)&&i.id!=a.XA){const e=function(e){const t=e.split("\n"),o={},a={};if(t.forEach((e=>{const[t,n]=e.split(" == ");"CONTENT"===t?a[t]=n:o[t]=n})),a.CONTENT){const e=a.CONTENT.replace("{LINK}",o.LINK);o.CONTENT=()=>(0,n.jsx)(r.x,{as:"div",fontSize:"13px",children:e.split(o.LINK).map(((e,t,a)=>(0,n.jsxs)(n.Fragment,{children:[e,t<a.length-1&&(0,n.jsx)(r.x,{as:"a",color:(0,je.z)("warning"),href:"".concat(o.LINK.startsWith("https://")||o.LINK.startsWith("http://")?"":"https://").concat(o.LINK),target:"_blank",fontWeight:"bold",textDecoration:"underline",children:o.LINK})]})))})}return o}(null===t||void 0===t?void 0:t.message);return(0,n.jsxs)(d.g,{children:[(0,n.jsxs)(c.U,{flexWrap:"wrap",justifyContent:"space-between",width:"100%",children:[e.ID_TITLE?(0,n.jsxs)(c.U,{flexWrap:"wrap",children:[(0,n.jsxs)(r.x,{as:"div",m:"0px !important",mr:1,children:[e.ID_TITLE,":"," "]}),(0,n.jsx)(T.Z,{fontWeight:"bold",m:"0px !important",mr:2,onCopyMessage:"".concat(e.ID_TITLE," copied."),children:i.id})]}):(0,n.jsx)(u.xu,{}),e.LINK?(0,n.jsxs)(w.Z,{as:"a",href:"".concat(e.LINK.startsWith("https://")||e.LINK.startsWith("http://")?"":"https://").concat(e.LINK),target:"_blank",bg:(0,je.z)("warning"),rightIcon:(0,n.jsx)(k.CkN,{}),children:["Visit ",e.LINK]}):(0,n.jsx)(u.xu,{})]}),e.CONTENT?e.CONTENT():null]})}return null}),[t,i]);return(0,n.jsx)(_.Z,{tool:t,maxHeaderWidth:"100%",children:(0,n.jsxs)(x.Z,{w:"100%",maxW:"100%",h:"auto",children:[i.id!=a.XA?(0,n.jsx)(n.Fragment,{children:Je}):(0,n.jsxs)(d.g,{alignItems:"flex-start",children:[(0,n.jsxs)(c.U,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",children:[(null===t||void 0===t?void 0:t.icon)?ge.Z[null===t||void 0===t?void 0:t.icon].element({}):(0,n.jsx)(k.sYB,{})," ",(0,n.jsx)(r.x,{as:"div",m:"0px !important",mr:1,children:"New ".concat((null===t||void 0===t?void 0:t.name)||"Document")})]}),(0,n.jsxs)(r.x,{as:"div",fontSize:"13px",children:["Click the info icon(",(0,n.jsx)(k.DAO,{style:{display:"inline"}}),") beside each form fields for help on what to enter."]})]}),(0,n.jsx)(h.k,{w:"100%",flexWrap:"wrap",m:"15px auto",children:(0,n.jsx)(u.xu,{w:{base:"100%"},bg:"#dd6b20",p:"1rem",children:(0,n.jsxs)(u.xu,{bg:(0,C.Z)("cardBg.light","cardBg.dark"),minH:"80vh",w:"100%",p:{base:"1rem"},borderRadius:"24px",children:[(0,n.jsxs)(p.m,{isFitted:!0,variant:"enclosed",children:[(0,n.jsxs)(m.t,{mb:"1em",children:[(0,n.jsx)(f.O,{children:"Edit Mode"}),(0,n.jsx)(f.O,{children:"View Mode"})]}),(0,n.jsxs)(g.n,{children:[(0,n.jsxs)(v.x,{children:[b&&te&&!q&&oe&&!G?(0,n.jsx)(U,{w:"100%",id:"Form_".concat(i.id,"_select_template"),title:"".concat((null===t||void 0===t?void 0:t.name)||"Document"," Type"),mb:4,helperText:"Select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),info:"This is where you select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),templates:te,createdTemplatesKeys:Object.keys(te),value:ae,onChange:e=>{e&&ce(e.id)},onCheckInfo:()=>null,errorMessage:null,contactLink:(null===J||void 0===J?void 0:J.contact_link)?(0,E.e3)(null===J||void 0===J?void 0:J.contact_link,"Hello. I can't find the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," I want on softbaker.")):null},"Form_".concat(i.id,"_select_template")):null,q||!oe||G?(0,n.jsx)(B.Z,{message:"Loading template assets. Please wait...",minH:"100px"}):(0,n.jsx)(n.Fragment,{children:We}),(0,n.jsx)(be.Z,{my:2})]}),(0,n.jsx)(v.x,{bg:"#dcdcdc",p:"0px",children:(0,n.jsx)(D.Z,{width:"100%",message:"Drag around to view the whole tool",height:{base:500,md:728,lg:1024},pos:"relative",overflowX:"hidden",overflowY:"hidden",children:(0,n.jsx)(fe,{fonts:me,isLoading:R,width:{base:512,md:728},data:i,templateData:ie,showWatermark:!!i.is_freemium})})})]})]}),(0,n.jsxs)(d.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",my:8,children:[b||0!=((null===t||void 0===t?void 0:t.editables)||"").length?(0,n.jsx)(w.Z,{status:M&&!Ye?"loading":"warning",fontStyle:M&&!Ye?"italic":"normal",disabled:M||!P||q||!oe||G,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:async()=>{if(!F||!oe)return;N(!0);const e=(()=>{if(Ce({}),null===ne||void 0===ne?void 0:ne.fields){const e={},t=[],o=[],n={text:"provided",sign:"provided",image_upload:"uploaded",faceshot:"uploaded"};for(const a of Object.values(ne.fields))if(!i[a.id]&&!["qrcode","gen","checkbox"].includes(a.type)&&(e[a.id]="No ".concat(a.name," ").concat(n[a.type]||"provided","."),t.push(a.name),o.length<2)){const{name:e,type:t}=(0,ee.py)(a.id),{directive:n}=(0,ee.mA)(e||"");["name","desc"].includes(n)&&o.push(a.name)}return Ce(e),{all:t,compulsory:o}}return{all:[],compulsory:[]}})();e.compulsory.length>0?(N(!1),j().fire({title:"Form Entry Error",icon:"error",text:1==e.compulsory.length?"".concat(e.compulsory[0]," cannot be empty!"):"".concat(e.compulsory.join(", ")," cannot be empty.")})):e.all.length>0?(N(!1),j().fire({title:"Some fields are not provided",icon:"warning",text:1==e.all.length?"No ".concat(e.all[0]," provided! Are you sure you want to create the ").concat((null===t||void 0===t?void 0:t.name)||"item"," without it?"):"Are you sure you want to create the ".concat((null===t||void 0===t?void 0:t.name)||"item"," without providing them? The affected fields are ").concat(e.all.join(", "),"."),showCancelButton:!0,confirmButtonText:"Yes, Contine",cancelButtonText:"No"}).then((e=>{e.isConfirmed&&(N(!0),Be())}))):Be()},rightIcon:M&&!Ye?(0,n.jsx)(y.Z,{size:"1rem",color:"#fff",type:y.Z.TYPES.threeDots}):null,children:M&&!Ye?"Please wait...":b?"Create ".concat((null===t||void 0===t?void 0:t.name)||"Item"):"Update ".concat((null===t||void 0===t?void 0:t.name)||"Item")}):null,!0!==((null===oe||void 0===oe?void 0:oe.split_on_download)||(null===oe||void 0===oe?void 0:oe.split_on_download_hr))?null:(0,n.jsx)(ve.Z,{title:"Select Side",showDownloadFormatOptions:Fe,setShowDownloadFormatOptions:Me,status:R||M?"loading":"warning",outlined:!0,fontStyle:R||M?"italic":"normal",disabled:R||M||q||!oe||G,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",downloadFormats:[{title:"Front Side",format:(null===oe||void 0===oe?void 0:oe.split_on_download)?"front":"front_hr"},{title:"Back Side",format:(null===oe||void 0===oe?void 0:oe.split_on_download)?"back":"back_hr"}],onDownloadButtonClick:()=>!b||(j().fire({icon:"error",title:"Download error",text:"You're yet to create the ".concat((null===t||void 0===t?void 0:t.name)||"Item",". Create the ").concat((null===t||void 0===t?void 0:t.name)||"Item"," first, then download.")}),!1),onFormatSelected:e=>{Pe(e.format),Ze(!0)},rightIcon:(0,n.jsx)(k.ZJh,{}),children:R||M?"Please wait...":"Download ".concat((null===t||void 0===t?void 0:t.name)||"Item")}),(0,n.jsx)(ve.Z,{hideButton:!0===((null===oe||void 0===oe?void 0:oe.split_on_download)||(null===oe||void 0===oe?void 0:oe.split_on_download_hr)),showDownloadFormatOptions:Oe,setShowDownloadFormatOptions:Ze,status:R||M?"loading":"warning",outlined:!0,fontStyle:R||M?"italic":"normal",disabled:R||M||q||!oe||G,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",downloadFormats:[{title:"Download as JPEG image",format:"jpeg"},{title:"Download as PNG image",format:"png"},{title:"Download as PDF",format:"pdf"}],onDownloadButtonClick:()=>!b||(j().fire({icon:"error",title:"Download error",text:"You're yet to create the ".concat((null===t||void 0===t?void 0:t.name)||"Item",". Create the ").concat((null===t||void 0===t?void 0:t.name)||"Item"," first, then download.")}),!1),onFormatSelected:e=>{j().fire({icon:"info",title:"Choose Download Quality",text:'Select "High Quality" if your internet connection is fast and stable. Select "Medium Quality" if your internet connection is slow or unstable',showCancelButton:!0,confirmButtonText:"High Quality",cancelButtonText:"Medium Quality"}).then((t=>{t.isConfirmed?Ae(i,e.format,!0):Ae(i,e.format,!1)}))},rightIcon:(0,n.jsx)(k.ZJh,{}),children:R||M?"Please wait...":"Download ".concat((null===t||void 0===t?void 0:t.name)||"Item")},"formats"),K?(0,n.jsxs)(I.Z,{status:"success",children:["Check your download folder for the downloaded ",(null===t||void 0===t?void 0:t.name)||"Item","."]}):null,i.is_freemium&&!b?(0,n.jsx)(w.Z,{status:M&&Ye?"loading":"error",fontStyle:M&&Ye?"italic":"normal",disabled:M,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:()=>{(e=>{if(!F)return;N(!0);var o=e?JSON.parse(JSON.stringify(e)):{};o.id&&delete o.id,e.is_freemium||1!=Object.keys(o).length||Ue(!0);const n=!e.is_freemium&&1==Object.keys(o).length;F(!1,e).then((e=>{N(!1),j().fire({icon:"success",title:"Success",text:n?"Watermark successfully removed.":"".concat((null===t||void 0===t?void 0:t.name)||"Item"," successfully updated.")}),Ue(!1)})).catch((e=>{N(!1),Ue(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&j().fire({icon:"error",title:"".concat((null===t||void 0===t?void 0:t.name)||"Item",b?" Creation Error":" Update Error"),text:e.message})}))})({id:i.id,is_freemium:!1})},rightIcon:M&&Ye?(0,n.jsx)(y.Z,{size:"1rem",color:"#fff",type:y.Z.TYPES.threeDots}):(0,n.jsx)(k.arg,{}),children:M&&Ye?"Please wait...":"Remove Watermark"}):null]})]})})})]})})};const ke=()=>({id:a.XA,authorId:"uid",is_freemium:!0}),Ce={newData:"New Tool",noDataError:"No Tool selected",newTitle:"Tool Type",updateTitle:"Update Cost",updateMessage:"The update will cost you ".concat(a.oq,"{PRICE}."),freeTitle:"Test Tool(Free).",freeMessage:"The downloaded Tool will have watermark.",paidTitle:"Clean Tool(".concat(a.oq,"{PRICE})"),paidMessage:"The downloaded Tool will be clean with no watermark.",signInMessage:"Please sign in to save your Tool.",signUpMessage:"Please sign up to save your Tool.",createButtonText:"Create Tool",noChatToListMessage:"Your Tool will show here",deleteWarning:"Are you sure you want to permanently delete this already saved tool?",saveSuccess:"New Tool successfully saved.",updateSuccess:"Tool successfully updated."};var _e=o(99555),Ie=o(97470),De=o(63183),Ee=o(45326);var Oe=(e,t)=>{const{user:o}=(0,O.Pd)(),{toolsByTemplatesUrl:n}=(0,O.b5)(a.JP),i=(0,Ee.Z)(),[r,s]=(0,l.useState)(),[d,c]=(0,l.useState)(),[u,h]=(0,l.useState)({}),[p,m]=(0,l.useState)(!1),[f,g]=(0,l.useState)(!1),[v,x]=(0,l.useState)(!1),[w,y]=(0,l.useState)(),[b,j]=(0,l.useState)(),[T,k]=(0,l.useState)(),[C,_]=(0,l.useState)(),[I,D]=(0,l.useState)(),[E,Z]=(0,l.useState)(),[F,M]=(0,l.useState)();(0,l.useEffect)((()=>{}),[E]);const N=e=>{if(1==Object.keys(e).length)return Object.keys(e)[0];if(null===i||void 0===i?void 0:i.tp)return i.tp;for(const t of Object.values(e))if(t.is_default)return t.id;return Object.keys(e)[0]};(0,l.useEffect)((()=>{if(n){const t=(e=>{if(!e)return null;var t=e.split("-")[1];return t?t.split(".")[0].trim():null})(e);e&&e!=r&&t?(s(e),m(!0),y(null),c(null),h({}),k(null),_(null),D(null),Z(null),(e=>new Promise(((t,o)=>{var a;if(!n)return t([]);t((null===(a=n[(0,O.ch)(e)])||void 0===a?void 0:a.templates)||[])})))(e).then((e=>{const o=(0,ee.xn)("id",e||[]);c(t),h((0,ee.Dn)(o)),m(!1)})).catch((e=>{y(e.message),m(!1)}))):e||(s(null),m(!1),y(null),c(null),h({}),k(null),_(null),D(null),Z(null))}}),[e,n]),(0,l.useEffect)((()=>{!t&&u&&Object.keys(u).length>0&&!T&&L(N(u))}),[u]);const P=(e,t)=>{ce.Z.get(e.data_url).then((t=>{D({...e}),Z({...t.data}),k({...e}),_({...t.data}),g(!1)})).catch((o=>{!t||(t||0)<3?P(e,(t||0)+1):(j(o.message),g(!1))}))},L=(e,t)=>{t&&t&&M(e);const o=u[e];o&&!(0,S.N4)(o.data_url)&&(g(!0),j(null),P(o))};return{templatesLoading:p,templatesError:w,selectedTemplateLoading:f,selectedTemplateError:b,parsingTemplate:v,templates:u,selectedTemplate:T,selectedTemplateData:C,workingTemplate:I,workingTemplateData:E,setAsDefaulTemplate:e=>{if(I&&(D({...I,is_default:e}),e&&Object.keys(u).length>1)){for(const e of Object.keys(u))e!=I.id&&(u[e].is_default=!1);h(u)}},setWorkingTemplate:D,setWorkingTemplateData:Z,selectTemplate:L,getDefaultTemplateId:N,currentTemplateId:F}};var Ze=()=>{const e="other_tools_data",{logger:t}=(0,re.Z)(),o=(0,Ee.Z)(),{toolsById:r,getTool:s,loading:d,error:c}=(0,O.b5)(a.JP),[u,h]=(0,l.useState)(),[p,m]=(0,l.useState)({}),[f,g]=(0,l.useState)([]),v=Oe(null===p||void 0===p?void 0:p.templates_url,!0),[x,w]=(0,l.useState)();(0,l.useEffect)((()=>{var e;if(null===(e=v.selectedTemplateData)||void 0===e?void 0:e.fields){w(v.selectedTemplateData.fields);const e=[];for(const t of Object.values(v.selectedTemplateData.fields))["image_upload","sign","faceshot"].includes(t.type)&&e.push(t.id);g(e)}}),[v.selectedTemplate]),(0,l.useEffect)((()=>{t("/tool-viewer => url: ".concat(window.location.href," | query: ").concat(JSON.stringify(o||{})),re.j.info)}),[]),(0,l.useEffect)((()=>{o&&o.id,null===o||void 0===o||o.id,(null===o||void 0===o?void 0:o.id)&&h(null===o||void 0===o?void 0:o.id),t("/tool-viewer => query: ".concat(JSON.stringify(o)),re.j.info)}),[o]),(0,l.useEffect)((()=>{var o;if(r&&!d&&u){const o=s(u);o?m({...o,collectionRuleName:e}):t("/tool-viewer => No tool found with the dynamicToolsId, ".concat(u||""),re.j.error)}const n=s(u||"");t("/tool-viewer => hasToolsById: ".concat(r?"yes":"no"," | toolName: ").concat(null===(o=(r||{})[u||""])||void 0===o?void 0:o.name," | toolsLoading: ").concat(d," | toolsLoadError: ").concat(c," | dynamicToolsId: ").concat(u,"} | getTool: ").concat(JSON.stringify(n||{})," | collectionName: ").concat(e),re.j.info)}),[r,d,c,u]),(0,l.useEffect)((()=>{t("/tool-viewer => tool:: ".concat(p?JSON.stringify(p):"Null"),re.j.info)}),[p]);const y=(0,_e.Z)(20),{getCurrentTimelineData:b}=y,j=(0,l.useCallback)(ke,[]),[S,T]=(0,l.useState)(["is_freemium"]);(0,l.useEffect)((()=>{if((null===p||void 0===p?void 0:p.editables)&&p.editables.length>0){const e=["is_freemium"],t=((null===p||void 0===p?void 0:p.editables)||"").split(",").map((e=>e.trim()));for(const o of t)e.push(o);T(e)}}),[null===p||void 0===p?void 0:p.editables]);const k=(0,Ie.Z)(50,j,S,f,void 0,void 0,null,u),{selectedIsNew:C,selectedData:_,initData:I}=k,D={...Ce,newData:"New ".concat((null===p||void 0===p?void 0:p.name)||"item"),noDataError:"No ".concat((null===p||void 0===p?void 0:p.name)||"item"," selected"),newTitle:"".concat((null===p||void 0===p?void 0:p.name)||"Item"," Type"),freeTitle:"Test ".concat((null===p||void 0===p?void 0:p.name)||"Item","(Free)."),freeMessage:(null===p||void 0===p?void 0:p.freemiumDownloadMessage)||"The downloaded ".concat((null===p||void 0===p?void 0:p.name)||"Item"," will have watermark."),paidTitle:(null===p||void 0===p?void 0:p.premiumDownloadMessage)||"Clean ".concat((null===p||void 0===p?void 0:p.name)||"Item","(").concat(a.oq,"{PRICE})"),paidMessage:"The downloaded ".concat((null===p||void 0===p?void 0:p.name)||"Item"," will be clean with no watermark."),signInMessage:"Please sign in to save your ".concat((null===p||void 0===p?void 0:p.name)||"Item","."),signUpMessage:"Please sign up to save your ".concat((null===p||void 0===p?void 0:p.name)||"Item","."),createButtonText:"Create ".concat((null===p||void 0===p?void 0:p.name)||"Item"),noChatToListMessage:"Your list of ".concat((null===p||void 0===p?void 0:p.name)||"Item"," will show here"),deleteWarning:"Are you sure you want to permanently delete this already saved ".concat((null===p||void 0===p?void 0:p.name)||"Item","?"),saveSuccess:"New ".concat((null===p||void 0===p?void 0:p.name)||"Item"," successfully saved."),updateSuccess:"".concat((null===p||void 0===p?void 0:p.name)||"Item"," successfully updated.")},E=(0,De.Z)({collectionName:e,fileFields:f,toolId:u,historyProps:y,dataSourceProps:k,publishTexts:D,updatableFields:S}),{savingData:Z,setSavingData:F,handleUpdateData:M,handlePublishData:N}=E,P=(0,l.useMemo)((()=>(0,n.jsx)(Te,{tool:p,initData:I,templatesResults:v,publishTexts:D,collectionName:e,isNew:C(),data:_,saving:Z,setSaving:F,hasPendingSave:b((null===_||void 0===_?void 0:_.id)||"none").totalUpdates>1||C(),onUpdateData:e=>{M(e)},onPublishData:N})),[p,D,e,_,Z,I,v]),L=e=>{var t,o,n;for(const[a,i]of Object.entries(e)){const{name:l,type:r}=(0,ee.py)(a),{directive:s}=(0,ee.mA)(l||"");if(r&&["text","textarea","text_select"].includes(r),s){const l=(0,ee.OL)(a,i,e,x),r="".concat(l||"").trim().replace(/_/g," ");switch(s){case"name":t=r;break;case"desc":o=r;break;case"small":n=r}}}return{title:t,desc:o,small:n}},z=(0,l.useCallback)((e=>"PE2U7P6L77EALVDK69OE"==(null===p||void 0===p?void 0:p.id)?"".concat(e["passenger_given_name.text"]||""," ").concat(e["passenger_first_name.text"]||""):L(e).title||""),[p,x,_,v.selectedTemplateData]),A=(0,l.useCallback)((e=>"PE2U7P6L77EALVDK69OE"==(null===p||void 0===p?void 0:p.id)?e["Class.text"]||"":L(e).desc||""),[p,x,_,v.selectedTemplateData]),Y=(0,l.useCallback)((e=>"PE2U7P6L77EALVDK69OE"==(null===p||void 0===p?void 0:p.id)?e["Total_Amount.text"]||"":L(e).small||""),[p,x,_,v.selectedTemplateData]);return p?(0,n.jsx)(i.Z,{tool:p,form:P,historyProps:y,dataSourceProps:k,dataHandlerProps:E,publishTexts:D,getItemName:z,getItemDescription:A,getItemBadge:Y,onOverWriteCopiedData:e=>(e=>{const t={};for(const[o,n]of Object.entries(e)){const{name:e,type:a}=(0,ee.py)(o),{directive:i}=(0,ee.mA)(e||"");a&&["upload"].includes(a)||i||(t[o]=n)}return{...t,is_freemium:!0}})(e)}):(0,n.jsx)(B.Z,{title:"Loading tool..."})}}},function(e){e.O(0,[847,400,646,48,614,630,123,42,505,162,310,908,86,986,687,106,774,888,179],(function(){return t=89879,e(e.s=t);var t}));var t=e.O();_N_E=t}]);