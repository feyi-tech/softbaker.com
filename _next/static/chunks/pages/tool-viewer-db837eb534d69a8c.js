(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{89879:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tool-viewer",function(){return o(40030)}])},34365:function(e,t,o){"use strict";o.d(t,{Iu:function(){return l},Qj:function(){return a},Yg:function(){return n},bA:function(){return s},e3:function(){return r},h$:function(){return i}});const a=(e,t,o,a)=>0==e?0:(e=e*t/o,a?parseFloat(e.toFixed(a)):Math.ceil(e)),n=(e,t,o,a)=>0==e?0:(e=e*t/o,a?parseFloat(e.toFixed(a)):Math.ceil(e)),l=(e,t,o,l,s,i)=>"translate(".concat(a(e,o,l,3)," ").concat(n(t,s,i,3),") "),s=(e,t,o,l,s,i)=>"scale(".concat(a(e,o,l,3)," ").concat(n(t,s,i,3),") ");const i=e=>e?Array.isArray(e)?e:"object"==typeof e?function(e){const t=[];return Object.keys(e).sort(((e,t)=>parseInt("".concat(e))-parseInt("".concat(t)))).forEach((o=>{t.push(e[o])})),t}(e):[]:[],r=(e,t)=>{if(!t)return e;var o="".concat(t.replace(/\n/g,"%0A")).replace(/[ ]/g,"%20");return e.split("?")[0]+"?text=".concat(o)}},99020:function(e,t,o){"use strict";var a=o(85893),n=o(55154),l=o(85461),s=o(94345);t.Z=e=>{let{children:t,onDownloadButtonClick:o,downloadFormats:i,onFormatSelected:r,showDownloadFormatOptions:d,setShowDownloadFormatOptions:c,...u}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{rightIcon:(0,a.jsx)(n.ZJh,{}),...u,onClick:()=>{1==i.length?r(i[0]):o()&&c(!0)},children:t}),d?(0,a.jsx)(s.Z,{justifyContent:"flex-start",alignItems:"center",title:"Select Format",isOpen:!0,onClose:()=>{c(!1)},children:i.map(((e,t)=>(0,a.jsx)(l.Z,{mb:"1rem",status:"warning",onClick:()=>{r(e),c(!1)},children:e.title},t)))}):null]})}},40030:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return G}});var a=o(85893),n=o(5397),l=o(67294),s=o(7963),i=o(34292),r=o(71293),d=o(48783),c=o(93717),u=o(57747),m=o(70959),p=o(44461),h=o(24124),v=o(84028),f=o(90889),g=o(67918),w=o(85461),x=o(56691),T=o(86455),y=o.n(T),j=o(53754),D=o(80419),S=o(55154),I=o(11802),b=o(96918),k=o(88627),C=o(33471),_=o(21344),E=o(41160),Z=o(34365),P=o(16344),F=o(62122),N=o(38118),M=o(7809),O=o(4623),W=o(92709),U=o(99020);var A=e=>{let{tool:t,templatesResults:o,data:n,isNew:T,onUpdateData:A,onPublishData:L,saving:R,setSaving:Y,hasPendingSave:B,collectionName:z,publishTexts:H}=e;if(!n)return null;const J=(0,s.p)(),{user:X,sdkConfig:G}=(0,P.P)(),[K,Q]=(0,l.useState)(!1),[V,$]=(0,l.useState)(!1),[q,ee]=(0,l.useState)(!1),{templatesLoading:te,templatesError:oe,selectedTemplateLoading:ae,selectedTemplateError:ne,parsingTemplate:le,templates:se,selectedTemplate:ie,selectedTemplateData:re,workingTemplate:de,workingTemplateData:ce,setAsDefaulTemplate:ue,setWorkingTemplate:me,setWorkingTemplateData:pe,selectTemplate:he,parseTemplateSvg:ve,saveTemplate:fe,deleteTemplate:ge}=o||{},[we,xe]=(0,l.useState)({}),[Te,ye]=(0,l.useState)(!1),[je,De]=(0,l.useState)(!1),[Se,Ie]=(0,l.useState)();(0,l.useEffect)((()=>{ie&&A&&A({id:n.id,template_id:ie.id})}),[ie]),(0,l.useEffect)((()=>{!T&&n&&se&&he(n.template_id)}),[se,n,T]);return(0,a.jsx)(k.Z,{tool:t,maxHeaderWidth:"100%",children:(0,a.jsxs)(g.Z,{w:"100%",maxW:"100%",h:"auto",children:[n.id!=I.XA?(0,a.jsx)(i.U,{flexWrap:"wrap",justifyContent:"space-between",children:(0,a.jsxs)(i.U,{flexWrap:"wrap",children:[(0,a.jsxs)(r.x,{m:"0px !important",mr:1,display:"none",children:["Tracking No:"," "]}),(0,a.jsx)(D.Z,{display:"none",fontWeight:"bold",m:"0px !important",mr:2,children:n.id})]})}):(0,a.jsxs)(d.g,{alignItems:"flex-start",children:[(0,a.jsxs)(i.U,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",children:[(null===t||void 0===t?void 0:t.icon)?W.Z[t.icon].element():null," ",(0,a.jsx)(r.x,{m:"0px !important",mr:1,children:(null===H||void 0===H?void 0:H.newData)||"New Item"})]}),(0,a.jsxs)(r.x,{as:"div",fontSize:"13px",children:["Click the info icon(",(0,a.jsx)(S.DAO,{style:{display:"inline"}}),") beside each form fields for help on what to enter."]})]}),(0,a.jsx)(c.k,{w:"100%",flexWrap:"wrap",m:"15px auto",children:(0,a.jsx)(u.xu,{w:{base:"100%"},bg:"#dd6b20",p:"1rem",children:(0,a.jsxs)(u.xu,{bg:(0,b.Z)("cardBg.light","cardBg.dark"),minH:"80vh",w:"100%",p:{base:"1rem"},borderRadius:"24px",children:[(0,a.jsxs)(m.m,{isFitted:!0,variant:"enclosed",children:[(0,a.jsxs)(p.t,{mb:"1em",children:[(0,a.jsx)(h.O,{children:"Edit Mode"}),(0,a.jsx)(h.O,{children:"View Mode"})]}),(0,a.jsxs)(v.n,{children:[(0,a.jsxs)(f.x,{children:[!T&&se&&Object.keys(se).length>1?(0,a.jsx)(F.Z,{w:"100%",id:"Form_".concat(n.id,"_select_template"),title:"".concat((null===t||void 0===t?void 0:t.name)||"Document"," Type"),mb:4,helperText:"Select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),info:"This is where you select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),templates:se,createdTemplatesKeys:Object.keys(se),value:de,onChange:e=>{e&&he(e.id)},onCheckInfo:()=>null,errorMessage:null,contactLink:(null===G||void 0===G?void 0:G.contact_link)?(0,Z.e3)(null===G||void 0===G?void 0:G.contact_link,"Hello. I can't find the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," I want on softbaker.")):null},"Form_".concat(n.id,"_select_template")):null,ie?(0,a.jsx)(a.Fragment,{children:te||ae?(0,a.jsx)(N.Z,{message:"Loading template assets...",minH:"100px"}):re?(0,a.jsx)(M.Z,{isFieldsEditMode:!1,created:je,showFieldsErrors:Te,fields:re.fields,images:re.images,masks:re.masks,data:n,isDragable:!1,onAllFieldsDataChange:e=>{A&&A({id:n.id,...e||{}})},onFieldDataChange:(e,t)=>{A&&A({id:n.id,[e]:t})},fieldDataErrorMessage:we,onSetFieldDataErrorMessage:xe}):null}):null]}),(0,a.jsx)(f.x,{bg:"#dcdcdc",p:"0px",children:(0,a.jsx)(E.Z,{width:"100%",message:"Drag around to view the whole tool",height:{base:500,md:728,lg:1024},pos:"relative",overflowX:"hidden",overflowY:"hidden",children:(0,a.jsx)(O.Z,{isLoading:K,width:{base:512,md:728,lg:1024},data:n,templateData:ce,showWatermark:!!n.is_freemium})})})]})]}),(0,a.jsxs)(d.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",my:8,children:[T?(0,a.jsx)(w.Z,{status:R&&!q?"loading":"warning",fontStyle:R&&!q?"italic":"normal",disabled:R,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:async()=>{L&&fe&&ie&&(Y(!0),fe().then((e=>{Y(!1),console.info("parsedSvg:templatesUrl",e),L(!1,null).then((e=>{Y(!1),J({description:T?(null===H||void 0===H?void 0:H.saveSuccess)||"New Item successfully saved.":(null===H||void 0===H?void 0:H.updateSuccess)||"Item successfully updated.",status:"success",duration:4e3,isClosable:!0}),Ie(!0)})).catch((e=>{Y(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&y().fire({icon:"error",title:T?"Tool Creation Error":"Tool Update Error",text:e.message})}))})).catch((e=>{Y(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&y().fire({icon:"error",title:T?"Tool Creation Error":"Tool Update Error",text:e.message})})))},rightIcon:R&&!q?(0,a.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):null,children:R&&!q?"Please wait...":"Create ".concat((null===t||void 0===t?void 0:t.name)||"Item")}):null,(0,a.jsx)(U.Z,{showDownloadFormatOptions:Se,setShowDownloadFormatOptions:Ie,status:R?"loading":"warning",outlined:!0,fontStyle:R?"italic":"normal",disabled:R,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",downloadFormats:[{title:"Download as PDF",format:"pdf"},{title:"Download as JPEG",format:"jpeg"},{title:"Download as PNG",format:"png"}],onDownloadButtonClick:()=>!T||(y().fire({icon:"error",title:"Download error",text:"You're yet to create the ".concat((null===t||void 0===t?void 0:t.name)||"Item",". Create the ").concat((null===t||void 0===t?void 0:t.name)||"Item"," first, then download.")}),!1),onFormatSelected:e=>{(async(e,t)=>{if(K||!re)return;await Promise.all([!0]),Q(!0),O.Z.getSvg(e,re,!e.is_freemium,1024).then((o=>{J({description:"Your invoice will download shortly.",status:"info",duration:4e3,isClosable:!0}),(0,C.T8)(o,t,"".concat((0,j.yZ)("".concat(e.companyName,"_").concat(e.customerName)),"-").concat((new Date).toISOString(),"-invoice-").concat(e.invoiceNumber)).then((e=>{Q(!1),$(!0),setTimeout((()=>{$(!1)}),8e3)})).catch((e=>{Q(!1),y().fire({icon:"error",title:"Download Error",text:e.message})}))})).catch((e=>{Q(!1),y().fire({icon:"error",title:"Download Error",text:e.message})}))})(n,e.format)},rightIcon:(0,a.jsx)(S.ZJh,{}),children:R?"Please wait...":"Download ".concat((null===t||void 0===t?void 0:t.name)||"Item")}),V?(0,a.jsxs)(_.Z,{status:"success",children:["Check your download folder for the downloaded ",(null===t||void 0===t?void 0:t.name)||"Item","."]}):null,n.is_freemium&&!T?(0,a.jsx)(w.Z,{status:R&&q?"loading":"error",fontStyle:R&&q?"italic":"normal",disabled:R,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:()=>{(e=>{if(L){Y(!0);var t=e?JSON.parse(JSON.stringify(e)):{};t.id&&delete t.id,e.is_freemium||1!=Object.keys(t).length||ee(!0),L(!1,e).then((e=>{Y(!1),y().fire({icon:"success",title:"Success",text:q?"Watermark successfully removed.":"Invoice successfully updated."}),ee(!1)})).catch((e=>{Y(!1),ee(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&y().fire({icon:"error",title:T?"Shipping Creation Error":"Shipping Update Error",text:e.message})}))}})({id:n.id,is_freemium:!1})},rightIcon:R&&q?(0,a.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):(0,a.jsx)(S.arg,{}),children:R&&q?"Please wait...":"Remove Watermark"}):null]})]})})})]})})};const L=()=>({id:I.XA,authorId:"uid",is_freemium:!0}),R={newData:"New Tool",noDataError:"No Tool selected",newTitle:"Tool Type",updateTitle:"Update Cost",updateMessage:"The update will cost you {PRICE}.",freeTitle:"Test Tool(Free).",freeMessage:"The downloaded Tool will have watermark.",paidTitle:"Clean Tool({PRICE})",paidMessage:"The downloaded Tool will be clean with no watermark.",signInMessage:"Please sign in to save your Tool.",signUpMessage:"Please sign up to save your Tool.",createButtonText:"Create Tool",noChatToListMessage:"Your Tool will show here",deleteWarning:"Are you sure you want to permanently delete this already saved tool?",saveSuccess:"New Tool successfully saved.",updateSuccess:"Tool successfully updated."};var Y=o(99555),B=o(53348),z=o(63183),H=o(3683),J=o(45326),X=o(94713);var G=()=>{const e="other_tools_data",t=(0,J.Z)(),{sdkConfig:o,getTool:s}=(0,P.P)(),[i,r]=(0,l.useState)(),[d,c]=(0,l.useState)(),[u,m]=(0,l.useState)([]),p=(0,H.Z)(null===d||void 0===d?void 0:d.templates_url);(0,l.useEffect)((()=>{var e;if(null===(e=p.selectedTemplateData)||void 0===e?void 0:e.fields){const e=[];for(const t of Object.values(p.selectedTemplateData.fields))["image_upload","sign"].includes(t.type)&&e.push(t.id);m(e)}}),[p.selectedTemplate]),(0,l.useEffect)((()=>{r(null===t||void 0===t?void 0:t.id)}),[t]),(0,l.useEffect)((()=>{if((null===o||void 0===o?void 0:o.tools)&&i){const t=s(i);c(t?{...t,collectionRuleName:e}:null)}else c(null)}),[o,i]);const h=(0,Y.Z)(20),{getCurrentTimelineData:v}=h,f=(0,l.useCallback)(L,[]),g=["is_freemium"],w=(0,B.Z)(50,f,g,u,void 0,void 0,null,i),{selectedIsNew:x,selectedData:T}=w,y={...R,newData:"New ".concat((null===d||void 0===d?void 0:d.name)||"item"),noDataError:"No ".concat((null===d||void 0===d?void 0:d.name)||"item"," selected"),newTitle:"".concat((null===d||void 0===d?void 0:d.name)||"Item"," Type"),freeTitle:"Test ".concat((null===d||void 0===d?void 0:d.name)||"Item","(Free)."),freeMessage:"The downloaded ".concat((null===d||void 0===d?void 0:d.name)||"Item"," will have watermark."),paidTitle:"Clean ".concat((null===d||void 0===d?void 0:d.name)||"Item","({PRICE})"),paidMessage:"The downloaded ".concat((null===d||void 0===d?void 0:d.name)||"Item"," will be clean with no watermark."),signInMessage:"Please sign in to save your ".concat((null===d||void 0===d?void 0:d.name)||"Item","."),signUpMessage:"Please sign up to save your ".concat((null===d||void 0===d?void 0:d.name)||"Item","."),createButtonText:"Create ".concat((null===d||void 0===d?void 0:d.name)||"Item"),noChatToListMessage:"Your list of ".concat((null===d||void 0===d?void 0:d.name)||"Item"," will show here"),deleteWarning:"Are you sure you want to permanently delete this already saved ".concat((null===d||void 0===d?void 0:d.name)||"Item","?"),saveSuccess:"New ".concat((null===d||void 0===d?void 0:d.name)||"Item"," successfully saved."),updateSuccess:"".concat((null===d||void 0===d?void 0:d.name)||"Item"," successfully updated.")},j=(0,z.Z)({collectionName:e,fileFields:u,toolId:i,historyProps:h,dataSourceProps:w,publishTexts:y,updatableFields:g}),{savingData:D,setSavingData:S,handleUpdateData:I,handlePublishData:b}=j,k=(0,l.useMemo)((()=>(0,a.jsx)(A,{tool:d,templatesResults:p,publishTexts:y,collectionName:e,isNew:x(),data:T,saving:D,setSaving:S,hasPendingSave:v((null===T||void 0===T?void 0:T.id)||"none").totalUpdates>1||x(),onUpdateData:I,onPublishData:b})),[d,y,e,T,D,p]),C=e=>{var t,o,a;for(const[n,l]of Object.entries(e)){const{name:e,type:s}=(0,X.py)(n),{directive:i}=(0,X.mA)(e||"");if(s&&["text","textarea"].includes(s)&&i&&i)switch(i){case"name":t=l;break;case"desc":o=l;break;case"small":a=l}}return{title:t,desc:o,small:a}};return d?(0,a.jsx)(n.Z,{tool:d,form:k,historyProps:h,dataSourceProps:w,dataHandlerProps:j,publishTexts:y,getItemName:e=>C(e).title||"",getItemDescription:e=>C(e).desc||"",getItemBadge:e=>C(e).desc||"",onOverWriteCopiedData:e=>({...e,is_freemium:!0})}):(0,a.jsx)(N.Z,{title:"Loading tool..."})}}},function(e){e.O(0,[847,630,201,394,493,162,986,814,238,226,46,372,106,862,774,888,179],(function(){return t=89879,e(e.s=t);var t}));var t=e.O();_N_E=t}]);