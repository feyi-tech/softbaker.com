(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{89879:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tool-viewer",function(){return o(40030)}])},99020:function(e,t,o){"use strict";var a=o(85893),n=o(55154),l=o(85461),i=o(94345);t.Z=e=>{let{children:t,onDownloadButtonClick:o,downloadFormats:s,onFormatSelected:d,showDownloadFormatOptions:r,setShowDownloadFormatOptions:c,...u}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{rightIcon:(0,a.jsx)(n.ZJh,{}),...u,onClick:()=>{1==s.length?d(s[0]):o()&&c(!0)},children:t}),r?(0,a.jsx)(i.Z,{justifyContent:"flex-start",alignItems:"center",title:"Select Format",isOpen:!0,onClose:()=>{c(!1)},children:s.map(((e,t)=>(0,a.jsx)(l.Z,{mb:"1rem",status:"warning",onClick:()=>{d(e),c(!1)},children:e.title},t)))}):null]})}},40030:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return K}});var a=o(85893),n=o(5397),l=o(67294),i=o(7963),s=o(34292),d=o(71293),r=o(48783),c=o(93717),u=o(57747),m=o(70959),p=o(44461),v=o(24124),h=o(84028),f=o(90889),g=o(67918),w=o(85461),x=o(56691),y=o(86455),T=o.n(y),j=o(53754),D=o(80419),S=o(55154),b=o(11802),I=o(96918),C=o(88627),k=o(33471),_=o(21344),Z=o(41160),E=o(34365),F=o(39461),P=o(62122),N=o(38118),O=o(32033),M=o(9849),W=o(92709),A=o(99020),U=o(33871),B=o(83613),Y=o(74054);var L=e=>{let{tool:t,templatesResults:o,data:n,isNew:y,onUpdateData:L,onPublishData:R,saving:z,setSaving:H,hasPendingSave:J,collectionName:X,publishTexts:G,initData:V}=e;if(!n)return null;const K=(0,i.p)(),{user:q,sdkConfig:Q}=(0,F.P)(),[$,ee]=(0,l.useState)(!1),[te,oe]=(0,l.useState)(!1),{templatesLoading:ae,templatesError:ne,selectedTemplateLoading:le,selectedTemplateError:ie,parsingTemplate:se,templates:de,selectedTemplate:re,selectedTemplateData:ce,workingTemplate:ue,workingTemplateData:me,setAsDefaulTemplate:pe,setWorkingTemplate:ve,setWorkingTemplateData:he,selectTemplate:fe,parseTemplateSvg:ge,saveTemplate:we,getDefaultTemplateId:xe,currentTemplateId:ye}=o||{},{error:Te,fonts:je,setFonts:De,uploadFonts:Se}=(0,B.Z)(null===re||void 0===re?void 0:re.svg);(0,Y.Z)(n,(e=>{y&&V&&V(e)}),null===ce||void 0===ce?void 0:ce.fields,ye),(0,l.useEffect)((()=>{}),[n]);const be=async(e,o)=>{if($||!ce)return;await Promise.all([!0]);ee(!0),M.Z.getSvg(e,ce,je,e.is_freemium,1024).then((a=>{K({description:"Your ".concat((null===t||void 0===t?void 0:t.name)||"item"," will download shortly."),status:"info",duration:4e3,isClosable:!0}),(0,k.T8)(a,o,"".concat((0,j.yZ)("".concat((null===t||void 0===t?void 0:t.name)||"item","-").concat((e=>{if(!e)return[];const t=[];for(const[o,a]of Object.entries(e)){const{name:e,type:n}=(0,U.py)(o),{directive:l}=(0,U.mA)(e||"");l&&t.push(a)}return t})(e).join("_"))),"-").concat((new Date).toISOString())).then((e=>{console.log("parsedSvg.SVGG3: "),ee(!1),oe(!0),setTimeout((()=>{oe(!1)}),8e3)})).catch((e=>{ee(!1),T().fire({icon:"error",title:"Download Error",text:e.message})}))})).catch((e=>{ee(!1),T().fire({icon:"error",title:"Download Error",text:e.message})}))},[Ie,Ce]=(0,l.useState)(!1),[ke,_e]=(0,l.useState)({}),[Ze,Ee]=(0,l.useState)(!0),[Fe,Pe]=(0,l.useState)(!1),[Ne,Oe]=(0,l.useState)();(0,l.useEffect)((()=>{}),[re]),(0,l.useEffect)((()=>{!y&&n&&de&&(null===re||void 0===re?void 0:re.id)!=n.template_id?fe(n.template_id):y&&de&&!re&&fe(xe(de))}),[de,n,y]);const Me=()=>{R?R(!1,null).then((e=>{H(!1),K({description:y?(null===G||void 0===G?void 0:G.saveSuccess)||"New Item successfully saved.":(null===G||void 0===G?void 0:G.updateSuccess)||"Item successfully updated.",status:"success",duration:4e3,isClosable:!0}),Oe(!0)})).catch((e=>{H(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&T().fire({icon:"error",title:y?"Tool Creation Error":"Tool Update Error",text:e.message})})):H(!1)},We=(0,l.useMemo)((()=>ce?(0,a.jsx)(O.Z,{isFieldsEditMode:!1,created:!y,showFieldsErrors:Ze,fields:ce.fields,images:ce.images,masks:ce.masks,data:n,isDragable:!1,onAllFieldsDataChange:e=>{console.log("useFieldsData.onAllFieldsDataChange",e,"data",n),L&&L({...e||{}})},onFieldDataChange:(e,t)=>{console.log("useFieldsData.onFieldDataChange",e,t),L&&L({id:n.id,[e]:t})},fieldDataErrorMessage:ke,onSetFieldDataErrorMessage:_e}):null),[ce,y,Ze,n,L]);return(0,a.jsx)(C.Z,{tool:t,maxHeaderWidth:"100%",children:(0,a.jsxs)(g.Z,{w:"100%",maxW:"100%",h:"auto",children:[n.id!=b.XA?(0,a.jsx)(s.U,{flexWrap:"wrap",justifyContent:"space-between",children:(0,a.jsxs)(s.U,{flexWrap:"wrap",children:[(0,a.jsxs)(d.x,{m:"0px !important",mr:1,display:"none",children:["Tracking No:"," "]}),(0,a.jsx)(D.Z,{display:"none",fontWeight:"bold",m:"0px !important",mr:2,children:n.id})]})}):(0,a.jsxs)(r.g,{alignItems:"flex-start",children:[(0,a.jsxs)(s.U,{flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",children:[(null===t||void 0===t?void 0:t.icon)&&W.Z[t.icon]?W.Z[t.icon].element():(0,a.jsx)(S.sYB,{})," ",(0,a.jsx)(d.x,{m:"0px !important",mr:1,children:(null===G||void 0===G?void 0:G.newData)||"New Item"})]}),(0,a.jsxs)(d.x,{as:"div",fontSize:"13px",children:["Click the info icon(",(0,a.jsx)(S.DAO,{style:{display:"inline"}}),") beside each form fields for help on what to enter."]})]}),(0,a.jsx)(c.k,{w:"100%",flexWrap:"wrap",m:"15px auto",children:(0,a.jsx)(u.xu,{w:{base:"100%"},bg:"#dd6b20",p:"1rem",children:(0,a.jsxs)(u.xu,{bg:(0,I.Z)("cardBg.light","cardBg.dark"),minH:"80vh",w:"100%",p:{base:"1rem"},borderRadius:"24px",children:[(0,a.jsxs)(m.m,{isFitted:!0,variant:"enclosed",children:[(0,a.jsxs)(p.t,{mb:"1em",children:[(0,a.jsx)(v.O,{children:"Edit Mode"}),(0,a.jsx)(v.O,{children:"View Mode"})]}),(0,a.jsxs)(h.n,{children:[(0,a.jsxs)(f.x,{children:[y&&de&&Object.keys(de).length>1?(0,a.jsx)(P.Z,{w:"100%",id:"Form_".concat(n.id,"_select_template"),title:"".concat((null===t||void 0===t?void 0:t.name)||"Document"," Type"),mb:4,helperText:"Select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),info:"This is where you select the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," you want."),templates:de,createdTemplatesKeys:Object.keys(de),value:ue,onChange:e=>{e&&fe(e.id)},onCheckInfo:()=>null,errorMessage:null,contactLink:(null===Q||void 0===Q?void 0:Q.contact_link)?(0,E.e3)(null===Q||void 0===Q?void 0:Q.contact_link,"Hello. I can't find the type of ".concat((null===t||void 0===t?void 0:t.name)||"Document"," I want on softbaker.")):null},"Form_".concat(n.id,"_select_template")):null,re?(0,a.jsx)(a.Fragment,{children:ae||le?(0,a.jsx)(N.Z,{message:"Loading template assets...",minH:"100px"}):We}):null]}),(0,a.jsx)(f.x,{bg:"#dcdcdc",p:"0px",children:(0,a.jsx)(Z.Z,{width:"100%",message:"Drag around to view the whole tool",height:{base:500,md:728,lg:1024},pos:"relative",overflowX:"hidden",overflowY:"hidden",children:(0,a.jsx)(M.Z,{isLoading:$,width:{base:512,md:728,lg:1024},data:n,templateData:me,showWatermark:!!n.is_freemium})})})]})]}),(0,a.jsxs)(r.g,{w:"100%",justifyContent:"flex-start",alignItems:"center",my:8,children:[y?(0,a.jsx)(w.Z,{status:z&&!Ie?"loading":"warning",fontStyle:z&&!Ie?"italic":"normal",disabled:z,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:async()=>{if(!R||!we||!re)return;H(!0);const e=(()=>{if(_e({}),null===ce||void 0===ce?void 0:ce.fields){const e={},t=[],o=[],a={text:"provided",sign:"provided",image_upload:"uploaded",faceshot:"uploaded"};for(const l of Object.values(ce.fields))if(!n[l.id]&&"gen"!=l.type&&(e[l.id]="No ".concat(l.name," ").concat(a[l.type]||"provided","."),t.push(l.name),o.length<2)){const{name:e,type:t}=(0,U.py)(l.id),{directive:a}=(0,U.mA)(e||"");["name","desc"].includes(a)&&o.push(l.name)}return _e(e),{all:t,compulsory:o}}return{all:[],compulsory:[]}})();e.compulsory.length>0?(H(!1),T().fire({title:"Form Entry Error",icon:"error",text:1==e.compulsory.length?"".concat(e.compulsory[0]," cannot be empty!"):"".concat(e.compulsory.join(", ")," cannot be empty.")})):e.all.length>0?(H(!1),T().fire({title:"Some fields are not provided",icon:"warning",text:1==e.all.length?"No ".concat(e.all[0]," provided! Are you sure you want to create the ").concat((null===t||void 0===t?void 0:t.name)||"item"," without it?"):"Are you sure you want to create the ".concat((null===t||void 0===t?void 0:t.name)||"item"," without providing them? The affected fields are ").concat(e.all.join(", "),"."),showCancelButton:!0,confirmButtonText:"Yes, Contine",cancelButtonText:"No"}).then((e=>{e.isConfirmed&&(H(!0),Me())}))):Me()},rightIcon:z&&!Ie?(0,a.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):null,children:z&&!Ie?"Please wait...":"Create ".concat((null===t||void 0===t?void 0:t.name)||"Item")}):null,(0,a.jsx)(A.Z,{showDownloadFormatOptions:Ne,setShowDownloadFormatOptions:Oe,status:z?"loading":"warning",outlined:!0,fontStyle:z?"italic":"normal",disabled:z,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",downloadFormats:[{title:"Download as PDF",format:"pdf"},{title:"Download as JPEG",format:"jpeg"},{title:"Download as PNG",format:"png"}],onDownloadButtonClick:()=>!y||(T().fire({icon:"error",title:"Download error",text:"You're yet to create the ".concat((null===t||void 0===t?void 0:t.name)||"Item",". Create the ").concat((null===t||void 0===t?void 0:t.name)||"Item"," first, then download.")}),!1),onFormatSelected:e=>{be(n,e.format)},rightIcon:(0,a.jsx)(S.ZJh,{}),children:z?"Please wait...":"Download ".concat((null===t||void 0===t?void 0:t.name)||"Item")}),te?(0,a.jsxs)(_.Z,{status:"success",children:["Check your download folder for the downloaded ",(null===t||void 0===t?void 0:t.name)||"Item","."]}):null,n.is_freemium&&!y?(0,a.jsx)(w.Z,{status:z&&Ie?"loading":"error",fontStyle:z&&Ie?"italic":"normal",disabled:z,w:"100%",maxW:"400px",h:"70px",fontSize:"lg",onClick:()=>{(e=>{if(!R)return;H(!0);var o=e?JSON.parse(JSON.stringify(e)):{};o.id&&delete o.id,e.is_freemium||1!=Object.keys(o).length||Ce(!0);const a=!e.is_freemium&&1==Object.keys(o).length;R(!1,e).then((e=>{H(!1),T().fire({icon:"success",title:"Success",text:a?"Watermark successfully removed.":"".concat((null===t||void 0===t?void 0:t.name)||"Item"," successfully updated.")}),Ce(!1)})).catch((e=>{H(!1),Ce(!1),((null===e||void 0===e?void 0:e.message)||"").length>0&&T().fire({icon:"error",title:"".concat((null===t||void 0===t?void 0:t.name)||"Item",y?" Creation Error":" Update Error"),text:e.message})}))})({id:n.id,is_freemium:!1})},rightIcon:z&&Ie?(0,a.jsx)(x.Z,{size:"1rem",color:"#fff",type:x.Z.TYPES.threeDots}):(0,a.jsx)(S.arg,{}),children:z&&Ie?"Please wait...":"Remove Watermark"}):null]})]})})})]})})};const R=()=>({id:b.XA,authorId:"uid",is_freemium:!0}),z={newData:"New Tool",noDataError:"No Tool selected",newTitle:"Tool Type",updateTitle:"Update Cost",updateMessage:"The update will cost you {PRICE}.",freeTitle:"Test Tool(Free).",freeMessage:"The downloaded Tool will have watermark.",paidTitle:"Clean Tool({PRICE})",paidMessage:"The downloaded Tool will be clean with no watermark.",signInMessage:"Please sign in to save your Tool.",signUpMessage:"Please sign up to save your Tool.",createButtonText:"Create Tool",noChatToListMessage:"Your Tool will show here",deleteWarning:"Are you sure you want to permanently delete this already saved tool?",saveSuccess:"New Tool successfully saved.",updateSuccess:"Tool successfully updated."};var H=o(99555),J=o(53348),X=o(63183),G=o(3683),V=o(45326);var K=()=>{const e="other_tools_data",t=(0,V.Z)(),{sdkConfig:o,getTool:i}=(0,F.P)(),[s,d]=(0,l.useState)(),[r,c]=(0,l.useState)({}),[u,m]=(0,l.useState)([]),p=(0,G.Z)(null===r||void 0===r?void 0:r.templates_url,!0);(0,l.useEffect)((()=>{var e;if(null===(e=p.selectedTemplateData)||void 0===e?void 0:e.fields){const e=[];for(const t of Object.values(p.selectedTemplateData.fields))["image_upload","sign","faceshot"].includes(t.type)&&e.push(t.id);m(e)}}),[p.selectedTemplate]),(0,l.useEffect)((()=>{d(null===t||void 0===t?void 0:t.id)}),[t]),(0,l.useEffect)((()=>{if((null===o||void 0===o?void 0:o.tools)&&s){const t=i(s);t&&c({...t,collectionRuleName:e})}}),[o,s]);const v=(0,H.Z)(20),{getCurrentTimelineData:h}=v,f=(0,l.useCallback)(R,[]),g=["is_freemium"],w=(0,J.Z)(50,f,g,u,void 0,void 0,null,s),{selectedIsNew:x,selectedData:y,initData:T}=w,j={...z,newData:"New ".concat((null===r||void 0===r?void 0:r.name)||"item"),noDataError:"No ".concat((null===r||void 0===r?void 0:r.name)||"item"," selected"),newTitle:"".concat((null===r||void 0===r?void 0:r.name)||"Item"," Type"),freeTitle:"Test ".concat((null===r||void 0===r?void 0:r.name)||"Item","(Free)."),freeMessage:"The downloaded ".concat((null===r||void 0===r?void 0:r.name)||"Item"," will have watermark."),paidTitle:"Clean ".concat((null===r||void 0===r?void 0:r.name)||"Item","({PRICE})"),paidMessage:"The downloaded ".concat((null===r||void 0===r?void 0:r.name)||"Item"," will be clean with no watermark."),signInMessage:"Please sign in to save your ".concat((null===r||void 0===r?void 0:r.name)||"Item","."),signUpMessage:"Please sign up to save your ".concat((null===r||void 0===r?void 0:r.name)||"Item","."),createButtonText:"Create ".concat((null===r||void 0===r?void 0:r.name)||"Item"),noChatToListMessage:"Your list of ".concat((null===r||void 0===r?void 0:r.name)||"Item"," will show here"),deleteWarning:"Are you sure you want to permanently delete this already saved ".concat((null===r||void 0===r?void 0:r.name)||"Item","?"),saveSuccess:"New ".concat((null===r||void 0===r?void 0:r.name)||"Item"," successfully saved."),updateSuccess:"".concat((null===r||void 0===r?void 0:r.name)||"Item"," successfully updated.")},D=(0,X.Z)({collectionName:e,fileFields:u,toolId:s,historyProps:v,dataSourceProps:w,publishTexts:j,updatableFields:g}),{savingData:S,setSavingData:b,handleUpdateData:I,handlePublishData:C}=D,k=(0,l.useMemo)((()=>(0,a.jsx)(L,{tool:r,initData:T,templatesResults:p,publishTexts:j,collectionName:e,isNew:x(),data:y,saving:S,setSaving:b,hasPendingSave:h((null===y||void 0===y?void 0:y.id)||"none").totalUpdates>1||x(),onUpdateData:I,onPublishData:C})),[r,j,e,y,S,T,p]),_=e=>{var t,o,a;for(const[n,l]of Object.entries(e)){const{name:e,type:i}=(0,U.py)(n),{directive:s}=(0,U.mA)(e||"");if(i&&["text","textarea"].includes(i)&&s)switch(s){case"name":t=l;break;case"desc":o=l;break;case"small":a=l}}return{title:t,desc:o,small:a}};return r?(0,a.jsx)(n.Z,{tool:r,form:k,historyProps:v,dataSourceProps:w,dataHandlerProps:D,publishTexts:j,getItemName:e=>_(e).title||"",getItemDescription:e=>_(e).desc||"",getItemBadge:e=>_(e).small||"",onOverWriteCopiedData:e=>(e=>{const t={is_freemium:!0};for(const[o,a]of Object.entries(e)){const{name:e,type:n}=(0,U.py)(o),{directive:l}=(0,U.mA)(e||"");n&&["upload"].includes(n)||l||(t[o]=a)}return t})(e)}):(0,a.jsx)(N.Z,{title:"Loading tool..."})}}},function(e){e.O(0,[847,214,958,614,630,201,939,493,505,162,506,814,238,666,986,879,687,106,393,774,888,179],(function(){return t=89879,e(e.s=t);var t}));var t=e.O();_N_E=t}]);